SHADOW_ENV.evalLoad("chess.components.square.js", true , "goog.provide(\x27chess.components.square\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27chess.utils\x27);\nchess.components.square.square \x3d (function chess$components$square$square(props){\n\nvar has_piece \x3d (!(((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : props.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))) \x3d\x3d null)));\nvar style \x3d new cljs.core.PersistentArrayMap(null, 4, [\x22float\x22,\x22left\x22,\x22width\x22,\x2215%\x22,\x22background\x22,(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : props.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))))?\x22#40aad4\x22:(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653)) : props.call(null,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653))))?\x22#4ae896\x22:(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913)) : props.call(null,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913))))?\x22#ada284\x22:\x22#fff\x22\n))),\x22border\x22,(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653)) : props.call(null,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653))))?\x221px dotted #40aad4\x22:\x221px solid #999\x22\n)], null);\nreturn (function (vdom_state__6056__auto__){\nvar hook_instances__6057__auto__ \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),style,new cljs.core.Keyword(null,\x22on\x22,\x22on\x22,173873944),new cljs.core.PersistentArrayMap(null, 1, [\x22click\x22,(function (){\nvar fexpr__7443 \x3d (props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543)) : props.call(null,new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543)));\nreturn (fexpr__7443.cljs$core$IFn$_invoke$arity$0 ? fexpr__7443.cljs$core$IFn$_invoke$arity$0() : fexpr__7443.call(null));\n})], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((has_piece)?(function (vdom_state__6056__auto____$1){\nvar hook_instances__6057__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,chess.utils.asset_path([\x22/pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : props.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)))),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : props.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)))),\x22.svg\x22].join(\x27\x27))], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(cljs.core.PersistentVector.EMPTY));\n});\n}):cljs.core.List.EMPTY)], null)));\n});\n});\n});\n");
SHADOW_ENV.evalLoad("chess.components.board.js", true , "goog.provide(\x27chess.components.board\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.components.square\x27);\ngoog.require(\x27html_cljs.hooks\x27);\ngoog.require(\x27chess.utils\x27);\ngoog.require(\x27html_cljs.html\x27);\nchess.components.board.find_move \x3d (function chess$components$board$find_move(moves,move){\nvar vec__7450 \x3d move;\nvar mfrom \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7450,(0),null);\nvar mto \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7450,(1),null);\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p__7455){\nvar vec__7457 \x3d p__7455;\nvar from \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7457,(0),null);\nvar to \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7457,(1),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(from,mfrom)){\nif((mto \x3d\x3d null)){\nreturn true;\n} else {\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(to,mto);\n}\n} else {\nreturn false;\n}\n}),moves);\n});\nchess.components.board.uiify \x3d (function chess$components$board$uiify(sq,i,j,state,set_state,moves,on_move){\nvar vec__7488 \x3d chess.components.board.find_move(moves,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null)], null));\nvar move_here \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7488,(0),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(sq,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.mod((j + cljs.core.mod(i,(2))),(2)),(0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543),(function (){\nif((move_here \x3d\x3d null)){\nvar G__7510 \x3d (function (p1__7474_SHARP_){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(p1__7474_SHARP_,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null));\n});\nreturn (set_state.cljs$core$IFn$_invoke$arity$1 ? set_state.cljs$core$IFn$_invoke$arity$1(G__7510) : set_state.call(null,G__7510));\n} else {\nreturn (on_move.cljs$core$IFn$_invoke$arity$1 ? on_move.cljs$core$IFn$_invoke$arity$1(move_here) : on_move.call(null,move_here));\n}\n}),new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653),(!((move_here \x3d\x3d null))),new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null),(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)))),new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : sq.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))),(function (p1__7482_SHARP_){\nreturn cljs.core.name(p1__7482_SHARP_);\n})),new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : sq.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173))),(function (p1__7483_SHARP_){\nreturn cljs.core.name(p1__7483_SHARP_);\n}))], 0));\n});\nchess.components.board.board \x3d (function chess$components$board$board(var_args){\nvar args__4795__auto__ \x3d [];\nvar len__4789__auto___7657 \x3d arguments.length;\nvar i__4790__auto___7658 \x3d (0);\nwhile(true){\nif((i__4790__auto___7658 \x3c len__4789__auto___7657)){\nargs__4795__auto__.push((arguments[i__4790__auto___7658]));\n\nvar G__7659 \x3d (i__4790__auto___7658 + (1));\ni__4790__auto___7658 \x3d G__7659;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4796__auto__ \x3d ((((0) \x3c args__4795__auto__.length))?(new cljs.core.IndexedSeq(args__4795__auto__.slice((0)),(0),null)):null);\nreturn chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic(argseq__4796__auto__);\n});\n\n(chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic \x3d (function (p__7536){\nvar map__7538 \x3d p__7536;\nvar map__7538__$1 \x3d (((((!((map__7538 \x3d\x3d null))))?(((((map__7538.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__7538.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__7538):map__7538);\nvar board \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__7538__$1,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633));\nvar player \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__7538__$1,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400));\nvar moves \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__7538__$1,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255));\nvar on_move \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__7538__$1,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710));\n\nvar board_size \x3d (0.9 * (function (){var x__4276__auto__ \x3d window.innerWidth;\nvar y__4277__auto__ \x3d window.innerHeight;\nreturn ((x__4276__auto__ \x3c y__4277__auto__) ? x__4276__auto__ : y__4277__auto__);\n})());\nreturn (function (vdom_state__6056__auto__){\nvar hook_instances__6057__auto__ \x3d new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [html_cljs.hooks.use_state(new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),null], null))], null);\nreturn (function (){\nvar vec__7555 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__6058__6059__auto__){\nreturn (p1__6058__6059__auto__.cljs$core$IFn$_invoke$arity$1 ? p1__6058__6059__auto__.cljs$core$IFn$_invoke$arity$1(vdom_state__6056__auto__) : p1__6058__6059__auto__.call(null,vdom_state__6056__auto__));\n}),hook_instances__6057__auto__);\nvar vec__7558 \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7555,(0),null);\nvar state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7558,(0),null);\nvar set_state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7558,(1),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 4, [\x22width\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22height\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22display\x22,\x22inline-block\x22,\x22margin\x22,\x225px\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d (function chess$components$board$iter__7564(s__7565){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__7565__$1 \x3d s__7565;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__7565__$1);\nif(temp__5735__auto__){\nvar s__7565__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__7565__$2)){\nvar c__4580__auto__ \x3d cljs.core.chunk_first(s__7565__$2);\nvar size__4581__auto__ \x3d cljs.core.count(c__4580__auto__);\nvar b__7567 \x3d cljs.core.chunk_buffer(size__4581__auto__);\nif((function (){var i__7566 \x3d (0);\nwhile(true){\nif((i__7566 \x3c size__4581__auto__)){\nvar vec__7574 \x3d cljs.core._nth(c__4580__auto__,i__7566);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7574,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7574,(1),null);\ncljs.core.chunk_append(b__7567,((function (i__7566,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move){\nreturn (function (vdom_state__6056__auto____$1){\nvar hook_instances__6057__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn ((function (i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move){\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d ((function (i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move){\nreturn (function chess$components$board$iter__7564_$_iter__7582(s__7583){\nreturn (new cljs.core.LazySeq(null,((function (i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move){\nreturn (function (){\nvar s__7583__$1 \x3d s__7583;\nwhile(true){\nvar temp__5735__auto____$1 \x3d cljs.core.seq(s__7583__$1);\nif(temp__5735__auto____$1){\nvar s__7583__$2 \x3d temp__5735__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__7583__$2)){\nvar c__4580__auto____$1 \x3d cljs.core.chunk_first(s__7583__$2);\nvar size__4581__auto____$1 \x3d cljs.core.count(c__4580__auto____$1);\nvar b__7585 \x3d cljs.core.chunk_buffer(size__4581__auto____$1);\nif((function (){var i__7584 \x3d (0);\nwhile(true){\nif((i__7584 \x3c size__4581__auto____$1)){\nvar vec__7589 \x3d cljs.core._nth(c__4580__auto____$1,i__7584);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7589,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7589,(1),null);\ncljs.core.chunk_append(b__7585,chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)));\n\nvar G__7693 \x3d (i__7584 + (1));\ni__7584 \x3d G__7693;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7585),chess$components$board$iter__7564_$_iter__7582(cljs.core.chunk_rest(s__7583__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7585),null);\n}\n} else {\nvar vec__7596 \x3d cljs.core.first(s__7583__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7596,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7596,(1),null);\nreturn cljs.core.cons(chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)),chess$components$board$iter__7564_$_iter__7582(cljs.core.rest(s__7583__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n});})(i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move))\n,null,null));\n});})(i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move))\n;\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n;})(i__7566,hook_instances__6057__auto____$1,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move))\n});})(i__7566,vec__7574,row,i,c__4580__auto__,size__4581__auto__,b__7567,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move))\n);\n\nvar G__7703 \x3d (i__7566 + (1));\ni__7566 \x3d G__7703;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7567),chess$components$board$iter__7564(cljs.core.chunk_rest(s__7565__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7567),null);\n}\n} else {\nvar vec__7605 \x3d cljs.core.first(s__7565__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7605,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7605,(1),null);\nreturn cljs.core.cons(((function (vec__7605,row,i,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move){\nreturn (function (vdom_state__6056__auto____$1){\nvar hook_instances__6057__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d (function chess$components$board$iter__7564_$_iter__7609(s__7610){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__7610__$1 \x3d s__7610;\nwhile(true){\nvar temp__5735__auto____$1 \x3d cljs.core.seq(s__7610__$1);\nif(temp__5735__auto____$1){\nvar s__7610__$2 \x3d temp__5735__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__7610__$2)){\nvar c__4580__auto__ \x3d cljs.core.chunk_first(s__7610__$2);\nvar size__4581__auto__ \x3d cljs.core.count(c__4580__auto__);\nvar b__7612 \x3d cljs.core.chunk_buffer(size__4581__auto__);\nif((function (){var i__7611 \x3d (0);\nwhile(true){\nif((i__7611 \x3c size__4581__auto__)){\nvar vec__7617 \x3d cljs.core._nth(c__4580__auto__,i__7611);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7617,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7617,(1),null);\ncljs.core.chunk_append(b__7612,chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)));\n\nvar G__7718 \x3d (i__7611 + (1));\ni__7611 \x3d G__7718;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7612),chess$components$board$iter__7564_$_iter__7609(cljs.core.chunk_rest(s__7610__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__7612),null);\n}\n} else {\nvar vec__7626 \x3d cljs.core.first(s__7610__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7626,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__7626,(1),null);\nreturn cljs.core.cons(chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)),chess$components$board$iter__7564_$_iter__7609(cljs.core.rest(s__7610__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n});})(vec__7605,row,i,s__7565__$2,temp__5735__auto__,vec__7555,vec__7558,state,set_state,hook_instances__6057__auto__,board_size,map__7538,map__7538__$1,board,player,moves,on_move))\n,chess$components$board$iter__7564(cljs.core.rest(s__7565__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n});\n}));\n\n(chess.components.board.board.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.components.board.board.cljs$lang$applyTo \x3d (function (seq7530){\nvar self__4777__auto__ \x3d this;\nreturn self__4777__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq7530));\n}));\n\n");
SHADOW_ENV.evalLoad("chess.engine.worker_engine.js", true , "goog.provide(\x27chess.engine.worker_engine\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.engine.core\x27);\ngoog.require(\x27cljs.core.async\x27);\ngoog.require(\x27chess.engine.local_engine\x27);\ngoog.require(\x27cljs.reader\x27);\ngoog.require(\x27clojure.walk\x27);\ngoog.require(\x27chess.utils\x27);\n\nchess.engine.worker_engine.load_worker \x3d (function chess$engine$worker_engine$load_worker(filename,id){\n\nvar c \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar reply_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar worker \x3d (new Worker(filename));\n(worker[\x22onmessage\x22] \x3d (function (e){\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_7902){\nvar state_val_7904 \x3d (state_7902[(1)]);\nif((state_val_7904 \x3d\x3d\x3d (1))){\nvar inst_7891 \x3d e.data;\nvar inst_7892 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1(inst_7891) : chess.engine.worker_engine.printl.call(null,inst_7891));\nvar state_7902__$1 \x3d state_7902;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_7902__$1,(2),reply_chan,inst_7892);\n} else {\nif((state_val_7904 \x3d\x3d\x3d (2))){\nvar inst_7896 \x3d (state_7902[(2)]);\nvar state_7902__$1 \x3d state_7902;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_7902__$1,inst_7896);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_7907 \x3d [null,null,null,null,null,null,null];\n(statearr_7907[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__);\n\n(statearr_7907[(1)] \x3d (1));\n\nreturn statearr_7907;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1 \x3d (function (state_7902){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_7902);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e7910){if((e7910 instanceof Object)){\nvar ex__7410__auto__ \x3d e7910;\nvar statearr_7912_8355 \x3d state_7902;\n(statearr_7912_8355[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_7902);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e7910;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8356 \x3d state_7902;\nstate_7902 \x3d G__8356;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__ \x3d function(state_7902){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1.call(this,state_7902);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_7914 \x3d f__7472__auto__();\n(statearr_7914[(6)] \x3d c__7471__auto__);\n\nreturn statearr_7914;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n}));\n\nvar c__7471__auto___8357 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8009){\nvar state_val_8010 \x3d (state_8009[(1)]);\nif((state_val_8010 \x3d\x3d\x3d (7))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8018_8358 \x3d state_8009__$1;\n(statearr_8018_8358[(2)] \x3d false);\n\n(statearr_8018_8358[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (20))){\nvar inst_7955 \x3d (state_8009[(7)]);\nvar inst_7977 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_7955);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8020_8359 \x3d state_8009__$1;\n(statearr_8020_8359[(2)] \x3d inst_7977);\n\n(statearr_8020_8359[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (27))){\nvar inst_7981 \x3d (state_8009[(8)]);\nvar inst_7991 \x3d (state_8009[(2)]);\nvar inst_7992 \x3d cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1(inst_7991);\nvar state_8009__$1 \x3d state_8009;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8009__$1,(26),inst_7981,inst_7992);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (1))){\nvar state_8009__$1 \x3d state_8009;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8009__$1,(2),c);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (24))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8024_8360 \x3d state_8009__$1;\n(statearr_8024_8360[(2)] \x3d null);\n\n(statearr_8024_8360[(1)] \x3d (25));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (4))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8026_8361 \x3d state_8009__$1;\n(statearr_8026_8361[(2)] \x3d false);\n\n(statearr_8026_8361[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (15))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8028_8362 \x3d state_8009__$1;\n(statearr_8028_8362[(2)] \x3d false);\n\n(statearr_8028_8362[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (21))){\nvar inst_7955 \x3d (state_8009[(7)]);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8030_8363 \x3d state_8009__$1;\n(statearr_8030_8363[(2)] \x3d inst_7955);\n\n(statearr_8030_8363[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (13))){\nvar inst_8005 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8009__$1,inst_8005);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (22))){\nvar inst_7982 \x3d (state_8009[(9)]);\nvar inst_7980 \x3d (state_8009[(2)]);\nvar inst_7981 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_7980,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_7982__$1 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_7980,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_7984 \x3d (inst_7982__$1 \x3d\x3d null);\nvar inst_7985 \x3d cljs.core.not(inst_7984);\nvar state_8009__$1 \x3d (function (){var statearr_8039 \x3d state_8009;\n(statearr_8039[(9)] \x3d inst_7982__$1);\n\n(statearr_8039[(8)] \x3d inst_7981);\n\nreturn statearr_8039;\n})();\nif(inst_7985){\nvar statearr_8040_8364 \x3d state_8009__$1;\n(statearr_8040_8364[(1)] \x3d (23));\n\n} else {\nvar statearr_8041_8365 \x3d state_8009__$1;\n(statearr_8041_8365[(1)] \x3d (24));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (6))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8043_8366 \x3d state_8009__$1;\n(statearr_8043_8366[(2)] \x3d true);\n\n(statearr_8043_8366[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (28))){\nvar inst_7999 \x3d (state_8009[(2)]);\nvar inst_7955 \x3d inst_7999;\nvar state_8009__$1 \x3d (function (){var statearr_8046 \x3d state_8009;\n(statearr_8046[(7)] \x3d inst_7955);\n\nreturn statearr_8046;\n})();\nvar statearr_8048_8367 \x3d state_8009__$1;\n(statearr_8048_8367[(2)] \x3d null);\n\n(statearr_8048_8367[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (25))){\nvar inst_8003 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8052_8368 \x3d state_8009__$1;\n(statearr_8052_8368[(2)] \x3d inst_8003);\n\n(statearr_8052_8368[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (17))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8053_8369 \x3d state_8009__$1;\n(statearr_8053_8369[(2)] \x3d true);\n\n(statearr_8053_8369[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (3))){\nvar inst_7919 \x3d (state_8009[(10)]);\nvar inst_7935 \x3d inst_7919.cljs$lang$protocol_mask$partition0$;\nvar inst_7936 \x3d (inst_7935 \x26 (64));\nvar inst_7937 \x3d inst_7919.cljs$core$ISeq$;\nvar inst_7938 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_7937);\nvar inst_7939 \x3d ((inst_7936) || (inst_7938));\nvar state_8009__$1 \x3d state_8009;\nif(cljs.core.truth_(inst_7939)){\nvar statearr_8055_8370 \x3d state_8009__$1;\n(statearr_8055_8370[(1)] \x3d (6));\n\n} else {\nvar statearr_8056_8371 \x3d state_8009__$1;\n(statearr_8056_8371[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (12))){\nvar inst_7955 \x3d (state_8009[(7)]);\nvar inst_7959 \x3d (inst_7955 \x3d\x3d null);\nvar inst_7960 \x3d cljs.core.not(inst_7959);\nvar state_8009__$1 \x3d state_8009;\nif(inst_7960){\nvar statearr_8057_8372 \x3d state_8009__$1;\n(statearr_8057_8372[(1)] \x3d (14));\n\n} else {\nvar statearr_8058_8373 \x3d state_8009__$1;\n(statearr_8058_8373[(1)] \x3d (15));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (2))){\nvar inst_7919 \x3d (state_8009[(10)]);\nvar inst_7919__$1 \x3d (state_8009[(2)]);\nvar inst_7931 \x3d (inst_7919__$1 \x3d\x3d null);\nvar inst_7932 \x3d cljs.core.not(inst_7931);\nvar state_8009__$1 \x3d (function (){var statearr_8060 \x3d state_8009;\n(statearr_8060[(10)] \x3d inst_7919__$1);\n\nreturn statearr_8060;\n})();\nif(inst_7932){\nvar statearr_8061_8374 \x3d state_8009__$1;\n(statearr_8061_8374[(1)] \x3d (3));\n\n} else {\nvar statearr_8062_8375 \x3d state_8009__$1;\n(statearr_8062_8375[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (23))){\nvar inst_7982 \x3d (state_8009[(9)]);\nvar inst_7987 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 starting work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 starting work\x22));\nvar inst_7988 \x3d cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_7982], 0));\nvar inst_7989 \x3d worker.postMessage(inst_7988);\nvar state_8009__$1 \x3d (function (){var statearr_8063 \x3d state_8009;\n(statearr_8063[(11)] \x3d inst_7987);\n\n(statearr_8063[(12)] \x3d inst_7989);\n\nreturn statearr_8063;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8009__$1,(27),reply_chan);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (19))){\nvar inst_7971 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8065_8376 \x3d state_8009__$1;\n(statearr_8065_8376[(2)] \x3d inst_7971);\n\n(statearr_8065_8376[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (11))){\nvar inst_7919 \x3d (state_8009[(10)]);\nvar inst_7951 \x3d (state_8009[(2)]);\nvar inst_7952 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_7951,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_7953 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_7951,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_7955 \x3d inst_7919;\nvar state_8009__$1 \x3d (function (){var statearr_8067 \x3d state_8009;\n(statearr_8067[(13)] \x3d inst_7953);\n\n(statearr_8067[(7)] \x3d inst_7955);\n\n(statearr_8067[(14)] \x3d inst_7952);\n\nreturn statearr_8067;\n})();\nvar statearr_8068_8377 \x3d state_8009__$1;\n(statearr_8068_8377[(2)] \x3d null);\n\n(statearr_8068_8377[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (9))){\nvar inst_7919 \x3d (state_8009[(10)]);\nvar inst_7948 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_7919);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8069_8378 \x3d state_8009__$1;\n(statearr_8069_8378[(2)] \x3d inst_7948);\n\n(statearr_8069_8378[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (5))){\nvar inst_7946 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nif(cljs.core.truth_(inst_7946)){\nvar statearr_8070_8379 \x3d state_8009__$1;\n(statearr_8070_8379[(1)] \x3d (9));\n\n} else {\nvar statearr_8071_8380 \x3d state_8009__$1;\n(statearr_8071_8380[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (14))){\nvar inst_7955 \x3d (state_8009[(7)]);\nvar inst_7963 \x3d inst_7955.cljs$lang$protocol_mask$partition0$;\nvar inst_7964 \x3d (inst_7963 \x26 (64));\nvar inst_7965 \x3d inst_7955.cljs$core$ISeq$;\nvar inst_7966 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_7965);\nvar inst_7967 \x3d ((inst_7964) || (inst_7966));\nvar state_8009__$1 \x3d state_8009;\nif(cljs.core.truth_(inst_7967)){\nvar statearr_8074_8381 \x3d state_8009__$1;\n(statearr_8074_8381[(1)] \x3d (17));\n\n} else {\nvar statearr_8075_8382 \x3d state_8009__$1;\n(statearr_8075_8382[(1)] \x3d (18));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (26))){\nvar inst_7981 \x3d (state_8009[(8)]);\nvar inst_7994 \x3d (state_8009[(2)]);\nvar inst_7995 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 finished work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 finished work\x22));\nvar inst_7996 \x3d cljs.core.async.close_BANG_(inst_7981);\nvar state_8009__$1 \x3d (function (){var statearr_8076 \x3d state_8009;\n(statearr_8076[(15)] \x3d inst_7994);\n\n(statearr_8076[(16)] \x3d inst_7995);\n\n(statearr_8076[(17)] \x3d inst_7996);\n\nreturn statearr_8076;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8009__$1,(28),c);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (16))){\nvar inst_7974 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nif(cljs.core.truth_(inst_7974)){\nvar statearr_8077_8392 \x3d state_8009__$1;\n(statearr_8077_8392[(1)] \x3d (20));\n\n} else {\nvar statearr_8078_8393 \x3d state_8009__$1;\n(statearr_8078_8393[(1)] \x3d (21));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (10))){\nvar inst_7919 \x3d (state_8009[(10)]);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8079_8394 \x3d state_8009__$1;\n(statearr_8079_8394[(2)] \x3d inst_7919);\n\n(statearr_8079_8394[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (18))){\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8080_8395 \x3d state_8009__$1;\n(statearr_8080_8395[(2)] \x3d false);\n\n(statearr_8080_8395[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8010 \x3d\x3d\x3d (8))){\nvar inst_7943 \x3d (state_8009[(2)]);\nvar state_8009__$1 \x3d state_8009;\nvar statearr_8082_8397 \x3d state_8009__$1;\n(statearr_8082_8397[(2)] \x3d inst_7943);\n\n(statearr_8082_8397[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8085 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_8085[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__);\n\n(statearr_8085[(1)] \x3d (1));\n\nreturn statearr_8085;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1 \x3d (function (state_8009){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8009);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8086){if((e8086 instanceof Object)){\nvar ex__7410__auto__ \x3d e8086;\nvar statearr_8087_8401 \x3d state_8009;\n(statearr_8087_8401[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8009);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8086;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8402 \x3d state_8009;\nstate_8009 \x3d G__8402;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__ \x3d function(state_8009){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1.call(this,state_8009);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8089 \x3d f__7472__auto__();\n(statearr_8089[(6)] \x3d c__7471__auto___8357);\n\nreturn statearr_8089;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\n\nreturn c;\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.work_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.work_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.worker_chan_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.worker_chan_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine._ !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine._ \x3d (function (){\nvar seq__8093_8411 \x3d cljs.core.seq(cljs.core.range.cljs$core$IFn$_invoke$arity$1((4)));\nvar chunk__8094_8412 \x3d null;\nvar count__8095_8413 \x3d (0);\nvar i__8096_8414 \x3d (0);\nwhile(true){\nif((i__8096_8414 \x3c count__8095_8413)){\nvar i_8421 \x3d chunk__8094_8412.cljs$core$IIndexed$_nth$arity$2(null,i__8096_8414);\nvar c__7471__auto___8428 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8428,i_8421){\nreturn (function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d ((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8428,i_8421){\nreturn (function (state_8124){\nvar state_val_8125 \x3d (state_8124[(1)]);\nif((state_val_8125 \x3d\x3d\x3d (1))){\nvar inst_8119 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_8120 \x3d chess.engine.worker_engine.load_worker(inst_8119,i_8421);\nvar state_8124__$1 \x3d state_8124;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8124__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_8120);\n} else {\nif((state_val_8125 \x3d\x3d\x3d (2))){\nvar inst_8122 \x3d (state_8124[(2)]);\nvar state_8124__$1 \x3d state_8124;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8124__$1,inst_8122);\n} else {\nreturn null;\n}\n}\n});})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8428,i_8421))\n;\nreturn ((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,switch__7406__auto__,c__7471__auto___8428,i_8421){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8126 \x3d [null,null,null,null,null,null,null];\n(statearr_8126[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8126[(1)] \x3d (1));\n\nreturn statearr_8126;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8124){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8124);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8127){if((e8127 instanceof Object)){\nvar ex__7410__auto__ \x3d e8127;\nvar statearr_8128_8438 \x3d state_8124;\n(statearr_8128_8438[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8124);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8127;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8440 \x3d state_8124;\nstate_8124 \x3d G__8440;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8124){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8124);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n;})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,switch__7406__auto__,c__7471__auto___8428,i_8421))\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8129 \x3d f__7472__auto__();\n(statearr_8129[(6)] \x3d c__7471__auto___8428);\n\nreturn statearr_8129;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n});})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8428,i_8421))\n);\n\n\n\nvar G__8441 \x3d seq__8093_8411;\nvar G__8442 \x3d chunk__8094_8412;\nvar G__8443 \x3d count__8095_8413;\nvar G__8444 \x3d (i__8096_8414 + (1));\nseq__8093_8411 \x3d G__8441;\nchunk__8094_8412 \x3d G__8442;\ncount__8095_8413 \x3d G__8443;\ni__8096_8414 \x3d G__8444;\ncontinue;\n} else {\nvar temp__5735__auto___8445 \x3d cljs.core.seq(seq__8093_8411);\nif(temp__5735__auto___8445){\nvar seq__8093_8446__$1 \x3d temp__5735__auto___8445;\nif(cljs.core.chunked_seq_QMARK_(seq__8093_8446__$1)){\nvar c__4609__auto___8448 \x3d cljs.core.chunk_first(seq__8093_8446__$1);\nvar G__8449 \x3d cljs.core.chunk_rest(seq__8093_8446__$1);\nvar G__8450 \x3d c__4609__auto___8448;\nvar G__8451 \x3d cljs.core.count(c__4609__auto___8448);\nvar G__8452 \x3d (0);\nseq__8093_8411 \x3d G__8449;\nchunk__8094_8412 \x3d G__8450;\ncount__8095_8413 \x3d G__8451;\ni__8096_8414 \x3d G__8452;\ncontinue;\n} else {\nvar i_8453 \x3d cljs.core.first(seq__8093_8446__$1);\nvar c__7471__auto___8454 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445){\nreturn (function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d ((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445){\nreturn (function (state_8135){\nvar state_val_8136 \x3d (state_8135[(1)]);\nif((state_val_8136 \x3d\x3d\x3d (1))){\nvar inst_8130 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_8131 \x3d chess.engine.worker_engine.load_worker(inst_8130,i_8453);\nvar state_8135__$1 \x3d state_8135;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8135__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_8131);\n} else {\nif((state_val_8136 \x3d\x3d\x3d (2))){\nvar inst_8133 \x3d (state_8135[(2)]);\nvar state_8135__$1 \x3d state_8135;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8135__$1,inst_8133);\n} else {\nreturn null;\n}\n}\n});})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445))\n;\nreturn ((function (seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,switch__7406__auto__,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8137 \x3d [null,null,null,null,null,null,null];\n(statearr_8137[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8137[(1)] \x3d (1));\n\nreturn statearr_8137;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8135){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8135);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8138){if((e8138 instanceof Object)){\nvar ex__7410__auto__ \x3d e8138;\nvar statearr_8139_8459 \x3d state_8135;\n(statearr_8139_8459[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8135);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8138;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8461 \x3d state_8135;\nstate_8135 \x3d G__8461;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8135){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8135);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n;})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,switch__7406__auto__,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445))\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8140 \x3d f__7472__auto__();\n(statearr_8140[(6)] \x3d c__7471__auto___8454);\n\nreturn statearr_8140;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n});})(seq__8093_8411,chunk__8094_8412,count__8095_8413,i__8096_8414,c__7471__auto___8454,i_8453,seq__8093_8446__$1,temp__5735__auto___8445))\n);\n\n\n\nvar G__8462 \x3d cljs.core.next(seq__8093_8446__$1);\nvar G__8463 \x3d null;\nvar G__8464 \x3d (0);\nvar G__8465 \x3d (0);\nseq__8093_8411 \x3d G__8462;\nchunk__8094_8412 \x3d G__8463;\ncount__8095_8413 \x3d G__8464;\ni__8096_8414 \x3d G__8465;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8208){\nvar state_val_8209 \x3d (state_8208[(1)]);\nif((state_val_8209 \x3d\x3d\x3d (7))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8210_8466 \x3d state_8208__$1;\n(statearr_8210_8466[(2)] \x3d false);\n\n(statearr_8210_8466[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (20))){\nvar inst_8187 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8211_8467 \x3d state_8208__$1;\n(statearr_8211_8467[(2)] \x3d inst_8187);\n\n(statearr_8211_8467[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (1))){\nvar state_8208__$1 \x3d state_8208;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8208__$1,(2),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (24))){\nvar inst_8201 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d (function (){var statearr_8212 \x3d state_8208;\n(statearr_8212[(7)] \x3d inst_8201);\n\nreturn statearr_8212;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8208__$1,(25),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (4))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8213_8469 \x3d state_8208__$1;\n(statearr_8213_8469[(2)] \x3d false);\n\n(statearr_8213_8469[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (15))){\nvar inst_8171 \x3d (state_8208[(8)]);\nvar inst_8179 \x3d inst_8171.cljs$lang$protocol_mask$partition0$;\nvar inst_8180 \x3d (inst_8179 \x26 (64));\nvar inst_8181 \x3d inst_8171.cljs$core$ISeq$;\nvar inst_8182 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_8181);\nvar inst_8183 \x3d ((inst_8180) || (inst_8182));\nvar state_8208__$1 \x3d state_8208;\nif(cljs.core.truth_(inst_8183)){\nvar statearr_8214_8470 \x3d state_8208__$1;\n(statearr_8214_8470[(1)] \x3d (18));\n\n} else {\nvar statearr_8215_8471 \x3d state_8208__$1;\n(statearr_8215_8471[(1)] \x3d (19));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (21))){\nvar inst_8171 \x3d (state_8208[(8)]);\nvar inst_8192 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_8171);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8216_8472 \x3d state_8208__$1;\n(statearr_8216_8472[(2)] \x3d inst_8192);\n\n(statearr_8216_8472[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (13))){\nvar inst_8171 \x3d (state_8208[(8)]);\nvar inst_8176 \x3d (inst_8171 \x3d\x3d null);\nvar inst_8177 \x3d cljs.core.not(inst_8176);\nvar state_8208__$1 \x3d state_8208;\nif(inst_8177){\nvar statearr_8217_8473 \x3d state_8208__$1;\n(statearr_8217_8473[(1)] \x3d (15));\n\n} else {\nvar statearr_8218_8474 \x3d state_8208__$1;\n(statearr_8218_8474[(1)] \x3d (16));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (22))){\nvar inst_8171 \x3d (state_8208[(8)]);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8219_8476 \x3d state_8208__$1;\n(statearr_8219_8476[(2)] \x3d inst_8171);\n\n(statearr_8219_8476[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (6))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8220_8478 \x3d state_8208__$1;\n(statearr_8220_8478[(2)] \x3d true);\n\n(statearr_8220_8478[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (25))){\nvar inst_8201 \x3d (state_8208[(7)]);\nvar inst_8203 \x3d (state_8208[(2)]);\nvar inst_8171 \x3d inst_8201;\nvar inst_8172 \x3d inst_8203;\nvar state_8208__$1 \x3d (function (){var statearr_8221 \x3d state_8208;\n(statearr_8221[(9)] \x3d inst_8172);\n\n(statearr_8221[(8)] \x3d inst_8171);\n\nreturn statearr_8221;\n})();\nvar statearr_8222_8479 \x3d state_8208__$1;\n(statearr_8222_8479[(2)] \x3d null);\n\n(statearr_8222_8479[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (17))){\nvar inst_8190 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d state_8208;\nif(cljs.core.truth_(inst_8190)){\nvar statearr_8223_8480 \x3d state_8208__$1;\n(statearr_8223_8480[(1)] \x3d (21));\n\n} else {\nvar statearr_8224_8481 \x3d state_8208__$1;\n(statearr_8224_8481[(1)] \x3d (22));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (3))){\nvar inst_8145 \x3d (state_8208[(10)]);\nvar inst_8150 \x3d inst_8145.cljs$lang$protocol_mask$partition0$;\nvar inst_8151 \x3d (inst_8150 \x26 (64));\nvar inst_8152 \x3d inst_8145.cljs$core$ISeq$;\nvar inst_8153 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_8152);\nvar inst_8154 \x3d ((inst_8151) || (inst_8153));\nvar state_8208__$1 \x3d state_8208;\nif(cljs.core.truth_(inst_8154)){\nvar statearr_8225_8482 \x3d state_8208__$1;\n(statearr_8225_8482[(1)] \x3d (6));\n\n} else {\nvar statearr_8226_8483 \x3d state_8208__$1;\n(statearr_8226_8483[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (12))){\nvar inst_8145 \x3d (state_8208[(10)]);\nvar inst_8170 \x3d (state_8208[(2)]);\nvar inst_8171 \x3d inst_8145;\nvar inst_8172 \x3d inst_8170;\nvar state_8208__$1 \x3d (function (){var statearr_8227 \x3d state_8208;\n(statearr_8227[(9)] \x3d inst_8172);\n\n(statearr_8227[(8)] \x3d inst_8171);\n\nreturn statearr_8227;\n})();\nvar statearr_8228_8484 \x3d state_8208__$1;\n(statearr_8228_8484[(2)] \x3d null);\n\n(statearr_8228_8484[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (2))){\nvar inst_8145 \x3d (state_8208[(10)]);\nvar inst_8145__$1 \x3d (state_8208[(2)]);\nvar inst_8147 \x3d (inst_8145__$1 \x3d\x3d null);\nvar inst_8148 \x3d cljs.core.not(inst_8147);\nvar state_8208__$1 \x3d (function (){var statearr_8229 \x3d state_8208;\n(statearr_8229[(10)] \x3d inst_8145__$1);\n\nreturn statearr_8229;\n})();\nif(inst_8148){\nvar statearr_8230_8485 \x3d state_8208__$1;\n(statearr_8230_8485[(1)] \x3d (3));\n\n} else {\nvar statearr_8231_8492 \x3d state_8208__$1;\n(statearr_8231_8492[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (23))){\nvar inst_8172 \x3d (state_8208[(9)]);\nvar inst_8195 \x3d (state_8208[(2)]);\nvar inst_8196 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_8195,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_8197 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_8195,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_8198 \x3d (chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2 ? chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2(inst_8172,inst_8197) : chess.engine.worker_engine.submit_command.call(null,inst_8172,inst_8197));\nvar inst_8199 \x3d cljs.core.async.pipe.cljs$core$IFn$_invoke$arity$2(inst_8198,inst_8196);\nvar state_8208__$1 \x3d (function (){var statearr_8232 \x3d state_8208;\n(statearr_8232[(11)] \x3d inst_8199);\n\nreturn statearr_8232;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8208__$1,(24),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (19))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8233_8494 \x3d state_8208__$1;\n(statearr_8233_8494[(2)] \x3d false);\n\n(statearr_8233_8494[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (11))){\nvar inst_8166 \x3d (state_8208[(2)]);\nvar inst_8167 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_8166,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_8168 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_8166,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar state_8208__$1 \x3d (function (){var statearr_8234 \x3d state_8208;\n(statearr_8234[(12)] \x3d inst_8167);\n\n(statearr_8234[(13)] \x3d inst_8168);\n\nreturn statearr_8234;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8208__$1,(12),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (9))){\nvar inst_8145 \x3d (state_8208[(10)]);\nvar inst_8163 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_8145);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8235_8496 \x3d state_8208__$1;\n(statearr_8235_8496[(2)] \x3d inst_8163);\n\n(statearr_8235_8496[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (5))){\nvar inst_8161 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d state_8208;\nif(cljs.core.truth_(inst_8161)){\nvar statearr_8236_8497 \x3d state_8208__$1;\n(statearr_8236_8497[(1)] \x3d (9));\n\n} else {\nvar statearr_8237_8498 \x3d state_8208__$1;\n(statearr_8237_8498[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (14))){\nvar inst_8206 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d state_8208;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8208__$1,inst_8206);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (16))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8238_8499 \x3d state_8208__$1;\n(statearr_8238_8499[(2)] \x3d false);\n\n(statearr_8238_8499[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (10))){\nvar inst_8145 \x3d (state_8208[(10)]);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8239_8500 \x3d state_8208__$1;\n(statearr_8239_8500[(2)] \x3d inst_8145);\n\n(statearr_8239_8500[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (18))){\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8240_8501 \x3d state_8208__$1;\n(statearr_8240_8501[(2)] \x3d true);\n\n(statearr_8240_8501[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_8209 \x3d\x3d\x3d (8))){\nvar inst_8158 \x3d (state_8208[(2)]);\nvar state_8208__$1 \x3d state_8208;\nvar statearr_8241_8502 \x3d state_8208__$1;\n(statearr_8241_8502[(2)] \x3d inst_8158);\n\n(statearr_8241_8502[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8242 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_8242[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8242[(1)] \x3d (1));\n\nreturn statearr_8242;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8208){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8208);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8243){if((e8243 instanceof Object)){\nvar ex__7410__auto__ \x3d e8243;\nvar statearr_8244_8503 \x3d state_8208;\n(statearr_8244_8503[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8208);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8243;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8504 \x3d state_8208;\nstate_8208 \x3d G__8504;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8208){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8208);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8245 \x3d f__7472__auto__();\n(statearr_8245[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8245;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n})()\n;\n}\nchess.engine.worker_engine.submit_command \x3d (function chess$engine$worker_engine$submit_command(worker_chan,form){\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8257){\nvar state_val_8258 \x3d (state_8257[(1)]);\nif((state_val_8258 \x3d\x3d\x3d (1))){\nvar inst_8246 \x3d (state_8257[(7)]);\nvar inst_8246__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_8247 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_8248 \x3d [inst_8246__$1,form];\nvar inst_8249 \x3d cljs.core.PersistentHashMap.fromArrays(inst_8247,inst_8248);\nvar state_8257__$1 \x3d (function (){var statearr_8259 \x3d state_8257;\n(statearr_8259[(7)] \x3d inst_8246__$1);\n\nreturn statearr_8259;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8257__$1,(2),worker_chan,inst_8249);\n} else {\nif((state_val_8258 \x3d\x3d\x3d (2))){\nvar inst_8246 \x3d (state_8257[(7)]);\nvar inst_8251 \x3d (state_8257[(2)]);\nvar state_8257__$1 \x3d (function (){var statearr_8260 \x3d state_8257;\n(statearr_8260[(8)] \x3d inst_8251);\n\nreturn statearr_8260;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8257__$1,(3),inst_8246);\n} else {\nif((state_val_8258 \x3d\x3d\x3d (3))){\nvar inst_8253 \x3d (state_8257[(2)]);\nvar state_8257__$1 \x3d (function (){var statearr_8261 \x3d state_8257;\n(statearr_8261[(9)] \x3d inst_8253);\n\nreturn statearr_8261;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8257__$1,(4),chess.engine.worker_engine.worker_chan_chan,worker_chan);\n} else {\nif((state_val_8258 \x3d\x3d\x3d (4))){\nvar inst_8253 \x3d (state_8257[(9)]);\nvar inst_8255 \x3d (state_8257[(2)]);\nvar state_8257__$1 \x3d (function (){var statearr_8262 \x3d state_8257;\n(statearr_8262[(10)] \x3d inst_8255);\n\nreturn statearr_8262;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8257__$1,inst_8253);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$submit_command_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8263 \x3d [null,null,null,null,null,null,null,null,null,null,null];\n(statearr_8263[(0)] \x3d chess$engine$worker_engine$submit_command_$_state_machine__7407__auto__);\n\n(statearr_8263[(1)] \x3d (1));\n\nreturn statearr_8263;\n});\nvar chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____1 \x3d (function (state_8257){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8257);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8264){if((e8264 instanceof Object)){\nvar ex__7410__auto__ \x3d e8264;\nvar statearr_8265_8505 \x3d state_8257;\n(statearr_8265_8505[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8257);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8264;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8506 \x3d state_8257;\nstate_8257 \x3d G__8506;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$submit_command_$_state_machine__7407__auto__ \x3d function(state_8257){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____1.call(this,state_8257);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$submit_command_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____0;\nchess$engine$worker_engine$submit_command_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$submit_command_$_state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$submit_command_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8266 \x3d f__7472__auto__();\n(statearr_8266[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8266;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n});\nchess.engine.worker_engine.printl \x3d (function chess$engine$worker_engine$printl(var_args){\nvar args__4795__auto__ \x3d [];\nvar len__4789__auto___8507 \x3d arguments.length;\nvar i__4790__auto___8508 \x3d (0);\nwhile(true){\nif((i__4790__auto___8508 \x3c len__4789__auto___8507)){\nargs__4795__auto__.push((arguments[i__4790__auto___8508]));\n\nvar G__8509 \x3d (i__4790__auto___8508 + (1));\ni__4790__auto___8508 \x3d G__8509;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4796__auto__ \x3d ((((0) \x3c args__4795__auto__.length))?(new cljs.core.IndexedSeq(args__4795__auto__.slice((0)),(0),null)):null);\nreturn chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(argseq__4796__auto__);\n});\n\n(chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic \x3d (function (x){\nchess.utils.screen_print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22printl: \x22,x], 0));\n\nreturn cljs.core.last(x);\n}));\n\n(chess.engine.worker_engine.printl.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.engine.worker_engine.printl.cljs$lang$applyTo \x3d (function (seq8267){\nvar self__4777__auto__ \x3d this;\nreturn self__4777__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq8267));\n}));\n\nchess.engine.worker_engine.dispatch \x3d (function chess$engine$worker_engine$dispatch(literal){\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8277){\nvar state_val_8278 \x3d (state_8277[(1)]);\nif((state_val_8278 \x3d\x3d\x3d (1))){\nvar inst_8268 \x3d (state_8277[(7)]);\nvar inst_8268__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_8269 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_8270 \x3d [inst_8268__$1,literal];\nvar inst_8271 \x3d cljs.core.PersistentHashMap.fromArrays(inst_8269,inst_8270);\nvar state_8277__$1 \x3d (function (){var statearr_8279 \x3d state_8277;\n(statearr_8279[(7)] \x3d inst_8268__$1);\n\nreturn statearr_8279;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_8277__$1,(2),chess.engine.worker_engine.work_chan,inst_8271);\n} else {\nif((state_val_8278 \x3d\x3d\x3d (2))){\nvar inst_8268 \x3d (state_8277[(7)]);\nvar inst_8273 \x3d (state_8277[(2)]);\nvar state_8277__$1 \x3d (function (){var statearr_8280 \x3d state_8277;\n(statearr_8280[(8)] \x3d inst_8273);\n\nreturn statearr_8280;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8277__$1,(3),inst_8268);\n} else {\nif((state_val_8278 \x3d\x3d\x3d (3))){\nvar inst_8275 \x3d (state_8277[(2)]);\nvar state_8277__$1 \x3d state_8277;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8277__$1,inst_8275);\n} else {\nreturn null;\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$dispatch_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8281 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_8281[(0)] \x3d chess$engine$worker_engine$dispatch_$_state_machine__7407__auto__);\n\n(statearr_8281[(1)] \x3d (1));\n\nreturn statearr_8281;\n});\nvar chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____1 \x3d (function (state_8277){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8277);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8282){if((e8282 instanceof Object)){\nvar ex__7410__auto__ \x3d e8282;\nvar statearr_8283_8510 \x3d state_8277;\n(statearr_8283_8510[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8277);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8282;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8511 \x3d state_8277;\nstate_8277 \x3d G__8511;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$dispatch_$_state_machine__7407__auto__ \x3d function(state_8277){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____1.call(this,state_8277);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$dispatch_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____0;\nchess$engine$worker_engine$dispatch_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$dispatch_$_state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$dispatch_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8284 \x3d f__7472__auto__();\n(statearr_8284[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8284;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n});\nchess.engine.worker_engine.worker_engine \x3d (function (){\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.t_chess$engine$worker_engine8285 !\x3d\x3d \x27undefined\x27)){\n} else {\n\n/**\n* @constructor\n * @implements {cljs.core.IMeta}\n * @implements {chess.engine.core.Engine}\n * @implements {cljs.core.IWithMeta}\n*/\nchess.engine.worker_engine.t_chess$engine$worker_engine8285 \x3d (function (meta8286){\nthis.meta8286 \x3d meta8286;\nthis.cljs$lang$protocol_mask$partition0$ \x3d 393216;\nthis.cljs$lang$protocol_mask$partition1$ \x3d 0;\n});\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.cljs$core$IWithMeta$_with_meta$arity$2 \x3d (function (_8287,meta8286__$1){\nvar self__ \x3d this;\nvar _8287__$1 \x3d this;\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine8285(meta8286__$1));\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.cljs$core$IMeta$_meta$arity$1 \x3d (function (_8287){\nvar self__ \x3d this;\nvar _8287__$1 \x3d this;\nreturn self__.meta8286;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.chess$engine$core$Engine$ \x3d cljs.core.PROTOCOL_SENTINEL);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.chess$engine$core$Engine$apply_move$arity$3 \x3d (function (_,board,move){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8298){\nvar state_val_8299 \x3d (state_8298[(1)]);\nif((state_val_8299 \x3d\x3d\x3d (1))){\nvar inst_8289 \x3d (function (){return (function (form8288){\nif((((form8288 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8288,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),board);\n} else {\nif((((form8288 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8288,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),move);\n} else {\nreturn form8288;\n\n}\n}\n});\n})();\nvar inst_8290 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)));\nvar inst_8291 \x3d clojure.walk.postwalk(inst_8289,inst_8290);\nvar inst_8292 \x3d chess.engine.worker_engine.dispatch(inst_8291);\nvar state_8298__$1 \x3d state_8298;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8298__$1,(2),inst_8292);\n} else {\nif((state_val_8299 \x3d\x3d\x3d (2))){\nvar inst_8294 \x3d (state_8298[(2)]);\nvar inst_8295 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_8294);\nvar inst_8296 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_8295], 0));\nvar state_8298__$1 \x3d state_8298;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8298__$1,inst_8296);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8300 \x3d [null,null,null,null,null,null,null];\n(statearr_8300[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8300[(1)] \x3d (1));\n\nreturn statearr_8300;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8298){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8298);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8301){if((e8301 instanceof Object)){\nvar ex__7410__auto__ \x3d e8301;\nvar statearr_8302_8512 \x3d state_8298;\n(statearr_8302_8512[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8298);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8301;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8513 \x3d state_8298;\nstate_8298 \x3d G__8513;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8298){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8298);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8303 \x3d f__7472__auto__();\n(statearr_8303[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8303;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.chess$engine$core$Engine$possible_moves$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8314){\nvar state_val_8315 \x3d (state_8314[(1)]);\nif((state_val_8315 \x3d\x3d\x3d (1))){\nvar inst_8305 \x3d (function (){return (function (form8304){\nif((((form8304 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8304,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),board);\n} else {\nif((((form8304 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8304,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),color);\n} else {\nreturn form8304;\n\n}\n}\n});\n})();\nvar inst_8306 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)));\nvar inst_8307 \x3d clojure.walk.postwalk(inst_8305,inst_8306);\nvar inst_8308 \x3d chess.engine.worker_engine.dispatch(inst_8307);\nvar state_8314__$1 \x3d state_8314;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8314__$1,(2),inst_8308);\n} else {\nif((state_val_8315 \x3d\x3d\x3d (2))){\nvar inst_8310 \x3d (state_8314[(2)]);\nvar inst_8311 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_8310);\nvar inst_8312 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_8311], 0));\nvar state_8314__$1 \x3d state_8314;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8314__$1,inst_8312);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8316 \x3d [null,null,null,null,null,null,null];\n(statearr_8316[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8316[(1)] \x3d (1));\n\nreturn statearr_8316;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8314){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8314);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8317){if((e8317 instanceof Object)){\nvar ex__7410__auto__ \x3d e8317;\nvar statearr_8318_8514 \x3d state_8314;\n(statearr_8318_8514[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8314);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8317;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8515 \x3d state_8314;\nstate_8314 \x3d G__8515;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8314){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8314);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8319 \x3d f__7472__auto__();\n(statearr_8319[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8319;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.prototype.chess$engine$core$Engine$best_move$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8333){\nvar state_val_8334 \x3d (state_8333[(1)]);\nif((state_val_8334 \x3d\x3d\x3d (1))){\nvar inst_8320 \x3d (function (){return (function (a,b){\nreturn cljs.core.cons(b,a);\n});\n})();\nvar inst_8321 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_8322 \x3d (function (){return (function (move){\nvar c__7471__auto____$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8345){\nvar state_val_8346 \x3d (state_8345[(1)]);\nif((state_val_8346 \x3d\x3d\x3d (1))){\nvar inst_8336 \x3d (function (){return (function (form8335){\nif((((form8335 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8335,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),board);\n} else {\nif((((form8335 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form8335,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__6103__6104__auto__){\nif(cljs.core.seq_QMARK_(p1__6103__6104__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__6103__6104__auto__);\n} else {\nreturn p1__6103__6104__auto__;\n}\n}),move);\n} else {\nreturn form8335;\n\n}\n}\n});\n})();\nvar inst_8337 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null)], null)], null))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),cljs.core.list(new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),(2))], null));\nvar inst_8338 \x3d clojure.walk.postwalk(inst_8336,inst_8337);\nvar inst_8339 \x3d chess.engine.worker_engine.dispatch(inst_8338);\nvar state_8345__$1 \x3d state_8345;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8345__$1,(2),inst_8339);\n} else {\nif((state_val_8346 \x3d\x3d\x3d (2))){\nvar inst_8341 \x3d (state_8345[(2)]);\nvar inst_8342 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_8341);\nvar inst_8343 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_8342], 0));\nvar state_8345__$1 \x3d state_8345;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8345__$1,inst_8343);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8347 \x3d [null,null,null,null,null,null,null];\n(statearr_8347[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8347[(1)] \x3d (1));\n\nreturn statearr_8347;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8345){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8345);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8348){if((e8348 instanceof Object)){\nvar ex__7410__auto__ \x3d e8348;\nvar statearr_8349_8516 \x3d state_8345;\n(statearr_8349_8516[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8345);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8348;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8517 \x3d state_8345;\nstate_8345 \x3d G__8517;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8345){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8345);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8350 \x3d f__7472__auto__();\n(statearr_8350[(6)] \x3d c__7471__auto____$1);\n\nreturn statearr_8350;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto____$1;\n});\n})();\nvar inst_8323 \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,board,color);\nvar inst_8324 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_8322,inst_8323);\nvar inst_8325 \x3d cljs.core.async.merge.cljs$core$IFn$_invoke$arity$1(inst_8324);\nvar inst_8326 \x3d cljs.core.async.reduce(inst_8320,inst_8321,inst_8325);\nvar state_8333__$1 \x3d state_8333;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8333__$1,(2),inst_8326);\n} else {\nif((state_val_8334 \x3d\x3d\x3d (2))){\nvar inst_8328 \x3d (state_8333[(2)]);\nvar inst_8329 \x3d chess.utils.maxf(cljs.core.second,inst_8328);\nvar inst_8330 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22final result\x22,inst_8329], 0));\nvar inst_8331 \x3d cljs.core.first(inst_8330);\nvar state_8333__$1 \x3d state_8333;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8333__$1,inst_8331);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__7407__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8351 \x3d [null,null,null,null,null,null,null];\n(statearr_8351[(0)] \x3d chess$engine$worker_engine$state_machine__7407__auto__);\n\n(statearr_8351[(1)] \x3d (1));\n\nreturn statearr_8351;\n});\nvar chess$engine$worker_engine$state_machine__7407__auto____1 \x3d (function (state_8333){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8333);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8352){if((e8352 instanceof Object)){\nvar ex__7410__auto__ \x3d e8352;\nvar statearr_8353_8518 \x3d state_8333;\n(statearr_8353_8518[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8333);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8352;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8519 \x3d state_8333;\nstate_8333 \x3d G__8519;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__7407__auto__ \x3d function(state_8333){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__7407__auto____1.call(this,state_8333);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__7407__auto____0;\nchess$engine$worker_engine$state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__7407__auto____1;\nreturn chess$engine$worker_engine$state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8354 \x3d f__7472__auto__();\n(statearr_8354[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8354;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.getBasis \x3d (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22meta8286\x22,\x22meta8286\x22,1239399396,null)], null);\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.cljs$lang$type \x3d true);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.cljs$lang$ctorStr \x3d \x22chess.engine.worker-engine/t_chess$engine$worker_engine8285\x22);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine8285.cljs$lang$ctorPrWriter \x3d (function (this__4428__auto__,writer__4429__auto__,opt__4430__auto__){\nreturn cljs.core._write(writer__4429__auto__,\x22chess.engine.worker-engine/t_chess$engine$worker_engine8285\x22);\n}));\n\n/**\n * Positional factory function for chess.engine.worker-engine/t_chess$engine$worker_engine8285.\n */\nchess.engine.worker_engine.__GT_t_chess$engine$worker_engine8285 \x3d (function chess$engine$worker_engine$__GT_t_chess$engine$worker_engine8285(meta8286){\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine8285(meta8286));\n});\n\n}\n\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine8285(cljs.core.PersistentArrayMap.EMPTY));\n})()\n;\n");
SHADOW_ENV.evalLoad("chess.engine.hook.js", true , "goog.provide(\x27chess.engine.hook\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.engine.core\x27);\ngoog.require(\x27chess.engine.local_engine\x27);\ngoog.require(\x27chess.engine.worker_engine\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27cljs.core.async\x27);\nchess.engine.hook.use_engine \x3d (function chess$engine$hook$use_engine(my_color){\n\nvar color \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(my_color);\nvar board \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.core.init_board);\nvar moves \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,chess.engine.core.init_board,my_color));\nreturn (function (vdom_state){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.deref(board),cljs.core.deref(moves),(function (move){\nvar my_board \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$apply_move$arity$3(null,cljs.core.deref(board),move);\ncljs.core.reset_BANG_(color,chess.engine.core.other_color(my_color));\n\ncljs.core.reset_BANG_(board,my_board);\n\ncljs.core.reset_BANG_(moves,cljs.core.PersistentVector.EMPTY);\n\nhtml_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\n\ncljs.core.prn.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22\x22], 0));\n\nreturn setTimeout((function (){\ncljs.core.reset_BANG_(board,chess.engine.local_engine.local_engine.chess$engine$core$Engine$apply_move$arity$3(null,my_board,chess.engine.local_engine.local_engine.chess$engine$core$Engine$best_move$arity$3(null,my_board,chess.engine.core.other_color(my_color))));\n\ncljs.core.reset_BANG_(moves,chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,cljs.core.deref(board),my_color));\n\ncljs.core.reset_BANG_(color,my_color);\n\nreturn html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\n}),(100));\n})], null);\n});\n});\nchess.engine.hook.use_async_engine \x3d (function chess$engine$hook$use_async_engine(my_color){\n\nvar color \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(my_color);\nvar board \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.core.init_board);\nvar moves \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentVector.EMPTY);\nvar initial \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(true);\nreturn (function (vdom_state){\nif(cljs.core.truth_(cljs.core.deref(initial))){\nvar c__7471__auto___8468 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8390){\nvar state_val_8391 \x3d (state_8390[(1)]);\nif((state_val_8391 \x3d\x3d\x3d (1))){\nvar inst_8383 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,chess.engine.core.init_board,my_color);\nvar state_8390__$1 \x3d state_8390;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8390__$1,(2),inst_8383);\n} else {\nif((state_val_8391 \x3d\x3d\x3d (2))){\nvar inst_8385 \x3d (state_8390[(2)]);\nvar inst_8386 \x3d cljs.core.reset_BANG_(moves,inst_8385);\nvar inst_8387 \x3d cljs.core.reset_BANG_(initial,false);\nvar inst_8388 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar state_8390__$1 \x3d (function (){var statearr_8396 \x3d state_8390;\n(statearr_8396[(7)] \x3d inst_8387);\n\n(statearr_8396[(8)] \x3d inst_8386);\n\nreturn statearr_8396;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8390__$1,inst_8388);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8398 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_8398[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto__);\n\n(statearr_8398[(1)] \x3d (1));\n\nreturn statearr_8398;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1 \x3d (function (state_8390){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8390);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8399){if((e8399 instanceof Object)){\nvar ex__7410__auto__ \x3d e8399;\nvar statearr_8400_8475 \x3d state_8390;\n(statearr_8400_8475[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8390);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8399;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8477 \x3d state_8390;\nstate_8390 \x3d G__8477;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__ \x3d function(state_8390){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1.call(this,state_8390);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8403 \x3d f__7472__auto__();\n(statearr_8403[(6)] \x3d c__7471__auto___8468);\n\nreturn statearr_8403;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\n} else {\n}\n\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.deref(board),cljs.core.deref(moves),(function (move){\nvar c__7471__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__7472__auto__ \x3d (function (){var switch__7406__auto__ \x3d (function (state_8436){\nvar state_val_8437 \x3d (state_8436[(1)]);\nif((state_val_8437 \x3d\x3d\x3d (1))){\nvar inst_8404 \x3d cljs.core.deref(board);\nvar inst_8405 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_8404,move);\nvar state_8436__$1 \x3d state_8436;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8436__$1,(2),inst_8405);\n} else {\nif((state_val_8437 \x3d\x3d\x3d (2))){\nvar inst_8407 \x3d (state_8436[(7)]);\nvar inst_8407__$1 \x3d (state_8436[(2)]);\nvar inst_8408 \x3d chess.engine.core.other_color(my_color);\nvar inst_8409 \x3d cljs.core.reset_BANG_(color,inst_8408);\nvar inst_8410 \x3d cljs.core.reset_BANG_(board,inst_8407__$1);\nvar inst_8415 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_8416 \x3d cljs.core.reset_BANG_(moves,inst_8415);\nvar inst_8417 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar inst_8418 \x3d chess.engine.core.other_color(my_color);\nvar inst_8419 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$best_move$arity$3(null,inst_8407__$1,inst_8418);\nvar state_8436__$1 \x3d (function (){var statearr_8439 \x3d state_8436;\n(statearr_8439[(8)] \x3d inst_8409);\n\n(statearr_8439[(9)] \x3d inst_8410);\n\n(statearr_8439[(10)] \x3d inst_8417);\n\n(statearr_8439[(7)] \x3d inst_8407__$1);\n\n(statearr_8439[(11)] \x3d inst_8416);\n\nreturn statearr_8439;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8436__$1,(4),inst_8419);\n} else {\nif((state_val_8437 \x3d\x3d\x3d (3))){\nvar inst_8425 \x3d (state_8436[(2)]);\nvar inst_8426 \x3d cljs.core.reset_BANG_(board,inst_8425);\nvar inst_8427 \x3d cljs.core.deref(board);\nvar inst_8429 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_8427,my_color);\nvar state_8436__$1 \x3d (function (){var statearr_8447 \x3d state_8436;\n(statearr_8447[(12)] \x3d inst_8426);\n\nreturn statearr_8447;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8436__$1,(5),inst_8429);\n} else {\nif((state_val_8437 \x3d\x3d\x3d (4))){\nvar inst_8407 \x3d (state_8436[(7)]);\nvar inst_8422 \x3d (state_8436[(2)]);\nvar inst_8423 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_8407,inst_8422);\nvar state_8436__$1 \x3d state_8436;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_8436__$1,(3),inst_8423);\n} else {\nif((state_val_8437 \x3d\x3d\x3d (5))){\nvar inst_8431 \x3d (state_8436[(2)]);\nvar inst_8432 \x3d cljs.core.reset_BANG_(moves,inst_8431);\nvar inst_8433 \x3d cljs.core.reset_BANG_(color,my_color);\nvar inst_8434 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar state_8436__$1 \x3d (function (){var statearr_8455 \x3d state_8436;\n(statearr_8455[(13)] \x3d inst_8433);\n\n(statearr_8455[(14)] \x3d inst_8432);\n\nreturn statearr_8455;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_8436__$1,inst_8434);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0 \x3d (function (){\nvar statearr_8456 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_8456[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto__);\n\n(statearr_8456[(1)] \x3d (1));\n\nreturn statearr_8456;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1 \x3d (function (state_8436){\nwhile(true){\nvar ret_value__7408__auto__ \x3d (function (){try{while(true){\nvar result__7409__auto__ \x3d switch__7406__auto__(state_8436);\nif(cljs.core.keyword_identical_QMARK_(result__7409__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__7409__auto__;\n}\nbreak;\n}\n}catch (e8457){if((e8457 instanceof Object)){\nvar ex__7410__auto__ \x3d e8457;\nvar statearr_8458_8493 \x3d state_8436;\n(statearr_8458_8493[(5)] \x3d ex__7410__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_8436);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e8457;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__7408__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__8495 \x3d state_8436;\nstate_8436 \x3d G__8495;\ncontinue;\n} else {\nreturn ret_value__7408__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__ \x3d function(state_8436){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1.call(this,state_8436);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__7407__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__7407__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__7407__auto__;\n})()\n})();\nvar state__7473__auto__ \x3d (function (){var statearr_8460 \x3d f__7472__auto__();\n(statearr_8460[(6)] \x3d c__7471__auto__);\n\nreturn statearr_8460;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__7473__auto__);\n}));\n\nreturn c__7471__auto__;\n})], null);\n});\n});\n");
SHADOW_ENV.evalLoad("chess.core.js", true , "goog.provide(\x27chess.core\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.components.board\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27chess.utils\x27);\ngoog.require(\x27chess.engine.hook\x27);\nchess.core.root \x3d document.getElementById(\x22app\x22);\nchess.core.set_app \x3d (function chess$core$set_app(){\nreturn html_cljs.html.mount(chess.core.root,(function (vdom_state__6056__auto__){\nvar hook_instances__6057__auto__ \x3d new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [chess.engine.hook.use_async_engine(new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618))], null);\nreturn (function (){\nvar vec__8486 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__6058__6059__auto__){\nreturn (p1__6058__6059__auto__.cljs$core$IFn$_invoke$arity$1 ? p1__6058__6059__auto__.cljs$core$IFn$_invoke$arity$1(vdom_state__6056__auto__) : p1__6058__6059__auto__.call(null,vdom_state__6056__auto__));\n}),hook_instances__6057__auto__);\nvar vec__8489 \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8486,(0),null);\nvar board_data \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8489,(0),null);\nvar moves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8489,(1),null);\nvar on_move \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8489,(2),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22width\x22,\x22100%\x22,\x22height\x22,\x22100%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),board_data,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),moves,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),on_move], 0))], null)));\n});\n}));\n});\nchess.core.init \x3d (function chess$core$init(){\nreturn chess.core.set_app();\n});\ngoog.exportSymbol(\x27chess.core.init\x27, chess.core.init);\n");
SHADOW_ENV.evalLoad("shadow.module.main.append.js", false , "\nchess.core.init();;\nSHADOW_ENV.setLoaded(\x22chess.components.square.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.components.board.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.worker_engine.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.hook.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.core.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.main.append.js\x22);\nshadow.cljs.bootstrap.env.set_loaded([\x22chess.components.board\x22,\x22chess.engine.worker-engine\x22,\x22shadow.module.main.append\x22,\x22chess.components.square\x22,\x22chess.engine.hook\x22,\x22chess.core\x22]);\n");