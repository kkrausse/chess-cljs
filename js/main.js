SHADOW_ENV.evalLoad("chess.components.board.js", true , "goog.provide(\x27chess.components.board\x27);\n\nchess.components.board.find_move \x3d (function chess$components$board$find_move(moves,move){\nvar vec__8665 \x3d move;\nvar mfrom \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8665,(0),null);\nvar mto \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8665,(1),null);\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p__8669){\nvar vec__8671 \x3d p__8669;\nvar from \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8671,(0),null);\nvar to \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8671,(1),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(from,mfrom)){\nif((mto \x3d\x3d null)){\nreturn true;\n} else {\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(to,mto);\n}\n} else {\nreturn false;\n}\n}),moves);\n});\nchess.components.board.uiify \x3d (function chess$components$board$uiify(sq,i,j,state,set_state,moves,on_move){\nvar vec__8690 \x3d chess.components.board.find_move(moves,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null)], null));\nvar move_here \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8690,(0),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(sq,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.mod((j + cljs.core.mod(i,(2))),(2)),(0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543),(function (){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22clicked the thing!\x22,(move_here \x3d\x3d null)], 0));\n\nif((move_here \x3d\x3d null)){\nvar G__8702 \x3d (function (p1__8681_SHARP_){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(p1__8681_SHARP_,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null));\n});\nreturn (set_state.cljs$core$IFn$_invoke$arity$1 ? set_state.cljs$core$IFn$_invoke$arity$1(G__8702) : set_state.call(null,G__8702));\n} else {\nreturn (on_move.cljs$core$IFn$_invoke$arity$1 ? on_move.cljs$core$IFn$_invoke$arity$1(move_here) : on_move.call(null,move_here));\n}\n}),new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653),(!((move_here \x3d\x3d null))),new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null),(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)))),new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : sq.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))),(function (p1__8687_SHARP_){\nreturn cljs.core.name(p1__8687_SHARP_);\n})),new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : sq.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173))),(function (p1__8688_SHARP_){\nreturn cljs.core.name(p1__8688_SHARP_);\n}))], 0));\n});\n/**\n * {:board - a 2d array containing the board. Always white on bottom, not matter\n *          who the player is\n *  :player - \x27white\x27 or \x27black\x27 - will flip the board if black}\n */\nchess.components.board.board \x3d (function chess$components$board$board(clc__7133__auto__){\nvar hooked_use_state8713 \x3d html_cljs.hooks.use_state(clc__7133__auto__);\nreturn (function() { \nvar G__8914__delegate \x3d function (p__8721){\nvar map__8722 \x3d p__8721;\nvar map__8722__$1 \x3d (((((!((map__8722 \x3d\x3d null))))?(((((map__8722.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__8722.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__8722):map__8722);\nvar board \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8722__$1,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633));\nvar player \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8722__$1,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400));\nvar moves \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8722__$1,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255));\nvar on_move \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8722__$1,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710));\nvar vec__8762 \x3d hooked_use_state8713(new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),null], null));\nvar state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8762,(0),null);\nvar set_state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8762,(1),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),(function (){var board_size \x3d (0.8 * (function (){var x__4217__auto__ \x3d window.innerWidth;\nvar y__4218__auto__ \x3d window.innerHeight;\nreturn ((x__4217__auto__ \x3c y__4218__auto__) ? x__4217__auto__ : y__4218__auto__);\n})());\nreturn new cljs.core.PersistentArrayMap(null, 4, [\x22width\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22height\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22display\x22,\x22inline-block\x22,\x22margin\x22,\x225px\x22], null);\n})()], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8776){\nvar vec__8777 \x3d p__8776;\nvar seq__8778 \x3d cljs.core.seq(vec__8777);\nvar first__8779 \x3d cljs.core.first(seq__8778);\nvar seq__8778__$1 \x3d cljs.core.next(seq__8778);\nvar c__7153__auto__ \x3d first__8779;\nvar _ \x3d seq__8778__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_$_iter__8785(s__8786){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8786__$1 \x3d s__8786;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8786__$1);\nif(temp__5735__auto__){\nvar s__8786__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8786__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8786__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8788 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8787 \x3d (0);\nwhile(true){\nif((i__8787 \x3c size__4528__auto__)){\nvar vec__8794 \x3d cljs.core._nth(c__4527__auto__,i__8787);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8794,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8794,(1),null);\ncljs.core.chunk_append(b__8788,(new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)));\n\nvar G__8934 \x3d (i__8787 + (1));\ni__8787 \x3d G__8934;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8788),chess$components$board$board_$_iter__8785(cljs.core.chunk_rest(s__8786__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8788),null);\n}\n} else {\nvar vec__8797 \x3d cljs.core.first(s__8786__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8797,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8797,(1),null);\nreturn cljs.core.cons((new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),chess$components$board$board_$_iter__8785(cljs.core.rest(s__8786__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_$_iter__8800(s__8801){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8801__$1 \x3d s__8801;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8801__$1);\nif(temp__5735__auto__){\nvar s__8801__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8801__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8801__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8803 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8802 \x3d (0);\nwhile(true){\nif((i__8802 \x3c size__4528__auto__)){\nvar vec__8804 \x3d cljs.core._nth(c__4527__auto__,i__8802);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8804,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8804,(1),null);\ncljs.core.chunk_append(b__8803,(new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)));\n\nvar G__8948 \x3d (i__8802 + (1));\ni__8802 \x3d G__8948;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8803),chess$components$board$board_$_iter__8800(cljs.core.chunk_rest(s__8801__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8803),null);\n}\n} else {\nvar vec__8807 \x3d cljs.core.first(s__8801__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8807,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8807,(1),null);\nreturn cljs.core.cons((new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),chess$components$board$board_$_iter__8800(cljs.core.rest(s__8801__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()))));\n};\nvar G__8914 \x3d function (var_args){\nvar p__8721 \x3d null;\nif (arguments.length \x3e 0) {\nvar G__8960__i \x3d 0, G__8960__a \x3d new Array(arguments.length -  0);\nwhile (G__8960__i \x3c G__8960__a.length) {G__8960__a[G__8960__i] \x3d arguments[G__8960__i + 0]; ++G__8960__i;}\n  p__8721 \x3d new cljs.core.IndexedSeq(G__8960__a,0,null);\n} \nreturn G__8914__delegate.call(this,p__8721);};\nG__8914.cljs$lang$maxFixedArity \x3d 0;\nG__8914.cljs$lang$applyTo \x3d (function (arglist__8962){\nvar p__8721 \x3d cljs.core.seq(arglist__8962);\nreturn G__8914__delegate(p__8721);\n});\nG__8914.cljs$core$IFn$_invoke$arity$variadic \x3d G__8914__delegate;\nreturn G__8914;\n})()\n;\n});\nchess.components.board.board_row \x3d (function chess$components$board$board_row(clc__7133__auto__){\nreturn (function (row,i,state,set_state,moves,on_move){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8810){\nvar vec__8811 \x3d p__8810;\nvar seq__8812 \x3d cljs.core.seq(vec__8811);\nvar first__8813 \x3d cljs.core.first(seq__8812);\nvar seq__8812__$1 \x3d cljs.core.next(seq__8812);\nvar c__7153__auto__ \x3d first__8813;\nvar _ \x3d seq__8812__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_row_$_iter__8814(s__8815){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8815__$1 \x3d s__8815;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8815__$1);\nif(temp__5735__auto__){\nvar s__8815__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8815__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8815__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8817 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8816 \x3d (0);\nwhile(true){\nif((i__8816 \x3c size__4528__auto__)){\nvar vec__8818 \x3d cljs.core._nth(c__4527__auto__,i__8816);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8818,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8818,(1),null);\ncljs.core.chunk_append(b__8817,cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))));\n\nvar G__8977 \x3d (i__8816 + (1));\ni__8816 \x3d G__8977;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8817),chess$components$board$board_row_$_iter__8814(cljs.core.chunk_rest(s__8815__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8817),null);\n}\n} else {\nvar vec__8821 \x3d cljs.core.first(s__8815__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8821,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8821,(1),null);\nreturn cljs.core.cons(cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))),chess$components$board$board_row_$_iter__8814(cljs.core.rest(s__8815__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_row_$_iter__8830(s__8831){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8831__$1 \x3d s__8831;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8831__$1);\nif(temp__5735__auto__){\nvar s__8831__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8831__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8831__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8833 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8832 \x3d (0);\nwhile(true){\nif((i__8832 \x3c size__4528__auto__)){\nvar vec__8835 \x3d cljs.core._nth(c__4527__auto__,i__8832);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8835,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8835,(1),null);\ncljs.core.chunk_append(b__8833,cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))));\n\nvar G__8995 \x3d (i__8832 + (1));\ni__8832 \x3d G__8995;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8833),chess$components$board$board_row_$_iter__8830(cljs.core.chunk_rest(s__8831__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8833),null);\n}\n} else {\nvar vec__8843 \x3d cljs.core.first(s__8831__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8843,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8843,(1),null);\nreturn cljs.core.cons(cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))),chess$components$board$board_row_$_iter__8830(cljs.core.rest(s__8831__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()))));\n});\n});\n/**\n * props are:\n *   :peice [none|rook|pawn|...]\n *   :tint [true|false]\n *   :color [white|black]\n */\nchess.components.board.square \x3d (function chess$components$board$square(clc__7133__auto__){\nreturn (function() { \nvar G__8999__delegate \x3d function (p__8853){\nvar map__8855 \x3d p__8853;\nvar map__8855__$1 \x3d (((((!((map__8855 \x3d\x3d null))))?(((((map__8855.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__8855.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__8855):map__8855);\nvar piece \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784));\nvar selected \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764));\nvar can_move_to \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653));\nvar tint \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913));\nvar on_click \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543));\nvar color \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8855__$1,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173));\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 4, [\x22float\x22,\x22left\x22,\x22width\x22,\x2215%\x22,\x22background\x22,(cljs.core.truth_(selected)?\x22#40aad4\x22:(cljs.core.truth_(can_move_to)?\x22#4ae896\x22:(cljs.core.truth_(tint)?\x22#d4cebc\x22:\x22#fff\x22\n))),\x22border\x22,(cljs.core.truth_(can_move_to)?\x221px dotted #40aad4\x22:\x221px solid #999\x22)], null),new cljs.core.Keyword(null,\x22on\x22,\x22on\x22,173873944),new cljs.core.PersistentArrayMap(null, 1, [\x22click\x22,(function (){\nreturn (on_click.cljs$core$IFn$_invoke$arity$0 ? on_click.cljs$core$IFn$_invoke$arity$0() : on_click.call(null));\n})], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8864){\nvar vec__8866 \x3d p__8864;\nvar seq__8867 \x3d cljs.core.seq(vec__8866);\nvar first__8868 \x3d cljs.core.first(seq__8867);\nvar seq__8867__$1 \x3d cljs.core.next(seq__8867);\nvar c__7153__auto__ \x3d first__8868;\nvar _ \x3d seq__8867__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),(((!((piece \x3d\x3d null))))?(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7133__auto____$1){\nreturn (function (piece__$1,color__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,[\x22./pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(color__$1),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(piece__$1),\x22.svg\x22].join(\x27\x27)], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8876){\nvar vec__8878 \x3d p__8876;\nvar seq__8879 \x3d cljs.core.seq(vec__8878);\nvar first__8880 \x3d cljs.core.first(seq__8879);\nvar seq__8879__$1 \x3d cljs.core.next(seq__8879);\nvar c__7153__auto__ \x3d first__8880;\nvar _ \x3d seq__8879__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,piece,(new cljs.core.List(null,color,null,(1),null)),(2),null)),(3),null)),null,(1),null)):null)),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(((!((piece \x3d\x3d null))))?(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7133__auto____$1){\nreturn (function (piece__$1,color__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,[\x22./pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(color__$1),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(piece__$1),\x22.svg\x22].join(\x27\x27)], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8888){\nvar vec__8891 \x3d p__8888;\nvar seq__8892 \x3d cljs.core.seq(vec__8891);\nvar first__8893 \x3d cljs.core.first(seq__8892);\nvar seq__8892__$1 \x3d cljs.core.next(seq__8892);\nvar c__7153__auto__ \x3d first__8893;\nvar _ \x3d seq__8892__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,piece,(new cljs.core.List(null,color,null,(1),null)),(2),null)),(3),null)),null,(1),null)):null)))));\n};\nvar G__8999 \x3d function (var_args){\nvar p__8853 \x3d null;\nif (arguments.length \x3e 0) {\nvar G__9018__i \x3d 0, G__9018__a \x3d new Array(arguments.length -  0);\nwhile (G__9018__i \x3c G__9018__a.length) {G__9018__a[G__9018__i] \x3d arguments[G__9018__i + 0]; ++G__9018__i;}\n  p__8853 \x3d new cljs.core.IndexedSeq(G__9018__a,0,null);\n} \nreturn G__8999__delegate.call(this,p__8853);};\nG__8999.cljs$lang$maxFixedArity \x3d 0;\nG__8999.cljs$lang$applyTo \x3d (function (arglist__9020){\nvar p__8853 \x3d cljs.core.seq(arglist__9020);\nreturn G__8999__delegate(p__8853);\n});\nG__8999.cljs$core$IFn$_invoke$arity$variadic \x3d G__8999__delegate;\nreturn G__8999;\n})()\n;\n});\n");
SHADOW_ENV.evalLoad("chess.engine.worker_engine.js", true , "goog.provide(\x27chess.engine.worker_engine\x27);\n\nchess.engine.worker_engine.load_worker \x3d (function chess$engine$worker_engine$load_worker(filename,id){\n\nvar c \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar reply_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar worker \x3d (new Worker(filename));\n(worker[\x22onmessage\x22] \x3d (function (e){\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9178){\nvar state_val_9179 \x3d (state_9178[(1)]);\nif((state_val_9179 \x3d\x3d\x3d (1))){\nvar inst_9167 \x3d e.data;\nvar inst_9168 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1(inst_9167) : chess.engine.worker_engine.printl.call(null,inst_9167));\nvar state_9178__$1 \x3d state_9178;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9178__$1,(2),reply_chan,inst_9168);\n} else {\nif((state_val_9179 \x3d\x3d\x3d (2))){\nvar inst_9171 \x3d (state_9178[(2)]);\nvar state_9178__$1 \x3d state_9178;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9178__$1,inst_9171);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9182 \x3d [null,null,null,null,null,null,null];\n(statearr_9182[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__);\n\n(statearr_9182[(1)] \x3d (1));\n\nreturn statearr_9182;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1 \x3d (function (state_9178){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9178);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9185){var ex__8650__auto__ \x3d e9185;\nvar statearr_9187_9648 \x3d state_9178;\n(statearr_9187_9648[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9178[(4)]))){\nvar statearr_9190_9649 \x3d state_9178;\n(statearr_9190_9649[(1)] \x3d cljs.core.first((state_9178[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9650 \x3d state_9178;\nstate_9178 \x3d G__9650;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d function(state_9178){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1.call(this,state_9178);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9191 \x3d f__8719__auto__();\n(statearr_9191[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9191;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n}));\n\nvar c__8718__auto___9651 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9287){\nvar state_val_9288 \x3d (state_9287[(1)]);\nif((state_val_9288 \x3d\x3d\x3d (7))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9296_9652 \x3d state_9287__$1;\n(statearr_9296_9652[(2)] \x3d false);\n\n(statearr_9296_9652[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (20))){\nvar inst_9231 \x3d (state_9287[(7)]);\nvar inst_9254 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9231);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9298_9653 \x3d state_9287__$1;\n(statearr_9298_9653[(2)] \x3d inst_9254);\n\n(statearr_9298_9653[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (27))){\nvar inst_9259 \x3d (state_9287[(8)]);\nvar inst_9269 \x3d (state_9287[(2)]);\nvar inst_9270 \x3d cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1(inst_9269);\nvar state_9287__$1 \x3d state_9287;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9287__$1,(26),inst_9259,inst_9270);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (1))){\nvar state_9287__$1 \x3d state_9287;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9287__$1,(2),c);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (24))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9303_9654 \x3d state_9287__$1;\n(statearr_9303_9654[(2)] \x3d null);\n\n(statearr_9303_9654[(1)] \x3d (25));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (4))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9305_9655 \x3d state_9287__$1;\n(statearr_9305_9655[(2)] \x3d false);\n\n(statearr_9305_9655[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (15))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9307_9656 \x3d state_9287__$1;\n(statearr_9307_9656[(2)] \x3d false);\n\n(statearr_9307_9656[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (21))){\nvar inst_9231 \x3d (state_9287[(7)]);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9309_9657 \x3d state_9287__$1;\n(statearr_9309_9657[(2)] \x3d inst_9231);\n\n(statearr_9309_9657[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (13))){\nvar inst_9284 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9287__$1,inst_9284);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (22))){\nvar inst_9260 \x3d (state_9287[(9)]);\nvar inst_9257 \x3d (state_9287[(2)]);\nvar inst_9259 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9257,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9260__$1 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9257,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9261 \x3d (inst_9260__$1 \x3d\x3d null);\nvar inst_9262 \x3d cljs.core.not(inst_9261);\nvar state_9287__$1 \x3d (function (){var statearr_9319 \x3d state_9287;\n(statearr_9319[(9)] \x3d inst_9260__$1);\n\n(statearr_9319[(8)] \x3d inst_9259);\n\nreturn statearr_9319;\n})();\nif(inst_9262){\nvar statearr_9320_9662 \x3d state_9287__$1;\n(statearr_9320_9662[(1)] \x3d (23));\n\n} else {\nvar statearr_9321_9663 \x3d state_9287__$1;\n(statearr_9321_9663[(1)] \x3d (24));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (6))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9323_9664 \x3d state_9287__$1;\n(statearr_9323_9664[(2)] \x3d true);\n\n(statearr_9323_9664[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (28))){\nvar inst_9277 \x3d (state_9287[(2)]);\nvar inst_9231 \x3d inst_9277;\nvar state_9287__$1 \x3d (function (){var statearr_9324 \x3d state_9287;\n(statearr_9324[(7)] \x3d inst_9231);\n\nreturn statearr_9324;\n})();\nvar statearr_9327_9674 \x3d state_9287__$1;\n(statearr_9327_9674[(2)] \x3d null);\n\n(statearr_9327_9674[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (25))){\nvar inst_9281 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9330_9675 \x3d state_9287__$1;\n(statearr_9330_9675[(2)] \x3d inst_9281);\n\n(statearr_9330_9675[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (17))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9332_9676 \x3d state_9287__$1;\n(statearr_9332_9676[(2)] \x3d true);\n\n(statearr_9332_9676[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (3))){\nvar inst_9197 \x3d (state_9287[(10)]);\nvar inst_9212 \x3d inst_9197.cljs$lang$protocol_mask$partition0$;\nvar inst_9213 \x3d (inst_9212 \x26 (64));\nvar inst_9214 \x3d inst_9197.cljs$core$ISeq$;\nvar inst_9215 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9214);\nvar inst_9216 \x3d ((inst_9213) || (inst_9215));\nvar state_9287__$1 \x3d state_9287;\nif(cljs.core.truth_(inst_9216)){\nvar statearr_9335_9678 \x3d state_9287__$1;\n(statearr_9335_9678[(1)] \x3d (6));\n\n} else {\nvar statearr_9336_9679 \x3d state_9287__$1;\n(statearr_9336_9679[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (12))){\nvar inst_9231 \x3d (state_9287[(7)]);\nvar inst_9236 \x3d (inst_9231 \x3d\x3d null);\nvar inst_9237 \x3d cljs.core.not(inst_9236);\nvar state_9287__$1 \x3d state_9287;\nif(inst_9237){\nvar statearr_9337_9688 \x3d state_9287__$1;\n(statearr_9337_9688[(1)] \x3d (14));\n\n} else {\nvar statearr_9338_9692 \x3d state_9287__$1;\n(statearr_9338_9692[(1)] \x3d (15));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (2))){\nvar inst_9197 \x3d (state_9287[(10)]);\nvar inst_9197__$1 \x3d (state_9287[(2)]);\nvar inst_9209 \x3d (inst_9197__$1 \x3d\x3d null);\nvar inst_9210 \x3d cljs.core.not(inst_9209);\nvar state_9287__$1 \x3d (function (){var statearr_9339 \x3d state_9287;\n(statearr_9339[(10)] \x3d inst_9197__$1);\n\nreturn statearr_9339;\n})();\nif(inst_9210){\nvar statearr_9341_9695 \x3d state_9287__$1;\n(statearr_9341_9695[(1)] \x3d (3));\n\n} else {\nvar statearr_9342_9696 \x3d state_9287__$1;\n(statearr_9342_9696[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (23))){\nvar inst_9260 \x3d (state_9287[(9)]);\nvar inst_9264 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 starting work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 starting work\x22));\nvar inst_9266 \x3d cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9260], 0));\nvar inst_9267 \x3d worker.postMessage(inst_9266);\nvar state_9287__$1 \x3d (function (){var statearr_9343 \x3d state_9287;\n(statearr_9343[(11)] \x3d inst_9267);\n\n(statearr_9343[(12)] \x3d inst_9264);\n\nreturn statearr_9343;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9287__$1,(27),reply_chan);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (19))){\nvar inst_9249 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9345_9698 \x3d state_9287__$1;\n(statearr_9345_9698[(2)] \x3d inst_9249);\n\n(statearr_9345_9698[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (11))){\nvar inst_9197 \x3d (state_9287[(10)]);\nvar inst_9228 \x3d (state_9287[(2)]);\nvar inst_9229 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9228,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9230 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9228,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9231 \x3d inst_9197;\nvar state_9287__$1 \x3d (function (){var statearr_9347 \x3d state_9287;\n(statearr_9347[(13)] \x3d inst_9229);\n\n(statearr_9347[(7)] \x3d inst_9231);\n\n(statearr_9347[(14)] \x3d inst_9230);\n\nreturn statearr_9347;\n})();\nvar statearr_9349_9700 \x3d state_9287__$1;\n(statearr_9349_9700[(2)] \x3d null);\n\n(statearr_9349_9700[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (9))){\nvar inst_9197 \x3d (state_9287[(10)]);\nvar inst_9225 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9197);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9351_9702 \x3d state_9287__$1;\n(statearr_9351_9702[(2)] \x3d inst_9225);\n\n(statearr_9351_9702[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (5))){\nvar inst_9223 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nif(cljs.core.truth_(inst_9223)){\nvar statearr_9352_9704 \x3d state_9287__$1;\n(statearr_9352_9704[(1)] \x3d (9));\n\n} else {\nvar statearr_9353_9706 \x3d state_9287__$1;\n(statearr_9353_9706[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (14))){\nvar inst_9231 \x3d (state_9287[(7)]);\nvar inst_9240 \x3d inst_9231.cljs$lang$protocol_mask$partition0$;\nvar inst_9241 \x3d (inst_9240 \x26 (64));\nvar inst_9243 \x3d inst_9231.cljs$core$ISeq$;\nvar inst_9244 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9243);\nvar inst_9245 \x3d ((inst_9241) || (inst_9244));\nvar state_9287__$1 \x3d state_9287;\nif(cljs.core.truth_(inst_9245)){\nvar statearr_9354_9709 \x3d state_9287__$1;\n(statearr_9354_9709[(1)] \x3d (17));\n\n} else {\nvar statearr_9355_9710 \x3d state_9287__$1;\n(statearr_9355_9710[(1)] \x3d (18));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (26))){\nvar inst_9259 \x3d (state_9287[(8)]);\nvar inst_9272 \x3d (state_9287[(2)]);\nvar inst_9273 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 finished work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 finished work\x22));\nvar inst_9275 \x3d cljs.core.async.close_BANG_(inst_9259);\nvar state_9287__$1 \x3d (function (){var statearr_9357 \x3d state_9287;\n(statearr_9357[(15)] \x3d inst_9275);\n\n(statearr_9357[(16)] \x3d inst_9272);\n\n(statearr_9357[(17)] \x3d inst_9273);\n\nreturn statearr_9357;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9287__$1,(28),c);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (16))){\nvar inst_9252 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nif(cljs.core.truth_(inst_9252)){\nvar statearr_9360_9745 \x3d state_9287__$1;\n(statearr_9360_9745[(1)] \x3d (20));\n\n} else {\nvar statearr_9361_9746 \x3d state_9287__$1;\n(statearr_9361_9746[(1)] \x3d (21));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (10))){\nvar inst_9197 \x3d (state_9287[(10)]);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9362_9749 \x3d state_9287__$1;\n(statearr_9362_9749[(2)] \x3d inst_9197);\n\n(statearr_9362_9749[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (18))){\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9363_9750 \x3d state_9287__$1;\n(statearr_9363_9750[(2)] \x3d false);\n\n(statearr_9363_9750[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9288 \x3d\x3d\x3d (8))){\nvar inst_9220 \x3d (state_9287[(2)]);\nvar state_9287__$1 \x3d state_9287;\nvar statearr_9364_9751 \x3d state_9287__$1;\n(statearr_9364_9751[(2)] \x3d inst_9220);\n\n(statearr_9364_9751[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9365 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9365[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__);\n\n(statearr_9365[(1)] \x3d (1));\n\nreturn statearr_9365;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1 \x3d (function (state_9287){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9287);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9366){var ex__8650__auto__ \x3d e9366;\nvar statearr_9367_9753 \x3d state_9287;\n(statearr_9367_9753[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9287[(4)]))){\nvar statearr_9369_9754 \x3d state_9287;\n(statearr_9369_9754[(1)] \x3d cljs.core.first((state_9287[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9755 \x3d state_9287;\nstate_9287 \x3d G__9755;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d function(state_9287){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1.call(this,state_9287);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9372 \x3d f__8719__auto__();\n(statearr_9372[(6)] \x3d c__8718__auto___9651);\n\nreturn statearr_9372;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\n\nreturn c;\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.work_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.work_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.worker_chan_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.worker_chan_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine._ !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine._ \x3d (function (){\nvar seq__9375_9758 \x3d cljs.core.seq(cljs.core.range.cljs$core$IFn$_invoke$arity$1((4)));\nvar chunk__9376_9759 \x3d null;\nvar count__9377_9760 \x3d (0);\nvar i__9378_9761 \x3d (0);\nwhile(true){\nif((i__9378_9761 \x3c count__9377_9760)){\nvar i_9762 \x3d chunk__9376_9759.cljs$core$IIndexed$_nth$arity$2(null,i__9378_9761);\nvar c__8718__auto___9763 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9763,i_9762){\nreturn (function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d ((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9763,i_9762){\nreturn (function (state_9409){\nvar state_val_9410 \x3d (state_9409[(1)]);\nif((state_val_9410 \x3d\x3d\x3d (1))){\nvar inst_9405 \x3d chess.engine.worker_engine.load_worker(\x22js/worker.js\x22,i_9762);\nvar state_9409__$1 \x3d state_9409;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9409__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_9405);\n} else {\nif((state_val_9410 \x3d\x3d\x3d (2))){\nvar inst_9407 \x3d (state_9409[(2)]);\nvar state_9409__$1 \x3d state_9409;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9409__$1,inst_9407);\n} else {\nreturn null;\n}\n}\n});})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9763,i_9762))\n;\nreturn ((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,switch__8646__auto__,c__8718__auto___9763,i_9762){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9411 \x3d [null,null,null,null,null,null,null];\n(statearr_9411[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9411[(1)] \x3d (1));\n\nreturn statearr_9411;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9409){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9409);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9412){var ex__8650__auto__ \x3d e9412;\nvar statearr_9413_9767 \x3d state_9409;\n(statearr_9413_9767[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9409[(4)]))){\nvar statearr_9414_9769 \x3d state_9409;\n(statearr_9414_9769[(1)] \x3d cljs.core.first((state_9409[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9772 \x3d state_9409;\nstate_9409 \x3d G__9772;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9409){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9409);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n;})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,switch__8646__auto__,c__8718__auto___9763,i_9762))\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9415 \x3d f__8719__auto__();\n(statearr_9415[(6)] \x3d c__8718__auto___9763);\n\nreturn statearr_9415;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n});})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9763,i_9762))\n);\n\n\n\nvar G__9774 \x3d seq__9375_9758;\nvar G__9775 \x3d chunk__9376_9759;\nvar G__9776 \x3d count__9377_9760;\nvar G__9777 \x3d (i__9378_9761 + (1));\nseq__9375_9758 \x3d G__9774;\nchunk__9376_9759 \x3d G__9775;\ncount__9377_9760 \x3d G__9776;\ni__9378_9761 \x3d G__9777;\ncontinue;\n} else {\nvar temp__5735__auto___9778 \x3d cljs.core.seq(seq__9375_9758);\nif(temp__5735__auto___9778){\nvar seq__9375_9779__$1 \x3d temp__5735__auto___9778;\nif(cljs.core.chunked_seq_QMARK_(seq__9375_9779__$1)){\nvar c__4556__auto___9780 \x3d cljs.core.chunk_first(seq__9375_9779__$1);\nvar G__9781 \x3d cljs.core.chunk_rest(seq__9375_9779__$1);\nvar G__9782 \x3d c__4556__auto___9780;\nvar G__9783 \x3d cljs.core.count(c__4556__auto___9780);\nvar G__9784 \x3d (0);\nseq__9375_9758 \x3d G__9781;\nchunk__9376_9759 \x3d G__9782;\ncount__9377_9760 \x3d G__9783;\ni__9378_9761 \x3d G__9784;\ncontinue;\n} else {\nvar i_9786 \x3d cljs.core.first(seq__9375_9779__$1);\nvar c__8718__auto___9787 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778){\nreturn (function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d ((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778){\nreturn (function (state_9420){\nvar state_val_9421 \x3d (state_9420[(1)]);\nif((state_val_9421 \x3d\x3d\x3d (1))){\nvar inst_9416 \x3d chess.engine.worker_engine.load_worker(\x22js/worker.js\x22,i_9786);\nvar state_9420__$1 \x3d state_9420;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9420__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_9416);\n} else {\nif((state_val_9421 \x3d\x3d\x3d (2))){\nvar inst_9418 \x3d (state_9420[(2)]);\nvar state_9420__$1 \x3d state_9420;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9420__$1,inst_9418);\n} else {\nreturn null;\n}\n}\n});})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778))\n;\nreturn ((function (seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,switch__8646__auto__,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9422 \x3d [null,null,null,null,null,null,null];\n(statearr_9422[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9422[(1)] \x3d (1));\n\nreturn statearr_9422;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9420){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9420);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9423){var ex__8650__auto__ \x3d e9423;\nvar statearr_9424_9790 \x3d state_9420;\n(statearr_9424_9790[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9420[(4)]))){\nvar statearr_9425_9791 \x3d state_9420;\n(statearr_9425_9791[(1)] \x3d cljs.core.first((state_9420[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9792 \x3d state_9420;\nstate_9420 \x3d G__9792;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9420){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9420);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n;})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,switch__8646__auto__,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778))\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9426 \x3d f__8719__auto__();\n(statearr_9426[(6)] \x3d c__8718__auto___9787);\n\nreturn statearr_9426;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n});})(seq__9375_9758,chunk__9376_9759,count__9377_9760,i__9378_9761,c__8718__auto___9787,i_9786,seq__9375_9779__$1,temp__5735__auto___9778))\n);\n\n\n\nvar G__9793 \x3d cljs.core.next(seq__9375_9779__$1);\nvar G__9794 \x3d null;\nvar G__9795 \x3d (0);\nvar G__9796 \x3d (0);\nseq__9375_9758 \x3d G__9793;\nchunk__9376_9759 \x3d G__9794;\ncount__9377_9760 \x3d G__9795;\ni__9378_9761 \x3d G__9796;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9494){\nvar state_val_9495 \x3d (state_9494[(1)]);\nif((state_val_9495 \x3d\x3d\x3d (7))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9496_9797 \x3d state_9494__$1;\n(statearr_9496_9797[(2)] \x3d false);\n\n(statearr_9496_9797[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (20))){\nvar inst_9473 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9497_9798 \x3d state_9494__$1;\n(statearr_9497_9798[(2)] \x3d inst_9473);\n\n(statearr_9497_9798[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (1))){\nvar state_9494__$1 \x3d state_9494;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9494__$1,(2),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (24))){\nvar inst_9487 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d (function (){var statearr_9498 \x3d state_9494;\n(statearr_9498[(7)] \x3d inst_9487);\n\nreturn statearr_9498;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9494__$1,(25),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (4))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9499_9801 \x3d state_9494__$1;\n(statearr_9499_9801[(2)] \x3d false);\n\n(statearr_9499_9801[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (15))){\nvar inst_9457 \x3d (state_9494[(8)]);\nvar inst_9465 \x3d inst_9457.cljs$lang$protocol_mask$partition0$;\nvar inst_9466 \x3d (inst_9465 \x26 (64));\nvar inst_9467 \x3d inst_9457.cljs$core$ISeq$;\nvar inst_9468 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9467);\nvar inst_9469 \x3d ((inst_9466) || (inst_9468));\nvar state_9494__$1 \x3d state_9494;\nif(cljs.core.truth_(inst_9469)){\nvar statearr_9500_9803 \x3d state_9494__$1;\n(statearr_9500_9803[(1)] \x3d (18));\n\n} else {\nvar statearr_9501_9804 \x3d state_9494__$1;\n(statearr_9501_9804[(1)] \x3d (19));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (21))){\nvar inst_9457 \x3d (state_9494[(8)]);\nvar inst_9478 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9457);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9502_9807 \x3d state_9494__$1;\n(statearr_9502_9807[(2)] \x3d inst_9478);\n\n(statearr_9502_9807[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (13))){\nvar inst_9457 \x3d (state_9494[(8)]);\nvar inst_9462 \x3d (inst_9457 \x3d\x3d null);\nvar inst_9463 \x3d cljs.core.not(inst_9462);\nvar state_9494__$1 \x3d state_9494;\nif(inst_9463){\nvar statearr_9503_9811 \x3d state_9494__$1;\n(statearr_9503_9811[(1)] \x3d (15));\n\n} else {\nvar statearr_9504_9813 \x3d state_9494__$1;\n(statearr_9504_9813[(1)] \x3d (16));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (22))){\nvar inst_9457 \x3d (state_9494[(8)]);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9505_9818 \x3d state_9494__$1;\n(statearr_9505_9818[(2)] \x3d inst_9457);\n\n(statearr_9505_9818[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (6))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9506_9836 \x3d state_9494__$1;\n(statearr_9506_9836[(2)] \x3d true);\n\n(statearr_9506_9836[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (25))){\nvar inst_9487 \x3d (state_9494[(7)]);\nvar inst_9489 \x3d (state_9494[(2)]);\nvar inst_9457 \x3d inst_9487;\nvar inst_9458 \x3d inst_9489;\nvar state_9494__$1 \x3d (function (){var statearr_9507 \x3d state_9494;\n(statearr_9507[(9)] \x3d inst_9458);\n\n(statearr_9507[(8)] \x3d inst_9457);\n\nreturn statearr_9507;\n})();\nvar statearr_9508_9837 \x3d state_9494__$1;\n(statearr_9508_9837[(2)] \x3d null);\n\n(statearr_9508_9837[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (17))){\nvar inst_9476 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d state_9494;\nif(cljs.core.truth_(inst_9476)){\nvar statearr_9509_9838 \x3d state_9494__$1;\n(statearr_9509_9838[(1)] \x3d (21));\n\n} else {\nvar statearr_9510_9839 \x3d state_9494__$1;\n(statearr_9510_9839[(1)] \x3d (22));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (3))){\nvar inst_9431 \x3d (state_9494[(10)]);\nvar inst_9436 \x3d inst_9431.cljs$lang$protocol_mask$partition0$;\nvar inst_9437 \x3d (inst_9436 \x26 (64));\nvar inst_9438 \x3d inst_9431.cljs$core$ISeq$;\nvar inst_9439 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9438);\nvar inst_9440 \x3d ((inst_9437) || (inst_9439));\nvar state_9494__$1 \x3d state_9494;\nif(cljs.core.truth_(inst_9440)){\nvar statearr_9511_9842 \x3d state_9494__$1;\n(statearr_9511_9842[(1)] \x3d (6));\n\n} else {\nvar statearr_9512_9843 \x3d state_9494__$1;\n(statearr_9512_9843[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (12))){\nvar inst_9431 \x3d (state_9494[(10)]);\nvar inst_9456 \x3d (state_9494[(2)]);\nvar inst_9457 \x3d inst_9431;\nvar inst_9458 \x3d inst_9456;\nvar state_9494__$1 \x3d (function (){var statearr_9513 \x3d state_9494;\n(statearr_9513[(9)] \x3d inst_9458);\n\n(statearr_9513[(8)] \x3d inst_9457);\n\nreturn statearr_9513;\n})();\nvar statearr_9514_9846 \x3d state_9494__$1;\n(statearr_9514_9846[(2)] \x3d null);\n\n(statearr_9514_9846[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (2))){\nvar inst_9431 \x3d (state_9494[(10)]);\nvar inst_9431__$1 \x3d (state_9494[(2)]);\nvar inst_9433 \x3d (inst_9431__$1 \x3d\x3d null);\nvar inst_9434 \x3d cljs.core.not(inst_9433);\nvar state_9494__$1 \x3d (function (){var statearr_9515 \x3d state_9494;\n(statearr_9515[(10)] \x3d inst_9431__$1);\n\nreturn statearr_9515;\n})();\nif(inst_9434){\nvar statearr_9516_9848 \x3d state_9494__$1;\n(statearr_9516_9848[(1)] \x3d (3));\n\n} else {\nvar statearr_9517_9849 \x3d state_9494__$1;\n(statearr_9517_9849[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (23))){\nvar inst_9458 \x3d (state_9494[(9)]);\nvar inst_9481 \x3d (state_9494[(2)]);\nvar inst_9482 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9481,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9483 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9481,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9484 \x3d (chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2 ? chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2(inst_9458,inst_9483) : chess.engine.worker_engine.submit_command.call(null,inst_9458,inst_9483));\nvar inst_9485 \x3d cljs.core.async.pipe.cljs$core$IFn$_invoke$arity$2(inst_9484,inst_9482);\nvar state_9494__$1 \x3d (function (){var statearr_9518 \x3d state_9494;\n(statearr_9518[(11)] \x3d inst_9485);\n\nreturn statearr_9518;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9494__$1,(24),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (19))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9519_9854 \x3d state_9494__$1;\n(statearr_9519_9854[(2)] \x3d false);\n\n(statearr_9519_9854[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (11))){\nvar inst_9452 \x3d (state_9494[(2)]);\nvar inst_9453 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9452,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9454 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9452,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar state_9494__$1 \x3d (function (){var statearr_9520 \x3d state_9494;\n(statearr_9520[(12)] \x3d inst_9453);\n\n(statearr_9520[(13)] \x3d inst_9454);\n\nreturn statearr_9520;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9494__$1,(12),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (9))){\nvar inst_9431 \x3d (state_9494[(10)]);\nvar inst_9449 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9431);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9521_9858 \x3d state_9494__$1;\n(statearr_9521_9858[(2)] \x3d inst_9449);\n\n(statearr_9521_9858[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (5))){\nvar inst_9447 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d state_9494;\nif(cljs.core.truth_(inst_9447)){\nvar statearr_9522_9859 \x3d state_9494__$1;\n(statearr_9522_9859[(1)] \x3d (9));\n\n} else {\nvar statearr_9523_9861 \x3d state_9494__$1;\n(statearr_9523_9861[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (14))){\nvar inst_9492 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d state_9494;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9494__$1,inst_9492);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (16))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9524_9863 \x3d state_9494__$1;\n(statearr_9524_9863[(2)] \x3d false);\n\n(statearr_9524_9863[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (10))){\nvar inst_9431 \x3d (state_9494[(10)]);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9525_9866 \x3d state_9494__$1;\n(statearr_9525_9866[(2)] \x3d inst_9431);\n\n(statearr_9525_9866[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (18))){\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9526_9867 \x3d state_9494__$1;\n(statearr_9526_9867[(2)] \x3d true);\n\n(statearr_9526_9867[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9495 \x3d\x3d\x3d (8))){\nvar inst_9444 \x3d (state_9494[(2)]);\nvar state_9494__$1 \x3d state_9494;\nvar statearr_9527_9869 \x3d state_9494__$1;\n(statearr_9527_9869[(2)] \x3d inst_9444);\n\n(statearr_9527_9869[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9528 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9528[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9528[(1)] \x3d (1));\n\nreturn statearr_9528;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9494){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9494);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9529){var ex__8650__auto__ \x3d e9529;\nvar statearr_9530_9870 \x3d state_9494;\n(statearr_9530_9870[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9494[(4)]))){\nvar statearr_9531_9871 \x3d state_9494;\n(statearr_9531_9871[(1)] \x3d cljs.core.first((state_9494[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9872 \x3d state_9494;\nstate_9494 \x3d G__9872;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9494){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9494);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9532 \x3d f__8719__auto__();\n(statearr_9532[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9532;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n})()\n;\n}\nchess.engine.worker_engine.submit_command \x3d (function chess$engine$worker_engine$submit_command(worker_chan,form){\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9544){\nvar state_val_9545 \x3d (state_9544[(1)]);\nif((state_val_9545 \x3d\x3d\x3d (1))){\nvar inst_9533 \x3d (state_9544[(7)]);\nvar inst_9533__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_9534 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_9535 \x3d [inst_9533__$1,form];\nvar inst_9536 \x3d cljs.core.PersistentHashMap.fromArrays(inst_9534,inst_9535);\nvar state_9544__$1 \x3d (function (){var statearr_9546 \x3d state_9544;\n(statearr_9546[(7)] \x3d inst_9533__$1);\n\nreturn statearr_9546;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9544__$1,(2),worker_chan,inst_9536);\n} else {\nif((state_val_9545 \x3d\x3d\x3d (2))){\nvar inst_9533 \x3d (state_9544[(7)]);\nvar inst_9538 \x3d (state_9544[(2)]);\nvar state_9544__$1 \x3d (function (){var statearr_9547 \x3d state_9544;\n(statearr_9547[(8)] \x3d inst_9538);\n\nreturn statearr_9547;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9544__$1,(3),inst_9533);\n} else {\nif((state_val_9545 \x3d\x3d\x3d (3))){\nvar inst_9540 \x3d (state_9544[(2)]);\nvar state_9544__$1 \x3d (function (){var statearr_9548 \x3d state_9544;\n(statearr_9548[(9)] \x3d inst_9540);\n\nreturn statearr_9548;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9544__$1,(4),chess.engine.worker_engine.worker_chan_chan,worker_chan);\n} else {\nif((state_val_9545 \x3d\x3d\x3d (4))){\nvar inst_9540 \x3d (state_9544[(9)]);\nvar inst_9542 \x3d (state_9544[(2)]);\nvar state_9544__$1 \x3d (function (){var statearr_9549 \x3d state_9544;\n(statearr_9549[(10)] \x3d inst_9542);\n\nreturn statearr_9549;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9544__$1,inst_9540);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9550 \x3d [null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9550[(0)] \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__);\n\n(statearr_9550[(1)] \x3d (1));\n\nreturn statearr_9550;\n});\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1 \x3d (function (state_9544){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9544);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9551){var ex__8650__auto__ \x3d e9551;\nvar statearr_9552_9883 \x3d state_9544;\n(statearr_9552_9883[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9544[(4)]))){\nvar statearr_9553_9884 \x3d state_9544;\n(statearr_9553_9884[(1)] \x3d cljs.core.first((state_9544[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9885 \x3d state_9544;\nstate_9544 \x3d G__9885;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__ \x3d function(state_9544){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1.call(this,state_9544);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9554 \x3d f__8719__auto__();\n(statearr_9554[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9554;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n});\nchess.engine.worker_engine.printl \x3d (function chess$engine$worker_engine$printl(var_args){\nvar args__4742__auto__ \x3d [];\nvar len__4736__auto___9890 \x3d arguments.length;\nvar i__4737__auto___9891 \x3d (0);\nwhile(true){\nif((i__4737__auto___9891 \x3c len__4736__auto___9890)){\nargs__4742__auto__.push((arguments[i__4737__auto___9891]));\n\nvar G__9892 \x3d (i__4737__auto___9891 + (1));\ni__4737__auto___9891 \x3d G__9892;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4743__auto__ \x3d ((((0) \x3c args__4742__auto__.length))?(new cljs.core.IndexedSeq(args__4742__auto__.slice((0)),(0),null)):null);\nreturn chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(argseq__4743__auto__);\n});\n\n(chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic \x3d (function (x){\nchess.utils.screen_print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22printl: \x22,x], 0));\n\nreturn cljs.core.last(x);\n}));\n\n(chess.engine.worker_engine.printl.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.engine.worker_engine.printl.cljs$lang$applyTo \x3d (function (seq9555){\nvar self__4724__auto__ \x3d this;\nreturn self__4724__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq9555));\n}));\n\nchess.engine.worker_engine.dispatch \x3d (function chess$engine$worker_engine$dispatch(literal){\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9565){\nvar state_val_9566 \x3d (state_9565[(1)]);\nif((state_val_9566 \x3d\x3d\x3d (1))){\nvar inst_9556 \x3d (state_9565[(7)]);\nvar inst_9556__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_9557 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_9558 \x3d [inst_9556__$1,literal];\nvar inst_9559 \x3d cljs.core.PersistentHashMap.fromArrays(inst_9557,inst_9558);\nvar state_9565__$1 \x3d (function (){var statearr_9567 \x3d state_9565;\n(statearr_9567[(7)] \x3d inst_9556__$1);\n\nreturn statearr_9567;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9565__$1,(2),chess.engine.worker_engine.work_chan,inst_9559);\n} else {\nif((state_val_9566 \x3d\x3d\x3d (2))){\nvar inst_9556 \x3d (state_9565[(7)]);\nvar inst_9561 \x3d (state_9565[(2)]);\nvar state_9565__$1 \x3d (function (){var statearr_9568 \x3d state_9565;\n(statearr_9568[(8)] \x3d inst_9561);\n\nreturn statearr_9568;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9565__$1,(3),inst_9556);\n} else {\nif((state_val_9566 \x3d\x3d\x3d (3))){\nvar inst_9563 \x3d (state_9565[(2)]);\nvar state_9565__$1 \x3d state_9565;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9565__$1,inst_9563);\n} else {\nreturn null;\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9569 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_9569[(0)] \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__);\n\n(statearr_9569[(1)] \x3d (1));\n\nreturn statearr_9569;\n});\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1 \x3d (function (state_9565){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9565);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9570){var ex__8650__auto__ \x3d e9570;\nvar statearr_9571_9901 \x3d state_9565;\n(statearr_9571_9901[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9565[(4)]))){\nvar statearr_9572_9902 \x3d state_9565;\n(statearr_9572_9902[(1)] \x3d cljs.core.first((state_9565[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9903 \x3d state_9565;\nstate_9565 \x3d G__9903;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__ \x3d function(state_9565){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1.call(this,state_9565);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9573 \x3d f__8719__auto__();\n(statearr_9573[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9573;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n});\nchess.engine.worker_engine.worker_engine \x3d (function (){\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.t_chess$engine$worker_engine9574 !\x3d\x3d \x27undefined\x27)){\n} else {\n\n/**\n* @constructor\n * @implements {cljs.core.IMeta}\n * @implements {chess.engine.core.Engine}\n * @implements {cljs.core.IWithMeta}\n*/\nchess.engine.worker_engine.t_chess$engine$worker_engine9574 \x3d (function (meta9575){\nthis.meta9575 \x3d meta9575;\nthis.cljs$lang$protocol_mask$partition0$ \x3d 393216;\nthis.cljs$lang$protocol_mask$partition1$ \x3d 0;\n});\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.cljs$core$IWithMeta$_with_meta$arity$2 \x3d (function (_9576,meta9575__$1){\nvar self__ \x3d this;\nvar _9576__$1 \x3d this;\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9574(meta9575__$1));\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.cljs$core$IMeta$_meta$arity$1 \x3d (function (_9576){\nvar self__ \x3d this;\nvar _9576__$1 \x3d this;\nreturn self__.meta9575;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.chess$engine$core$Engine$ \x3d cljs.core.PROTOCOL_SENTINEL);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.chess$engine$core$Engine$apply_move$arity$3 \x3d (function (_,board,move){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9587){\nvar state_val_9588 \x3d (state_9587[(1)]);\nif((state_val_9588 \x3d\x3d\x3d (1))){\nvar inst_9578 \x3d (function (){return (function (form9577){\nif((((form9577 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9577,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),board);\n} else {\nif((((form9577 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9577,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),move);\n} else {\nreturn form9577;\n\n}\n}\n});\n})();\nvar inst_9579 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)));\nvar inst_9580 \x3d clojure.walk.postwalk(inst_9578,inst_9579);\nvar inst_9581 \x3d chess.engine.worker_engine.dispatch(inst_9580);\nvar state_9587__$1 \x3d state_9587;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9587__$1,(2),inst_9581);\n} else {\nif((state_val_9588 \x3d\x3d\x3d (2))){\nvar inst_9583 \x3d (state_9587[(2)]);\nvar inst_9584 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9583);\nvar inst_9585 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9584], 0));\nvar state_9587__$1 \x3d state_9587;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9587__$1,inst_9585);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9589 \x3d [null,null,null,null,null,null,null];\n(statearr_9589[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9589[(1)] \x3d (1));\n\nreturn statearr_9589;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9587){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9587);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9590){var ex__8650__auto__ \x3d e9590;\nvar statearr_9591_9912 \x3d state_9587;\n(statearr_9591_9912[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9587[(4)]))){\nvar statearr_9592_9913 \x3d state_9587;\n(statearr_9592_9913[(1)] \x3d cljs.core.first((state_9587[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9914 \x3d state_9587;\nstate_9587 \x3d G__9914;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9587){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9587);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9593 \x3d f__8719__auto__();\n(statearr_9593[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9593;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.chess$engine$core$Engine$possible_moves$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9604){\nvar state_val_9605 \x3d (state_9604[(1)]);\nif((state_val_9605 \x3d\x3d\x3d (1))){\nvar inst_9595 \x3d (function (){return (function (form9594){\nif((((form9594 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9594,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),board);\n} else {\nif((((form9594 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9594,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),color);\n} else {\nreturn form9594;\n\n}\n}\n});\n})();\nvar inst_9596 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)));\nvar inst_9597 \x3d clojure.walk.postwalk(inst_9595,inst_9596);\nvar inst_9598 \x3d chess.engine.worker_engine.dispatch(inst_9597);\nvar state_9604__$1 \x3d state_9604;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9604__$1,(2),inst_9598);\n} else {\nif((state_val_9605 \x3d\x3d\x3d (2))){\nvar inst_9600 \x3d (state_9604[(2)]);\nvar inst_9601 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9600);\nvar inst_9602 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9601], 0));\nvar state_9604__$1 \x3d state_9604;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9604__$1,inst_9602);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9606 \x3d [null,null,null,null,null,null,null];\n(statearr_9606[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9606[(1)] \x3d (1));\n\nreturn statearr_9606;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9604){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9604);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9607){var ex__8650__auto__ \x3d e9607;\nvar statearr_9608_9918 \x3d state_9604;\n(statearr_9608_9918[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9604[(4)]))){\nvar statearr_9609_9920 \x3d state_9604;\n(statearr_9609_9920[(1)] \x3d cljs.core.first((state_9604[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9922 \x3d state_9604;\nstate_9604 \x3d G__9922;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9604){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9604);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9610 \x3d f__8719__auto__();\n(statearr_9610[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9610;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.prototype.chess$engine$core$Engine$best_move$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9624){\nvar state_val_9625 \x3d (state_9624[(1)]);\nif((state_val_9625 \x3d\x3d\x3d (1))){\nvar inst_9611 \x3d (function (){return (function (a,b){\nreturn cljs.core.cons(b,a);\n});\n})();\nvar inst_9612 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_9613 \x3d (function (){return (function (move){\nvar c__8718__auto____$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9636){\nvar state_val_9637 \x3d (state_9636[(1)]);\nif((state_val_9637 \x3d\x3d\x3d (1))){\nvar inst_9627 \x3d (function (){return (function (form9626){\nif((((form9626 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9626,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),board);\n} else {\nif((((form9626 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9626,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__7211__7212__auto__){\nif(cljs.core.seq_QMARK_(p1__7211__7212__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7211__7212__auto__);\n} else {\nreturn p1__7211__7212__auto__;\n}\n}),move);\n} else {\nreturn form9626;\n\n}\n}\n});\n})();\nvar inst_9628 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null)], null)], null))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),cljs.core.list(new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),(2))], null));\nvar inst_9629 \x3d clojure.walk.postwalk(inst_9627,inst_9628);\nvar inst_9630 \x3d chess.engine.worker_engine.dispatch(inst_9629);\nvar state_9636__$1 \x3d state_9636;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9636__$1,(2),inst_9630);\n} else {\nif((state_val_9637 \x3d\x3d\x3d (2))){\nvar inst_9632 \x3d (state_9636[(2)]);\nvar inst_9633 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9632);\nvar inst_9634 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9633], 0));\nvar state_9636__$1 \x3d state_9636;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9636__$1,inst_9634);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9638 \x3d [null,null,null,null,null,null,null];\n(statearr_9638[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9638[(1)] \x3d (1));\n\nreturn statearr_9638;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9636){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9636);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9639){var ex__8650__auto__ \x3d e9639;\nvar statearr_9640_9929 \x3d state_9636;\n(statearr_9640_9929[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9636[(4)]))){\nvar statearr_9641_9930 \x3d state_9636;\n(statearr_9641_9930[(1)] \x3d cljs.core.first((state_9636[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9931 \x3d state_9636;\nstate_9636 \x3d G__9931;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9636){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9636);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9642 \x3d f__8719__auto__();\n(statearr_9642[(6)] \x3d c__8718__auto____$1);\n\nreturn statearr_9642;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto____$1;\n});\n})();\nvar inst_9614 \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,board,color);\nvar inst_9615 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_9613,inst_9614);\nvar inst_9616 \x3d cljs.core.async.merge.cljs$core$IFn$_invoke$arity$1(inst_9615);\nvar inst_9617 \x3d cljs.core.async.reduce(inst_9611,inst_9612,inst_9616);\nvar state_9624__$1 \x3d state_9624;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9624__$1,(2),inst_9617);\n} else {\nif((state_val_9625 \x3d\x3d\x3d (2))){\nvar inst_9619 \x3d (state_9624[(2)]);\nvar inst_9620 \x3d chess.utils.maxf(cljs.core.second,inst_9619);\nvar inst_9621 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22final result\x22,inst_9620], 0));\nvar inst_9622 \x3d cljs.core.first(inst_9621);\nvar state_9624__$1 \x3d state_9624;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9624__$1,inst_9622);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9643 \x3d [null,null,null,null,null,null,null];\n(statearr_9643[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9643[(1)] \x3d (1));\n\nreturn statearr_9643;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9624){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9624);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9644){var ex__8650__auto__ \x3d e9644;\nvar statearr_9645_9932 \x3d state_9624;\n(statearr_9645_9932[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9624[(4)]))){\nvar statearr_9646_9933 \x3d state_9624;\n(statearr_9646_9933[(1)] \x3d cljs.core.first((state_9624[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9934 \x3d state_9624;\nstate_9624 \x3d G__9934;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9624){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9624);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9647 \x3d f__8719__auto__();\n(statearr_9647[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9647;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.getBasis \x3d (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22meta9575\x22,\x22meta9575\x22,1797530161,null)], null);\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.cljs$lang$type \x3d true);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.cljs$lang$ctorStr \x3d \x22chess.engine.worker-engine/t_chess$engine$worker_engine9574\x22);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9574.cljs$lang$ctorPrWriter \x3d (function (this__4369__auto__,writer__4370__auto__,opt__4371__auto__){\nreturn cljs.core._write(writer__4370__auto__,\x22chess.engine.worker-engine/t_chess$engine$worker_engine9574\x22);\n}));\n\n/**\n * Positional factory function for chess.engine.worker-engine/t_chess$engine$worker_engine9574.\n */\nchess.engine.worker_engine.__GT_t_chess$engine$worker_engine9574 \x3d (function chess$engine$worker_engine$__GT_t_chess$engine$worker_engine9574(meta9575){\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9574(meta9575));\n});\n\n}\n\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9574(cljs.core.PersistentArrayMap.EMPTY));\n})()\n;\n");
SHADOW_ENV.evalLoad("chess.engine.hook.js", true , "goog.provide(\x27chess.engine.hook\x27);\nchess.engine.hook.use_async_engine \x3d (function chess$engine$hook$use_async_engine(clc__7133__auto__){\nvar hooked_use_state9658 \x3d html_cljs.hooks.use_state(clc__7133__auto__);\nvar hooked_use_state9659 \x3d html_cljs.hooks.use_state(clc__7133__auto__);\nvar hooked_use_state9660 \x3d html_cljs.hooks.use_state(clc__7133__auto__);\nvar hooked_use_effect9661 \x3d html_cljs.hooks.use_effect(clc__7133__auto__);\nreturn (function (my_color,status_chan){\nvar vec__9665 \x3d hooked_use_state9658(my_color);\nvar getcolor \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9665,(0),null);\nvar setcolor \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9665,(1),null);\nvar vec__9668 \x3d hooked_use_state9659(chess.engine.core.init_board);\nvar getboard \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9668,(0),null);\nvar setboard \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9668,(1),null);\nvar vec__9671 \x3d hooked_use_state9660(cljs.core.PersistentVector.EMPTY);\nvar getmoves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9671,(0),null);\nvar setmoves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9671,(1),null);\nvar set_effect \x3d hooked_use_effect9661();\nvar G__9677_9788 \x3d (function (){\nvar c__8718__auto___9789 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9693){\nvar state_val_9694 \x3d (state_9693[(1)]);\nif((state_val_9694 \x3d\x3d\x3d (1))){\nvar state_9693__$1 \x3d state_9693;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9693__$1,(2),status_chan,\x22loading bootstraped workers\x22);\n} else {\nif((state_val_9694 \x3d\x3d\x3d (2))){\nvar inst_9681 \x3d (state_9693[(2)]);\nvar inst_9682 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9683 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_9682,my_color);\nvar state_9693__$1 \x3d (function (){var statearr_9697 \x3d state_9693;\n(statearr_9697[(7)] \x3d inst_9681);\n\nreturn statearr_9697;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9693__$1,(3),inst_9683);\n} else {\nif((state_val_9694 \x3d\x3d\x3d (3))){\nvar inst_9685 \x3d (state_9693[(2)]);\nvar state_9693__$1 \x3d (function (){var statearr_9699 \x3d state_9693;\n(statearr_9699[(8)] \x3d inst_9685);\n\nreturn statearr_9699;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9693__$1,(4),status_chan,\x22white\x27s turn!\x22);\n} else {\nif((state_val_9694 \x3d\x3d\x3d (4))){\nvar inst_9685 \x3d (state_9693[(8)]);\nvar inst_9687 \x3d (state_9693[(2)]);\nvar inst_9689 \x3d (function (){var init_moves \x3d inst_9685;\nreturn (function (){\nreturn init_moves;\n});\n})();\nvar inst_9690 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9689) : setmoves.call(null,inst_9689));\nvar state_9693__$1 \x3d (function (){var statearr_9701 \x3d state_9693;\n(statearr_9701[(9)] \x3d inst_9687);\n\nreturn statearr_9701;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9693__$1,inst_9690);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9703 \x3d [null,null,null,null,null,null,null,null,null,null];\n(statearr_9703[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto__);\n\n(statearr_9703[(1)] \x3d (1));\n\nreturn statearr_9703;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1 \x3d (function (state_9693){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9693);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9705){var ex__8650__auto__ \x3d e9705;\nvar statearr_9707_9799 \x3d state_9693;\n(statearr_9707_9799[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9693[(4)]))){\nvar statearr_9708_9800 \x3d state_9693;\n(statearr_9708_9800[(1)] \x3d cljs.core.first((state_9693[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9802 \x3d state_9693;\nstate_9693 \x3d G__9802;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d function(state_9693){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1.call(this,state_9693);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9711 \x3d f__8719__auto__();\n(statearr_9711[(6)] \x3d c__8718__auto___9789);\n\nreturn statearr_9711;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\n\nreturn cljs.core.identity;\n});\n(set_effect.cljs$core$IFn$_invoke$arity$1 ? set_effect.cljs$core$IFn$_invoke$arity$1(G__9677_9788) : set_effect.call(null,G__9677_9788));\n\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null)),(getmoves.cljs$core$IFn$_invoke$arity$0 ? getmoves.cljs$core$IFn$_invoke$arity$0() : getmoves.call(null)),(function (move){\nvar c__8718__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9747){\nvar state_val_9748 \x3d (state_9747[(1)]);\nif((state_val_9748 \x3d\x3d\x3d (1))){\nvar inst_9712 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9713 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_9712,move);\nvar state_9747__$1 \x3d state_9747;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9747__$1,(2),inst_9713);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (2))){\nvar inst_9715 \x3d (state_9747[(2)]);\nvar inst_9716 \x3d (setcolor.cljs$core$IFn$_invoke$arity$1 ? setcolor.cljs$core$IFn$_invoke$arity$1(chess.engine.core.other_color) : setcolor.call(null,chess.engine.core.other_color));\nvar inst_9717 \x3d (function (){var my_board \x3d inst_9715;\nreturn (function (){\nreturn my_board;\n});\n})();\nvar inst_9718 \x3d (setboard.cljs$core$IFn$_invoke$arity$1 ? setboard.cljs$core$IFn$_invoke$arity$1(inst_9717) : setboard.call(null,inst_9717));\nvar inst_9719 \x3d (function (){return (function (){\nreturn cljs.core.PersistentVector.EMPTY;\n});\n})();\nvar inst_9720 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9719) : setmoves.call(null,inst_9719));\nvar state_9747__$1 \x3d (function (){var statearr_9752 \x3d state_9747;\n(statearr_9752[(7)] \x3d inst_9716);\n\n(statearr_9752[(8)] \x3d inst_9720);\n\n(statearr_9752[(9)] \x3d inst_9718);\n\nreturn statearr_9752;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9747__$1,(3),status_chan,\x22loading move\x22);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (3))){\nvar inst_9722 \x3d (state_9747[(2)]);\nvar inst_9723 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9724 \x3d chess.engine.core.other_color(my_color);\nvar inst_9725 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$best_move$arity$3(null,inst_9723,inst_9724);\nvar state_9747__$1 \x3d (function (){var statearr_9756 \x3d state_9747;\n(statearr_9756[(10)] \x3d inst_9722);\n\nreturn statearr_9756;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9747__$1,(4),inst_9725);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (4))){\nvar inst_9727 \x3d (state_9747[(11)]);\nvar inst_9727__$1 \x3d (state_9747[(2)]);\nvar inst_9728 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9729 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_9728,inst_9727__$1);\nvar state_9747__$1 \x3d (function (){var statearr_9757 \x3d state_9747;\n(statearr_9757[(11)] \x3d inst_9727__$1);\n\nreturn statearr_9757;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9747__$1,(5),inst_9729);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (5))){\nvar inst_9727 \x3d (state_9747[(11)]);\nvar inst_9731 \x3d (state_9747[(2)]);\nvar inst_9732 \x3d (function (){var opp_move \x3d inst_9727;\nvar new_board \x3d inst_9731;\nreturn (function (){\nreturn new_board;\n});\n})();\nvar inst_9733 \x3d (setboard.cljs$core$IFn$_invoke$arity$1 ? setboard.cljs$core$IFn$_invoke$arity$1(inst_9732) : setboard.call(null,inst_9732));\nvar inst_9734 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9735 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_9734,my_color);\nvar state_9747__$1 \x3d (function (){var statearr_9764 \x3d state_9747;\n(statearr_9764[(12)] \x3d inst_9733);\n\nreturn statearr_9764;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9747__$1,(6),inst_9735);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (6))){\nvar inst_9737 \x3d (state_9747[(2)]);\nvar inst_9738 \x3d (function (){var new_moves \x3d inst_9737;\nreturn (function (){\nreturn new_moves;\n});\n})();\nvar inst_9739 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9738) : setmoves.call(null,inst_9738));\nvar state_9747__$1 \x3d (function (){var statearr_9765 \x3d state_9747;\n(statearr_9765[(13)] \x3d inst_9739);\n\nreturn statearr_9765;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9747__$1,(7),status_chan,\x22white\x27s turn\x22);\n} else {\nif((state_val_9748 \x3d\x3d\x3d (7))){\nvar inst_9741 \x3d (state_9747[(2)]);\nvar inst_9742 \x3d (function (){return (function (){\nreturn my_color;\n});\n})();\nvar inst_9743 \x3d (setcolor.cljs$core$IFn$_invoke$arity$1 ? setcolor.cljs$core$IFn$_invoke$arity$1(inst_9742) : setcolor.call(null,inst_9742));\nvar state_9747__$1 \x3d (function (){var statearr_9766 \x3d state_9747;\n(statearr_9766[(14)] \x3d inst_9741);\n\nreturn statearr_9766;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9747__$1,inst_9743);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9768 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9768[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto__);\n\n(statearr_9768[(1)] \x3d (1));\n\nreturn statearr_9768;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1 \x3d (function (state_9747){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9747);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9770){var ex__8650__auto__ \x3d e9770;\nvar statearr_9771_9851 \x3d state_9747;\n(statearr_9771_9851[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9747[(4)]))){\nvar statearr_9773_9852 \x3d state_9747;\n(statearr_9773_9852[(1)] \x3d cljs.core.first((state_9747[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9855 \x3d state_9747;\nstate_9747 \x3d G__9855;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d function(state_9747){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1.call(this,state_9747);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9785 \x3d f__8719__auto__();\n(statearr_9785[(6)] \x3d c__8718__auto__);\n\nreturn statearr_9785;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\nreturn c__8718__auto__;\n})], null);\n});\n});\n");
SHADOW_ENV.evalLoad("chess.core.js", true , "goog.provide(\x27chess.core\x27);\nchess.core.use_chan \x3d (function chess$core$use_chan(clc__7133__auto__){\nvar hooked_use_state9805 \x3d html_cljs.hooks.use_state(clc__7133__auto__);\nvar hooked_use_effect9806 \x3d html_cljs.hooks.use_effect(clc__7133__auto__);\nreturn (function (channel){\nvar vec__9808 \x3d hooked_use_state9805(\x22no status\x22);\nvar cur \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9808,(0),null);\nvar setcur \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9808,(1),null);\nvar seteffect \x3d hooked_use_effect9806();\nvar G__9812_9915 \x3d (function (){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22mounting hook\x22], 0));\n\nvar c__8718__auto___9916 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8719__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9834){\nvar state_val_9835 \x3d (state_9834[(1)]);\nif((state_val_9835 \x3d\x3d\x3d (1))){\nvar state_9834__$1 \x3d state_9834;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9834__$1,(2),channel);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (2))){\nvar inst_9815 \x3d (state_9834[(2)]);\nvar inst_9816 \x3d inst_9815;\nvar state_9834__$1 \x3d (function (){var statearr_9840 \x3d state_9834;\n(statearr_9840[(7)] \x3d inst_9816);\n\nreturn statearr_9840;\n})();\nvar statearr_9841_9917 \x3d state_9834__$1;\n(statearr_9841_9917[(2)] \x3d null);\n\n(statearr_9841_9917[(1)] \x3d (3));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (3))){\nvar inst_9816 \x3d (state_9834[(7)]);\nvar state_9834__$1 \x3d state_9834;\nif(cljs.core.truth_(inst_9816)){\nvar statearr_9844_9919 \x3d state_9834__$1;\n(statearr_9844_9919[(1)] \x3d (5));\n\n} else {\nvar statearr_9845_9921 \x3d state_9834__$1;\n(statearr_9845_9921[(1)] \x3d (6));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (4))){\nvar inst_9832 \x3d (state_9834[(2)]);\nvar state_9834__$1 \x3d state_9834;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9834__$1,inst_9832);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (5))){\nvar inst_9816 \x3d (state_9834[(7)]);\nvar inst_9820 \x3d cljs.core.println.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22putting \x22,inst_9816], 0));\nvar inst_9821 \x3d (function (){var item \x3d inst_9816;\nvar temp__5733__auto__ \x3d inst_9816;\nreturn (function (){\nreturn item;\n});\n})();\nvar inst_9822 \x3d (setcur.cljs$core$IFn$_invoke$arity$1 ? setcur.cljs$core$IFn$_invoke$arity$1(inst_9821) : setcur.call(null,inst_9821));\nvar state_9834__$1 \x3d (function (){var statearr_9847 \x3d state_9834;\n(statearr_9847[(8)] \x3d inst_9820);\n\n(statearr_9847[(9)] \x3d inst_9822);\n\nreturn statearr_9847;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9834__$1,(8),channel);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (6))){\nvar inst_9816 \x3d (state_9834[(7)]);\nvar inst_9827 \x3d (function (){var item \x3d inst_9816;\nvar temp__5733__auto__ \x3d inst_9816;\nreturn (function (){\nreturn null;\n});\n})();\nvar inst_9828 \x3d (setcur.cljs$core$IFn$_invoke$arity$1 ? setcur.cljs$core$IFn$_invoke$arity$1(inst_9827) : setcur.call(null,inst_9827));\nvar state_9834__$1 \x3d state_9834;\nvar statearr_9850_9923 \x3d state_9834__$1;\n(statearr_9850_9923[(2)] \x3d inst_9828);\n\n(statearr_9850_9923[(1)] \x3d (7));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (7))){\nvar inst_9830 \x3d (state_9834[(2)]);\nvar state_9834__$1 \x3d state_9834;\nvar statearr_9853_9924 \x3d state_9834__$1;\n(statearr_9853_9924[(2)] \x3d inst_9830);\n\n(statearr_9853_9924[(1)] \x3d (4));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9835 \x3d\x3d\x3d (8))){\nvar inst_9824 \x3d (state_9834[(2)]);\nvar inst_9816 \x3d inst_9824;\nvar state_9834__$1 \x3d (function (){var statearr_9856 \x3d state_9834;\n(statearr_9856[(7)] \x3d inst_9816);\n\nreturn statearr_9856;\n})();\nvar statearr_9857_9925 \x3d state_9834__$1;\n(statearr_9857_9925[(2)] \x3d null);\n\n(statearr_9857_9925[(1)] \x3d (3));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$core$use_chan_$_state_machine__8647__auto__ \x3d null;\nvar chess$core$use_chan_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9860 \x3d [null,null,null,null,null,null,null,null,null,null];\n(statearr_9860[(0)] \x3d chess$core$use_chan_$_state_machine__8647__auto__);\n\n(statearr_9860[(1)] \x3d (1));\n\nreturn statearr_9860;\n});\nvar chess$core$use_chan_$_state_machine__8647__auto____1 \x3d (function (state_9834){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9834);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9862){var ex__8650__auto__ \x3d e9862;\nvar statearr_9864_9926 \x3d state_9834;\n(statearr_9864_9926[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9834[(4)]))){\nvar statearr_9865_9927 \x3d state_9834;\n(statearr_9865_9927[(1)] \x3d cljs.core.first((state_9834[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9928 \x3d state_9834;\nstate_9834 \x3d G__9928;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$core$use_chan_$_state_machine__8647__auto__ \x3d function(state_9834){\nswitch(arguments.length){\ncase 0:\nreturn chess$core$use_chan_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$core$use_chan_$_state_machine__8647__auto____1.call(this,state_9834);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$core$use_chan_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$core$use_chan_$_state_machine__8647__auto____0;\nchess$core$use_chan_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$core$use_chan_$_state_machine__8647__auto____1;\nreturn chess$core$use_chan_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8720__auto__ \x3d (function (){var statearr_9868 \x3d f__8719__auto__();\n(statearr_9868[(6)] \x3d c__8718__auto___9916);\n\nreturn statearr_9868;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8720__auto__);\n}));\n\n\nreturn cljs.core.identity;\n});\n(seteffect.cljs$core$IFn$_invoke$arity$1 ? seteffect.cljs$core$IFn$_invoke$arity$1(G__9812_9915) : seteffect.call(null,G__9812_9915));\n\nreturn (cur.cljs$core$IFn$_invoke$arity$0 ? cur.cljs$core$IFn$_invoke$arity$0() : cur.call(null));\n});\n});\nchess.core.abs \x3d (function chess$core$abs(n){\nvar x__4214__auto__ \x3d n;\nvar y__4215__auto__ \x3d (- n);\nreturn ((x__4214__auto__ \x3e y__4215__auto__) ? x__4214__auto__ : y__4215__auto__);\n});\nchess.core.dots \x3d (function chess$core$dots(clc__7133__auto__){\nvar hooked_use_interval9873 \x3d html_cljs.hooks.use_interval(clc__7133__auto__);\nreturn (function (){\nvar vec__9874 \x3d hooked_use_interval9873((300));\nvar t \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9874,(0),null);\nvar togglet \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9874,(1),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),(function (){var numdots \x3d chess.core.abs((cljs.core.mod(t,(6)) - (3)));\nreturn cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.str,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (){\nreturn \x22.\x22;\n}),cljs.core.range.cljs$core$IFn$_invoke$arity$1(numdots)));\n})()], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9877){\nvar vec__9878 \x3d p__9877;\nvar seq__9879 \x3d cljs.core.seq(vec__9878);\nvar first__9880 \x3d cljs.core.first(seq__9879);\nvar seq__9879__$1 \x3d cljs.core.next(seq__9879);\nvar c__7153__auto__ \x3d first__9880;\nvar _ \x3d seq__9879__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n});\nchess.core.status_bar \x3d (function chess$core$status_bar(clc__7133__auto__){\nvar hooked_use_chan9881 \x3d chess.core.use_chan(clc__7133__auto__);\nvar hooked_use_effect9882 \x3d html_cljs.hooks.use_effect(clc__7133__auto__);\nreturn (function (status_chan){\nvar status \x3d hooked_use_chan9881(status_chan);\nvar seteffect \x3d hooked_use_effect9882();\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22text-align\x22,\x22left\x22,\x22margin-left\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9886){\nvar vec__9887 \x3d p__9886;\nvar seq__9888 \x3d cljs.core.seq(vec__9887);\nvar first__9889 \x3d cljs.core.first(seq__9888);\nvar seq__9888__$1 \x3d cljs.core.next(seq__9888);\nvar c__7153__auto__ \x3d first__9889;\nvar _ \x3d seq__9888__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7133__auto____$1){\nreturn (function (status__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),status__$1], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9893){\nvar vec__9894 \x3d p__9893;\nvar seq__9895 \x3d cljs.core.seq(vec__9894);\nvar first__9896 \x3d cljs.core.first(seq__9895);\nvar seq__9895__$1 \x3d cljs.core.next(seq__9895);\nvar c__7153__auto__ \x3d first__9896;\nvar _ \x3d seq__9895__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,status,null,(1),null)),(2),null)),(new cljs.core.List(null,((clojure.string.includes_QMARK_(status,\x22loading\x22))?(new cljs.core.List(null,chess.core.dots,null,(1),null)):null),null,(1),null)),(2),null)))),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7133__auto____$1){\nreturn (function (status__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),status__$1], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9897){\nvar vec__9898 \x3d p__9897;\nvar seq__9899 \x3d cljs.core.seq(vec__9898);\nvar first__9900 \x3d cljs.core.first(seq__9899);\nvar seq__9899__$1 \x3d cljs.core.next(seq__9899);\nvar c__7153__auto__ \x3d first__9900;\nvar _ \x3d seq__9899__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,status,null,(1),null)),(2),null)),(new cljs.core.List(null,((clojure.string.includes_QMARK_(status,\x22loading\x22))?(new cljs.core.List(null,chess.core.dots,null,(1),null)):null),null,(1),null)),(2),null)))))));\n});\n});\nchess.core.game \x3d (function chess$core$game(){\nvar status_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((2));\nreturn (function (clc__7133__auto__){\nvar hooked_use_async_engine9904 \x3d chess.engine.hook.use_async_engine(clc__7133__auto__);\nreturn (function (){\nvar vec__9905 \x3d hooked_use_async_engine9904(new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),status_chan);\nvar board_data \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9905,(0),null);\nvar moves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9905,(1),null);\nvar on_move \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9905,(2),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22width\x22,\x22100%\x22,\x22height\x22,\x22100%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9908){\nvar vec__9909 \x3d p__9908;\nvar seq__9910 \x3d cljs.core.seq(vec__9909);\nvar first__9911 \x3d cljs.core.first(seq__9910);\nvar seq__9910__$1 \x3d cljs.core.next(seq__9910);\nvar c__7153__auto__ \x3d first__9911;\nvar _ \x3d seq__9910__$1;\nif((c__7153__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7153__auto__], 0));\n\n} else {\n}\n\nreturn c__7153__auto__;\n}),(new cljs.core.List(null,(new cljs.core.List(null,chess.core.status_bar,(new cljs.core.List(null,status_chan,null,(1),null)),(2),null)),(new cljs.core.List(null,(new cljs.core.List(null,chess.components.board.board,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),(new cljs.core.List(null,board_data,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),(new cljs.core.List(null,moves,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),(8),null)),(9),null)),null,(1),null)),(2),null))),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(new cljs.core.List(null,(new cljs.core.List(null,chess.core.status_bar,(new cljs.core.List(null,status_chan,null,(1),null)),(2),null)),(new cljs.core.List(null,(new cljs.core.List(null,chess.components.board.board,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),(new cljs.core.List(null,board_data,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),(new cljs.core.List(null,moves,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),(8),null)),(9),null)),null,(1),null)),(2),null))))));\n});\n});\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.core !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.core.mounted !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.core.mounted \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null);\n}\nchess.core.mount_root \x3d (function chess$core$mount_root(component){\nreturn cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2(chess.core.mounted,(function (old_vdom_node){\nif((!((old_vdom_node \x3d\x3d null)))){\nhtml_cljs.html.destroy_node(old_vdom_node);\n} else {\n}\n\nreturn html_cljs.html.mount(document.getElementById(\x22app\x22),component);\n}));\n});\nchess.core.init \x3d (function chess$core$init(){\nreturn chess.core.mount_root(chess.core.game());\n});\ngoog.exportSymbol(\x27chess.core.init\x27, chess.core.init);\n");
SHADOW_ENV.evalLoad("shadow.module.main.append.js", false , "\ntry { chess.core.init(); } catch (e) { console.error(\x22An error occurred when calling (chess.core/init)\x22); throw(e); };\nSHADOW_ENV.setLoaded(\x22chess.components.board.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.worker_engine.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.hook.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.core.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.main.append.js\x22);\nshadow.cljs.bootstrap.env.set_loaded([\x22chess.components.board\x22,\x22chess.engine.worker-engine\x22,\x22shadow.module.main.append\x22,\x22chess.engine.hook\x22,\x22chess.core\x22]);\n");