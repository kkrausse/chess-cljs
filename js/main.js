SHADOW_ENV.evalLoad("chess.components.board.js", true , "goog.provide(\x27chess.components.board\x27);\n\nchess.components.board.find_move \x3d (function chess$components$board$find_move(moves,move){\nvar vec__8702 \x3d move;\nvar mfrom \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8702,(0),null);\nvar mto \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8702,(1),null);\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p__8705){\nvar vec__8706 \x3d p__8705;\nvar from \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8706,(0),null);\nvar to \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8706,(1),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(from,mfrom)){\nif((mto \x3d\x3d null)){\nreturn true;\n} else {\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(to,mto);\n}\n} else {\nreturn false;\n}\n}),moves);\n});\nchess.components.board.uiify \x3d (function chess$components$board$uiify(sq,i,j,state,set_state,moves,on_move){\nvar vec__8713 \x3d chess.components.board.find_move(moves,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null)], null));\nvar move_here \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8713,(0),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(sq,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.mod((j + cljs.core.mod(i,(2))),(2)),(0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543),(function (){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22clicked the thing!\x22,(move_here \x3d\x3d null)], 0));\n\nif((move_here \x3d\x3d null)){\nvar G__8717 \x3d (function (p1__8710_SHARP_){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(p1__8710_SHARP_,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null));\n});\nreturn (set_state.cljs$core$IFn$_invoke$arity$1 ? set_state.cljs$core$IFn$_invoke$arity$1(G__8717) : set_state.call(null,G__8717));\n} else {\nreturn (on_move.cljs$core$IFn$_invoke$arity$1 ? on_move.cljs$core$IFn$_invoke$arity$1(move_here) : on_move.call(null,move_here));\n}\n}),new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653),(!((move_here \x3d\x3d null))),new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null),(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)))),new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : sq.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))),(function (p1__8711_SHARP_){\nreturn cljs.core.name(p1__8711_SHARP_);\n})),new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : sq.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173))),(function (p1__8712_SHARP_){\nreturn cljs.core.name(p1__8712_SHARP_);\n}))], 0));\n});\n/**\n * {:board - a 2d array containing the board. Always white on bottom, not matter\n *          who the player is\n *  :player - \x27white\x27 or \x27black\x27 - will flip the board if black}\n */\nchess.components.board.board \x3d (function chess$components$board$board(clc__7188__auto__){\nvar hooked_use_state8719 \x3d html_cljs.hooks.use_state(clc__7188__auto__);\nreturn (function() { \nvar G__8813__delegate \x3d function (p__8720){\nvar map__8721 \x3d p__8720;\nvar map__8721__$1 \x3d (((((!((map__8721 \x3d\x3d null))))?(((((map__8721.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__8721.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__8721):map__8721);\nvar board \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8721__$1,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633));\nvar player \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8721__$1,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400));\nvar moves \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8721__$1,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255));\nvar on_move \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8721__$1,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710));\nvar vec__8723 \x3d hooked_use_state8719(new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),null], null));\nvar state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8723,(0),null);\nvar set_state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8723,(1),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),(function (){var board_size \x3d (0.8 * (function (){var x__4217__auto__ \x3d window.innerWidth;\nvar y__4218__auto__ \x3d window.innerHeight;\nreturn ((x__4217__auto__ \x3c y__4218__auto__) ? x__4217__auto__ : y__4218__auto__);\n})());\nreturn new cljs.core.PersistentArrayMap(null, 4, [\x22width\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22height\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22display\x22,\x22inline-block\x22,\x22margin\x22,\x225px\x22], null);\n})()], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8726){\nvar vec__8727 \x3d p__8726;\nvar seq__8728 \x3d cljs.core.seq(vec__8727);\nvar first__8729 \x3d cljs.core.first(seq__8728);\nvar seq__8728__$1 \x3d cljs.core.next(seq__8728);\nvar c__7208__auto__ \x3d first__8729;\nvar _ \x3d seq__8728__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_$_iter__8730(s__8731){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8731__$1 \x3d s__8731;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8731__$1);\nif(temp__5735__auto__){\nvar s__8731__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8731__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8731__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8733 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8732 \x3d (0);\nwhile(true){\nif((i__8732 \x3c size__4528__auto__)){\nvar vec__8734 \x3d cljs.core._nth(c__4527__auto__,i__8732);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8734,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8734,(1),null);\ncljs.core.chunk_append(b__8733,(new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)));\n\nvar G__8834 \x3d (i__8732 + (1));\ni__8732 \x3d G__8834;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8733),chess$components$board$board_$_iter__8730(cljs.core.chunk_rest(s__8731__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8733),null);\n}\n} else {\nvar vec__8737 \x3d cljs.core.first(s__8731__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8737,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8737,(1),null);\nreturn cljs.core.cons((new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),chess$components$board$board_$_iter__8730(cljs.core.rest(s__8731__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_$_iter__8740(s__8741){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8741__$1 \x3d s__8741;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8741__$1);\nif(temp__5735__auto__){\nvar s__8741__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8741__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8741__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8743 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8742 \x3d (0);\nwhile(true){\nif((i__8742 \x3c size__4528__auto__)){\nvar vec__8744 \x3d cljs.core._nth(c__4527__auto__,i__8742);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8744,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8744,(1),null);\ncljs.core.chunk_append(b__8743,(new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)));\n\nvar G__8847 \x3d (i__8742 + (1));\ni__8742 \x3d G__8847;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8743),chess$components$board$board_$_iter__8740(cljs.core.chunk_rest(s__8741__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8743),null);\n}\n} else {\nvar vec__8747 \x3d cljs.core.first(s__8741__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8747,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8747,(1),null);\nreturn cljs.core.cons((new cljs.core.List(null,chess.components.board.board_row,(new cljs.core.List(null,row,(new cljs.core.List(null,i,(new cljs.core.List(null,state,(new cljs.core.List(null,set_state,(new cljs.core.List(null,moves,(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),chess$components$board$board_$_iter__8740(cljs.core.rest(s__8741__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()))));\n};\nvar G__8813 \x3d function (var_args){\nvar p__8720 \x3d null;\nif (arguments.length \x3e 0) {\nvar G__8856__i \x3d 0, G__8856__a \x3d new Array(arguments.length -  0);\nwhile (G__8856__i \x3c G__8856__a.length) {G__8856__a[G__8856__i] \x3d arguments[G__8856__i + 0]; ++G__8856__i;}\n  p__8720 \x3d new cljs.core.IndexedSeq(G__8856__a,0,null);\n} \nreturn G__8813__delegate.call(this,p__8720);};\nG__8813.cljs$lang$maxFixedArity \x3d 0;\nG__8813.cljs$lang$applyTo \x3d (function (arglist__8858){\nvar p__8720 \x3d cljs.core.seq(arglist__8858);\nreturn G__8813__delegate(p__8720);\n});\nG__8813.cljs$core$IFn$_invoke$arity$variadic \x3d G__8813__delegate;\nreturn G__8813;\n})()\n;\n});\nchess.components.board.board_row \x3d (function chess$components$board$board_row(clc__7188__auto__){\nreturn (function (row,i,state,set_state,moves,on_move){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8750){\nvar vec__8751 \x3d p__8750;\nvar seq__8752 \x3d cljs.core.seq(vec__8751);\nvar first__8753 \x3d cljs.core.first(seq__8752);\nvar seq__8752__$1 \x3d cljs.core.next(seq__8752);\nvar c__7208__auto__ \x3d first__8753;\nvar _ \x3d seq__8752__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_row_$_iter__8754(s__8755){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8755__$1 \x3d s__8755;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8755__$1);\nif(temp__5735__auto__){\nvar s__8755__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8755__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8755__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8757 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8756 \x3d (0);\nwhile(true){\nif((i__8756 \x3c size__4528__auto__)){\nvar vec__8758 \x3d cljs.core._nth(c__4527__auto__,i__8756);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8758,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8758,(1),null);\ncljs.core.chunk_append(b__8757,cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))));\n\nvar G__8893 \x3d (i__8756 + (1));\ni__8756 \x3d G__8893;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8757),chess$components$board$board_row_$_iter__8754(cljs.core.chunk_rest(s__8755__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8757),null);\n}\n} else {\nvar vec__8761 \x3d cljs.core.first(s__8755__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8761,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8761,(1),null);\nreturn cljs.core.cons(cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))),chess$components$board$board_row_$_iter__8754(cljs.core.rest(s__8755__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(function (){var iter__4529__auto__ \x3d (function chess$components$board$board_row_$_iter__8764(s__8765){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__8765__$1 \x3d s__8765;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__8765__$1);\nif(temp__5735__auto__){\nvar s__8765__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__8765__$2)){\nvar c__4527__auto__ \x3d cljs.core.chunk_first(s__8765__$2);\nvar size__4528__auto__ \x3d cljs.core.count(c__4527__auto__);\nvar b__8767 \x3d cljs.core.chunk_buffer(size__4528__auto__);\nif((function (){var i__8766 \x3d (0);\nwhile(true){\nif((i__8766 \x3c size__4528__auto__)){\nvar vec__8768 \x3d cljs.core._nth(c__4527__auto__,i__8766);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8768,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8768,(1),null);\ncljs.core.chunk_append(b__8767,cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))));\n\nvar G__8913 \x3d (i__8766 + (1));\ni__8766 \x3d G__8913;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8767),chess$components$board$board_row_$_iter__8764(cljs.core.chunk_rest(s__8765__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__8767),null);\n}\n} else {\nvar vec__8771 \x3d cljs.core.first(s__8765__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8771,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__8771,(1),null);\nreturn cljs.core.cons(cljs.core.cons(chess.components.board.square,cljs.core.mapcat.cljs$core$IFn$_invoke$arity$variadic(cljs.core.identity,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([chess.components.board.uiify(sq,i,j,(state.cljs$core$IFn$_invoke$arity$0 ? state.cljs$core$IFn$_invoke$arity$0() : state.call(null)),set_state,moves,on_move)], 0))),chess$components$board$board_row_$_iter__8764(cljs.core.rest(s__8765__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4529__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()))));\n});\n});\n/**\n * props are:\n *   :peice [none|rook|pawn|...]\n *   :tint [true|false]\n *   :color [white|black]\n */\nchess.components.board.square \x3d (function chess$components$board$square(clc__7188__auto__){\nreturn (function() { \nvar G__8922__delegate \x3d function (p__8774){\nvar map__8775 \x3d p__8774;\nvar map__8775__$1 \x3d (((((!((map__8775 \x3d\x3d null))))?(((((map__8775.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__8775.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__8775):map__8775);\nvar piece \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784));\nvar selected \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764));\nvar can_move_to \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653));\nvar tint \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913));\nvar on_click \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543));\nvar color \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__8775__$1,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173));\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 4, [\x22float\x22,\x22left\x22,\x22width\x22,\x2215%\x22,\x22background\x22,(cljs.core.truth_(selected)?\x22#40aad4\x22:(cljs.core.truth_(can_move_to)?\x22#4ae896\x22:(cljs.core.truth_(tint)?\x22#d4cebc\x22:\x22#fff\x22\n))),\x22border\x22,(cljs.core.truth_(can_move_to)?\x221px dotted #40aad4\x22:\x221px solid #999\x22)], null),new cljs.core.Keyword(null,\x22on\x22,\x22on\x22,173873944),new cljs.core.PersistentArrayMap(null, 1, [\x22click\x22,(function (){\nreturn (on_click.cljs$core$IFn$_invoke$arity$0 ? on_click.cljs$core$IFn$_invoke$arity$0() : on_click.call(null));\n})], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8777){\nvar vec__8778 \x3d p__8777;\nvar seq__8779 \x3d cljs.core.seq(vec__8778);\nvar first__8780 \x3d cljs.core.first(seq__8779);\nvar seq__8779__$1 \x3d cljs.core.next(seq__8779);\nvar c__7208__auto__ \x3d first__8780;\nvar _ \x3d seq__8779__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),(((!((piece \x3d\x3d null))))?(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7188__auto____$1){\nreturn (function (piece__$1,color__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,chess.utils.asset_path([\x22/pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(color__$1),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(piece__$1),\x22.svg\x22].join(\x27\x27))], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8781){\nvar vec__8782 \x3d p__8781;\nvar seq__8783 \x3d cljs.core.seq(vec__8782);\nvar first__8784 \x3d cljs.core.first(seq__8783);\nvar seq__8783__$1 \x3d cljs.core.next(seq__8783);\nvar c__7208__auto__ \x3d first__8784;\nvar _ \x3d seq__8783__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,piece,(new cljs.core.List(null,color,null,(1),null)),(2),null)),(3),null)),null,(1),null)):null)),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(((!((piece \x3d\x3d null))))?(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7188__auto____$1){\nreturn (function (piece__$1,color__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,chess.utils.asset_path([\x22/pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(color__$1),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1(piece__$1),\x22.svg\x22].join(\x27\x27))], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__8785){\nvar vec__8787 \x3d p__8785;\nvar seq__8788 \x3d cljs.core.seq(vec__8787);\nvar first__8790 \x3d cljs.core.first(seq__8788);\nvar seq__8788__$1 \x3d cljs.core.next(seq__8788);\nvar c__7208__auto__ \x3d first__8790;\nvar _ \x3d seq__8788__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,piece,(new cljs.core.List(null,color,null,(1),null)),(2),null)),(3),null)),null,(1),null)):null)))));\n};\nvar G__8922 \x3d function (var_args){\nvar p__8774 \x3d null;\nif (arguments.length \x3e 0) {\nvar G__8972__i \x3d 0, G__8972__a \x3d new Array(arguments.length -  0);\nwhile (G__8972__i \x3c G__8972__a.length) {G__8972__a[G__8972__i] \x3d arguments[G__8972__i + 0]; ++G__8972__i;}\n  p__8774 \x3d new cljs.core.IndexedSeq(G__8972__a,0,null);\n} \nreturn G__8922__delegate.call(this,p__8774);};\nG__8922.cljs$lang$maxFixedArity \x3d 0;\nG__8922.cljs$lang$applyTo \x3d (function (arglist__8973){\nvar p__8774 \x3d cljs.core.seq(arglist__8973);\nreturn G__8922__delegate(p__8774);\n});\nG__8922.cljs$core$IFn$_invoke$arity$variadic \x3d G__8922__delegate;\nreturn G__8922;\n})()\n;\n});\n");
SHADOW_ENV.evalLoad("chess.engine.worker_engine.js", true , "goog.provide(\x27chess.engine.worker_engine\x27);\n\nchess.engine.worker_engine.load_worker \x3d (function chess$engine$worker_engine$load_worker(filename,id){\n\nvar c \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar reply_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar worker \x3d (new Worker(filename));\n(worker[\x22onmessage\x22] \x3d (function (e){\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9167){\nvar state_val_9168 \x3d (state_9167[(1)]);\nif((state_val_9168 \x3d\x3d\x3d (1))){\nvar inst_9162 \x3d e.data;\nvar inst_9163 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1(inst_9162) : chess.engine.worker_engine.printl.call(null,inst_9162));\nvar state_9167__$1 \x3d state_9167;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9167__$1,(2),reply_chan,inst_9163);\n} else {\nif((state_val_9168 \x3d\x3d\x3d (2))){\nvar inst_9165 \x3d (state_9167[(2)]);\nvar state_9167__$1 \x3d state_9167;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9167__$1,inst_9165);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9169 \x3d [null,null,null,null,null,null,null];\n(statearr_9169[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__);\n\n(statearr_9169[(1)] \x3d (1));\n\nreturn statearr_9169;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1 \x3d (function (state_9167){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9167);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9176){var ex__8650__auto__ \x3d e9176;\nvar statearr_9177_9598 \x3d state_9167;\n(statearr_9177_9598[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9167[(4)]))){\nvar statearr_9180_9599 \x3d state_9167;\n(statearr_9180_9599[(1)] \x3d cljs.core.first((state_9167[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9600 \x3d state_9167;\nstate_9167 \x3d G__9600;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d function(state_9167){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1.call(this,state_9167);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9184 \x3d f__8854__auto__();\n(statearr_9184[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9184;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n}));\n\nvar c__8853__auto___9602 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9270){\nvar state_val_9271 \x3d (state_9270[(1)]);\nif((state_val_9271 \x3d\x3d\x3d (7))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9272_9612 \x3d state_9270__$1;\n(statearr_9272_9612[(2)] \x3d false);\n\n(statearr_9272_9612[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (20))){\nvar inst_9222 \x3d (state_9270[(7)]);\nvar inst_9242 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9222);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9273_9613 \x3d state_9270__$1;\n(statearr_9273_9613[(2)] \x3d inst_9242);\n\n(statearr_9273_9613[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (27))){\nvar inst_9246 \x3d (state_9270[(8)]);\nvar inst_9255 \x3d (state_9270[(2)]);\nvar inst_9256 \x3d cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1(inst_9255);\nvar state_9270__$1 \x3d state_9270;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9270__$1,(26),inst_9246,inst_9256);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (1))){\nvar state_9270__$1 \x3d state_9270;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9270__$1,(2),c);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (24))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9274_9614 \x3d state_9270__$1;\n(statearr_9274_9614[(2)] \x3d null);\n\n(statearr_9274_9614[(1)] \x3d (25));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (4))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9275_9616 \x3d state_9270__$1;\n(statearr_9275_9616[(2)] \x3d false);\n\n(statearr_9275_9616[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (15))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9276_9619 \x3d state_9270__$1;\n(statearr_9276_9619[(2)] \x3d false);\n\n(statearr_9276_9619[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (21))){\nvar inst_9222 \x3d (state_9270[(7)]);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9277_9621 \x3d state_9270__$1;\n(statearr_9277_9621[(2)] \x3d inst_9222);\n\n(statearr_9277_9621[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (13))){\nvar inst_9268 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9270__$1,inst_9268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (22))){\nvar inst_9247 \x3d (state_9270[(9)]);\nvar inst_9245 \x3d (state_9270[(2)]);\nvar inst_9246 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9245,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9247__$1 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9245,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9248 \x3d (inst_9247__$1 \x3d\x3d null);\nvar inst_9249 \x3d cljs.core.not(inst_9248);\nvar state_9270__$1 \x3d (function (){var statearr_9278 \x3d state_9270;\n(statearr_9278[(9)] \x3d inst_9247__$1);\n\n(statearr_9278[(8)] \x3d inst_9246);\n\nreturn statearr_9278;\n})();\nif(inst_9249){\nvar statearr_9279_9624 \x3d state_9270__$1;\n(statearr_9279_9624[(1)] \x3d (23));\n\n} else {\nvar statearr_9280_9625 \x3d state_9270__$1;\n(statearr_9280_9625[(1)] \x3d (24));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (6))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9281_9626 \x3d state_9270__$1;\n(statearr_9281_9626[(2)] \x3d true);\n\n(statearr_9281_9626[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (28))){\nvar inst_9262 \x3d (state_9270[(2)]);\nvar inst_9222 \x3d inst_9262;\nvar state_9270__$1 \x3d (function (){var statearr_9282 \x3d state_9270;\n(statearr_9282[(7)] \x3d inst_9222);\n\nreturn statearr_9282;\n})();\nvar statearr_9283_9632 \x3d state_9270__$1;\n(statearr_9283_9632[(2)] \x3d null);\n\n(statearr_9283_9632[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (25))){\nvar inst_9266 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9284_9634 \x3d state_9270__$1;\n(statearr_9284_9634[(2)] \x3d inst_9266);\n\n(statearr_9284_9634[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (17))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9285_9635 \x3d state_9270__$1;\n(statearr_9285_9635[(2)] \x3d true);\n\n(statearr_9285_9635[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (3))){\nvar inst_9194 \x3d (state_9270[(10)]);\nvar inst_9203 \x3d inst_9194.cljs$lang$protocol_mask$partition0$;\nvar inst_9204 \x3d (inst_9203 \x26 (64));\nvar inst_9205 \x3d inst_9194.cljs$core$ISeq$;\nvar inst_9206 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9205);\nvar inst_9207 \x3d ((inst_9204) || (inst_9206));\nvar state_9270__$1 \x3d state_9270;\nif(cljs.core.truth_(inst_9207)){\nvar statearr_9286_9637 \x3d state_9270__$1;\n(statearr_9286_9637[(1)] \x3d (6));\n\n} else {\nvar statearr_9287_9639 \x3d state_9270__$1;\n(statearr_9287_9639[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (12))){\nvar inst_9222 \x3d (state_9270[(7)]);\nvar inst_9226 \x3d (inst_9222 \x3d\x3d null);\nvar inst_9227 \x3d cljs.core.not(inst_9226);\nvar state_9270__$1 \x3d state_9270;\nif(inst_9227){\nvar statearr_9288_9641 \x3d state_9270__$1;\n(statearr_9288_9641[(1)] \x3d (14));\n\n} else {\nvar statearr_9289_9643 \x3d state_9270__$1;\n(statearr_9289_9643[(1)] \x3d (15));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (2))){\nvar inst_9194 \x3d (state_9270[(10)]);\nvar inst_9194__$1 \x3d (state_9270[(2)]);\nvar inst_9200 \x3d (inst_9194__$1 \x3d\x3d null);\nvar inst_9201 \x3d cljs.core.not(inst_9200);\nvar state_9270__$1 \x3d (function (){var statearr_9290 \x3d state_9270;\n(statearr_9290[(10)] \x3d inst_9194__$1);\n\nreturn statearr_9290;\n})();\nif(inst_9201){\nvar statearr_9291_9645 \x3d state_9270__$1;\n(statearr_9291_9645[(1)] \x3d (3));\n\n} else {\nvar statearr_9292_9646 \x3d state_9270__$1;\n(statearr_9292_9646[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (23))){\nvar inst_9247 \x3d (state_9270[(9)]);\nvar inst_9251 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 starting work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 starting work\x22));\nvar inst_9252 \x3d cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9247], 0));\nvar inst_9253 \x3d worker.postMessage(inst_9252);\nvar state_9270__$1 \x3d (function (){var statearr_9293 \x3d state_9270;\n(statearr_9293[(11)] \x3d inst_9251);\n\n(statearr_9293[(12)] \x3d inst_9253);\n\nreturn statearr_9293;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9270__$1,(27),reply_chan);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (19))){\nvar inst_9237 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9294_9648 \x3d state_9270__$1;\n(statearr_9294_9648[(2)] \x3d inst_9237);\n\n(statearr_9294_9648[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (11))){\nvar inst_9194 \x3d (state_9270[(10)]);\nvar inst_9219 \x3d (state_9270[(2)]);\nvar inst_9220 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9219,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9221 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9219,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9222 \x3d inst_9194;\nvar state_9270__$1 \x3d (function (){var statearr_9295 \x3d state_9270;\n(statearr_9295[(13)] \x3d inst_9221);\n\n(statearr_9295[(7)] \x3d inst_9222);\n\n(statearr_9295[(14)] \x3d inst_9220);\n\nreturn statearr_9295;\n})();\nvar statearr_9296_9657 \x3d state_9270__$1;\n(statearr_9296_9657[(2)] \x3d null);\n\n(statearr_9296_9657[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (9))){\nvar inst_9194 \x3d (state_9270[(10)]);\nvar inst_9216 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9194);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9297_9658 \x3d state_9270__$1;\n(statearr_9297_9658[(2)] \x3d inst_9216);\n\n(statearr_9297_9658[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (5))){\nvar inst_9214 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nif(cljs.core.truth_(inst_9214)){\nvar statearr_9298_9659 \x3d state_9270__$1;\n(statearr_9298_9659[(1)] \x3d (9));\n\n} else {\nvar statearr_9299_9660 \x3d state_9270__$1;\n(statearr_9299_9660[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (14))){\nvar inst_9222 \x3d (state_9270[(7)]);\nvar inst_9229 \x3d inst_9222.cljs$lang$protocol_mask$partition0$;\nvar inst_9230 \x3d (inst_9229 \x26 (64));\nvar inst_9231 \x3d inst_9222.cljs$core$ISeq$;\nvar inst_9232 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9231);\nvar inst_9233 \x3d ((inst_9230) || (inst_9232));\nvar state_9270__$1 \x3d state_9270;\nif(cljs.core.truth_(inst_9233)){\nvar statearr_9300_9662 \x3d state_9270__$1;\n(statearr_9300_9662[(1)] \x3d (17));\n\n} else {\nvar statearr_9301_9663 \x3d state_9270__$1;\n(statearr_9301_9663[(1)] \x3d (18));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (26))){\nvar inst_9246 \x3d (state_9270[(8)]);\nvar inst_9258 \x3d (state_9270[(2)]);\nvar inst_9259 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 finished work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 finished work\x22));\nvar inst_9260 \x3d cljs.core.async.close_BANG_(inst_9246);\nvar state_9270__$1 \x3d (function (){var statearr_9302 \x3d state_9270;\n(statearr_9302[(15)] \x3d inst_9258);\n\n(statearr_9302[(16)] \x3d inst_9260);\n\n(statearr_9302[(17)] \x3d inst_9259);\n\nreturn statearr_9302;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9270__$1,(28),c);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (16))){\nvar inst_9240 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nif(cljs.core.truth_(inst_9240)){\nvar statearr_9303_9665 \x3d state_9270__$1;\n(statearr_9303_9665[(1)] \x3d (20));\n\n} else {\nvar statearr_9304_9667 \x3d state_9270__$1;\n(statearr_9304_9667[(1)] \x3d (21));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (10))){\nvar inst_9194 \x3d (state_9270[(10)]);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9305_9669 \x3d state_9270__$1;\n(statearr_9305_9669[(2)] \x3d inst_9194);\n\n(statearr_9305_9669[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (18))){\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9306_9671 \x3d state_9270__$1;\n(statearr_9306_9671[(2)] \x3d false);\n\n(statearr_9306_9671[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9271 \x3d\x3d\x3d (8))){\nvar inst_9211 \x3d (state_9270[(2)]);\nvar state_9270__$1 \x3d state_9270;\nvar statearr_9307_9672 \x3d state_9270__$1;\n(statearr_9307_9672[(2)] \x3d inst_9211);\n\n(statearr_9307_9672[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9308 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9308[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__);\n\n(statearr_9308[(1)] \x3d (1));\n\nreturn statearr_9308;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1 \x3d (function (state_9270){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9270);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9309){var ex__8650__auto__ \x3d e9309;\nvar statearr_9310_9674 \x3d state_9270;\n(statearr_9310_9674[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9270[(4)]))){\nvar statearr_9311_9675 \x3d state_9270;\n(statearr_9311_9675[(1)] \x3d cljs.core.first((state_9270[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9676 \x3d state_9270;\nstate_9270 \x3d G__9676;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__ \x3d function(state_9270){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1.call(this,state_9270);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9312 \x3d f__8854__auto__();\n(statearr_9312[(6)] \x3d c__8853__auto___9602);\n\nreturn statearr_9312;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\n\nreturn c;\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.work_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.work_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.worker_chan_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.worker_chan_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine._ !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine._ \x3d (function (){\nvar seq__9313_9677 \x3d cljs.core.seq(cljs.core.range.cljs$core$IFn$_invoke$arity$1((4)));\nvar chunk__9314_9678 \x3d null;\nvar count__9315_9679 \x3d (0);\nvar i__9316_9680 \x3d (0);\nwhile(true){\nif((i__9316_9680 \x3c count__9315_9679)){\nvar i_9681 \x3d chunk__9314_9678.cljs$core$IIndexed$_nth$arity$2(null,i__9316_9680);\nvar c__8853__auto___9682 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9682,i_9681){\nreturn (function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d ((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9682,i_9681){\nreturn (function (state_9346){\nvar state_val_9347 \x3d (state_9346[(1)]);\nif((state_val_9347 \x3d\x3d\x3d (1))){\nvar inst_9341 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_9342 \x3d chess.engine.worker_engine.load_worker(inst_9341,i_9681);\nvar state_9346__$1 \x3d state_9346;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9346__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_9342);\n} else {\nif((state_val_9347 \x3d\x3d\x3d (2))){\nvar inst_9344 \x3d (state_9346[(2)]);\nvar state_9346__$1 \x3d state_9346;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9346__$1,inst_9344);\n} else {\nreturn null;\n}\n}\n});})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9682,i_9681))\n;\nreturn ((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,switch__8646__auto__,c__8853__auto___9682,i_9681){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9348 \x3d [null,null,null,null,null,null,null];\n(statearr_9348[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9348[(1)] \x3d (1));\n\nreturn statearr_9348;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9346){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9346);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9349){var ex__8650__auto__ \x3d e9349;\nvar statearr_9350_9686 \x3d state_9346;\n(statearr_9350_9686[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9346[(4)]))){\nvar statearr_9351_9687 \x3d state_9346;\n(statearr_9351_9687[(1)] \x3d cljs.core.first((state_9346[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9688 \x3d state_9346;\nstate_9346 \x3d G__9688;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9346){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9346);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n;})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,switch__8646__auto__,c__8853__auto___9682,i_9681))\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9352 \x3d f__8854__auto__();\n(statearr_9352[(6)] \x3d c__8853__auto___9682);\n\nreturn statearr_9352;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n});})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9682,i_9681))\n);\n\n\n\nvar G__9690 \x3d seq__9313_9677;\nvar G__9691 \x3d chunk__9314_9678;\nvar G__9692 \x3d count__9315_9679;\nvar G__9693 \x3d (i__9316_9680 + (1));\nseq__9313_9677 \x3d G__9690;\nchunk__9314_9678 \x3d G__9691;\ncount__9315_9679 \x3d G__9692;\ni__9316_9680 \x3d G__9693;\ncontinue;\n} else {\nvar temp__5735__auto___9695 \x3d cljs.core.seq(seq__9313_9677);\nif(temp__5735__auto___9695){\nvar seq__9313_9696__$1 \x3d temp__5735__auto___9695;\nif(cljs.core.chunked_seq_QMARK_(seq__9313_9696__$1)){\nvar c__4556__auto___9697 \x3d cljs.core.chunk_first(seq__9313_9696__$1);\nvar G__9699 \x3d cljs.core.chunk_rest(seq__9313_9696__$1);\nvar G__9700 \x3d c__4556__auto___9697;\nvar G__9701 \x3d cljs.core.count(c__4556__auto___9697);\nvar G__9702 \x3d (0);\nseq__9313_9677 \x3d G__9699;\nchunk__9314_9678 \x3d G__9700;\ncount__9315_9679 \x3d G__9701;\ni__9316_9680 \x3d G__9702;\ncontinue;\n} else {\nvar i_9703 \x3d cljs.core.first(seq__9313_9696__$1);\nvar c__8853__auto___9704 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695){\nreturn (function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d ((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695){\nreturn (function (state_9358){\nvar state_val_9359 \x3d (state_9358[(1)]);\nif((state_val_9359 \x3d\x3d\x3d (1))){\nvar inst_9353 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_9354 \x3d chess.engine.worker_engine.load_worker(inst_9353,i_9703);\nvar state_9358__$1 \x3d state_9358;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9358__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_9354);\n} else {\nif((state_val_9359 \x3d\x3d\x3d (2))){\nvar inst_9356 \x3d (state_9358[(2)]);\nvar state_9358__$1 \x3d state_9358;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9358__$1,inst_9356);\n} else {\nreturn null;\n}\n}\n});})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695))\n;\nreturn ((function (seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,switch__8646__auto__,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9360 \x3d [null,null,null,null,null,null,null];\n(statearr_9360[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9360[(1)] \x3d (1));\n\nreturn statearr_9360;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9358){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9358);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9361){var ex__8650__auto__ \x3d e9361;\nvar statearr_9362_9705 \x3d state_9358;\n(statearr_9362_9705[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9358[(4)]))){\nvar statearr_9363_9706 \x3d state_9358;\n(statearr_9363_9706[(1)] \x3d cljs.core.first((state_9358[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9707 \x3d state_9358;\nstate_9358 \x3d G__9707;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9358){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9358);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n;})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,switch__8646__auto__,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695))\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9364 \x3d f__8854__auto__();\n(statearr_9364[(6)] \x3d c__8853__auto___9704);\n\nreturn statearr_9364;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n});})(seq__9313_9677,chunk__9314_9678,count__9315_9679,i__9316_9680,c__8853__auto___9704,i_9703,seq__9313_9696__$1,temp__5735__auto___9695))\n);\n\n\n\nvar G__9708 \x3d cljs.core.next(seq__9313_9696__$1);\nvar G__9709 \x3d null;\nvar G__9710 \x3d (0);\nvar G__9711 \x3d (0);\nseq__9313_9677 \x3d G__9708;\nchunk__9314_9678 \x3d G__9709;\ncount__9315_9679 \x3d G__9710;\ni__9316_9680 \x3d G__9711;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9432){\nvar state_val_9433 \x3d (state_9432[(1)]);\nif((state_val_9433 \x3d\x3d\x3d (7))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9434_9714 \x3d state_9432__$1;\n(statearr_9434_9714[(2)] \x3d false);\n\n(statearr_9434_9714[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (20))){\nvar inst_9411 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9435_9715 \x3d state_9432__$1;\n(statearr_9435_9715[(2)] \x3d inst_9411);\n\n(statearr_9435_9715[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (1))){\nvar state_9432__$1 \x3d state_9432;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9432__$1,(2),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (24))){\nvar inst_9425 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d (function (){var statearr_9436 \x3d state_9432;\n(statearr_9436[(7)] \x3d inst_9425);\n\nreturn statearr_9436;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9432__$1,(25),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (4))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9437_9717 \x3d state_9432__$1;\n(statearr_9437_9717[(2)] \x3d false);\n\n(statearr_9437_9717[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (15))){\nvar inst_9395 \x3d (state_9432[(8)]);\nvar inst_9403 \x3d inst_9395.cljs$lang$protocol_mask$partition0$;\nvar inst_9404 \x3d (inst_9403 \x26 (64));\nvar inst_9405 \x3d inst_9395.cljs$core$ISeq$;\nvar inst_9406 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9405);\nvar inst_9407 \x3d ((inst_9404) || (inst_9406));\nvar state_9432__$1 \x3d state_9432;\nif(cljs.core.truth_(inst_9407)){\nvar statearr_9438_9718 \x3d state_9432__$1;\n(statearr_9438_9718[(1)] \x3d (18));\n\n} else {\nvar statearr_9439_9719 \x3d state_9432__$1;\n(statearr_9439_9719[(1)] \x3d (19));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (21))){\nvar inst_9395 \x3d (state_9432[(8)]);\nvar inst_9416 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9395);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9440_9720 \x3d state_9432__$1;\n(statearr_9440_9720[(2)] \x3d inst_9416);\n\n(statearr_9440_9720[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (13))){\nvar inst_9395 \x3d (state_9432[(8)]);\nvar inst_9400 \x3d (inst_9395 \x3d\x3d null);\nvar inst_9401 \x3d cljs.core.not(inst_9400);\nvar state_9432__$1 \x3d state_9432;\nif(inst_9401){\nvar statearr_9441_9723 \x3d state_9432__$1;\n(statearr_9441_9723[(1)] \x3d (15));\n\n} else {\nvar statearr_9442_9725 \x3d state_9432__$1;\n(statearr_9442_9725[(1)] \x3d (16));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (22))){\nvar inst_9395 \x3d (state_9432[(8)]);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9443_9726 \x3d state_9432__$1;\n(statearr_9443_9726[(2)] \x3d inst_9395);\n\n(statearr_9443_9726[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (6))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9444_9727 \x3d state_9432__$1;\n(statearr_9444_9727[(2)] \x3d true);\n\n(statearr_9444_9727[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (25))){\nvar inst_9425 \x3d (state_9432[(7)]);\nvar inst_9427 \x3d (state_9432[(2)]);\nvar inst_9395 \x3d inst_9425;\nvar inst_9396 \x3d inst_9427;\nvar state_9432__$1 \x3d (function (){var statearr_9445 \x3d state_9432;\n(statearr_9445[(9)] \x3d inst_9396);\n\n(statearr_9445[(8)] \x3d inst_9395);\n\nreturn statearr_9445;\n})();\nvar statearr_9446_9728 \x3d state_9432__$1;\n(statearr_9446_9728[(2)] \x3d null);\n\n(statearr_9446_9728[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (17))){\nvar inst_9414 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d state_9432;\nif(cljs.core.truth_(inst_9414)){\nvar statearr_9447_9729 \x3d state_9432__$1;\n(statearr_9447_9729[(1)] \x3d (21));\n\n} else {\nvar statearr_9448_9730 \x3d state_9432__$1;\n(statearr_9448_9730[(1)] \x3d (22));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (3))){\nvar inst_9369 \x3d (state_9432[(10)]);\nvar inst_9374 \x3d inst_9369.cljs$lang$protocol_mask$partition0$;\nvar inst_9375 \x3d (inst_9374 \x26 (64));\nvar inst_9376 \x3d inst_9369.cljs$core$ISeq$;\nvar inst_9377 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_9376);\nvar inst_9378 \x3d ((inst_9375) || (inst_9377));\nvar state_9432__$1 \x3d state_9432;\nif(cljs.core.truth_(inst_9378)){\nvar statearr_9449_9731 \x3d state_9432__$1;\n(statearr_9449_9731[(1)] \x3d (6));\n\n} else {\nvar statearr_9450_9732 \x3d state_9432__$1;\n(statearr_9450_9732[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (12))){\nvar inst_9369 \x3d (state_9432[(10)]);\nvar inst_9394 \x3d (state_9432[(2)]);\nvar inst_9395 \x3d inst_9369;\nvar inst_9396 \x3d inst_9394;\nvar state_9432__$1 \x3d (function (){var statearr_9451 \x3d state_9432;\n(statearr_9451[(9)] \x3d inst_9396);\n\n(statearr_9451[(8)] \x3d inst_9395);\n\nreturn statearr_9451;\n})();\nvar statearr_9452_9733 \x3d state_9432__$1;\n(statearr_9452_9733[(2)] \x3d null);\n\n(statearr_9452_9733[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (2))){\nvar inst_9369 \x3d (state_9432[(10)]);\nvar inst_9369__$1 \x3d (state_9432[(2)]);\nvar inst_9371 \x3d (inst_9369__$1 \x3d\x3d null);\nvar inst_9372 \x3d cljs.core.not(inst_9371);\nvar state_9432__$1 \x3d (function (){var statearr_9453 \x3d state_9432;\n(statearr_9453[(10)] \x3d inst_9369__$1);\n\nreturn statearr_9453;\n})();\nif(inst_9372){\nvar statearr_9454_9734 \x3d state_9432__$1;\n(statearr_9454_9734[(1)] \x3d (3));\n\n} else {\nvar statearr_9455_9735 \x3d state_9432__$1;\n(statearr_9455_9735[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (23))){\nvar inst_9396 \x3d (state_9432[(9)]);\nvar inst_9419 \x3d (state_9432[(2)]);\nvar inst_9420 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9419,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9421 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9419,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_9422 \x3d (chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2 ? chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2(inst_9396,inst_9421) : chess.engine.worker_engine.submit_command.call(null,inst_9396,inst_9421));\nvar inst_9423 \x3d cljs.core.async.pipe.cljs$core$IFn$_invoke$arity$2(inst_9422,inst_9420);\nvar state_9432__$1 \x3d (function (){var statearr_9456 \x3d state_9432;\n(statearr_9456[(11)] \x3d inst_9423);\n\nreturn statearr_9456;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9432__$1,(24),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (19))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9457_9736 \x3d state_9432__$1;\n(statearr_9457_9736[(2)] \x3d false);\n\n(statearr_9457_9736[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (11))){\nvar inst_9390 \x3d (state_9432[(2)]);\nvar inst_9391 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9390,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_9392 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_9390,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar state_9432__$1 \x3d (function (){var statearr_9458 \x3d state_9432;\n(statearr_9458[(12)] \x3d inst_9392);\n\n(statearr_9458[(13)] \x3d inst_9391);\n\nreturn statearr_9458;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9432__$1,(12),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (9))){\nvar inst_9369 \x3d (state_9432[(10)]);\nvar inst_9387 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_9369);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9459_9737 \x3d state_9432__$1;\n(statearr_9459_9737[(2)] \x3d inst_9387);\n\n(statearr_9459_9737[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (5))){\nvar inst_9385 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d state_9432;\nif(cljs.core.truth_(inst_9385)){\nvar statearr_9460_9738 \x3d state_9432__$1;\n(statearr_9460_9738[(1)] \x3d (9));\n\n} else {\nvar statearr_9461_9739 \x3d state_9432__$1;\n(statearr_9461_9739[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (14))){\nvar inst_9430 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d state_9432;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9432__$1,inst_9430);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (16))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9462_9740 \x3d state_9432__$1;\n(statearr_9462_9740[(2)] \x3d false);\n\n(statearr_9462_9740[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (10))){\nvar inst_9369 \x3d (state_9432[(10)]);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9463_9741 \x3d state_9432__$1;\n(statearr_9463_9741[(2)] \x3d inst_9369);\n\n(statearr_9463_9741[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (18))){\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9464_9742 \x3d state_9432__$1;\n(statearr_9464_9742[(2)] \x3d true);\n\n(statearr_9464_9742[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9433 \x3d\x3d\x3d (8))){\nvar inst_9382 \x3d (state_9432[(2)]);\nvar state_9432__$1 \x3d state_9432;\nvar statearr_9465_9743 \x3d state_9432__$1;\n(statearr_9465_9743[(2)] \x3d inst_9382);\n\n(statearr_9465_9743[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9466 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9466[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9466[(1)] \x3d (1));\n\nreturn statearr_9466;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9432){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9432);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9467){var ex__8650__auto__ \x3d e9467;\nvar statearr_9468_9744 \x3d state_9432;\n(statearr_9468_9744[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9432[(4)]))){\nvar statearr_9469_9745 \x3d state_9432;\n(statearr_9469_9745[(1)] \x3d cljs.core.first((state_9432[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9746 \x3d state_9432;\nstate_9432 \x3d G__9746;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9432){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9432);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9470 \x3d f__8854__auto__();\n(statearr_9470[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9470;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n})()\n;\n}\nchess.engine.worker_engine.submit_command \x3d (function chess$engine$worker_engine$submit_command(worker_chan,form){\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9482){\nvar state_val_9483 \x3d (state_9482[(1)]);\nif((state_val_9483 \x3d\x3d\x3d (1))){\nvar inst_9471 \x3d (state_9482[(7)]);\nvar inst_9471__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_9472 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_9473 \x3d [inst_9471__$1,form];\nvar inst_9474 \x3d cljs.core.PersistentHashMap.fromArrays(inst_9472,inst_9473);\nvar state_9482__$1 \x3d (function (){var statearr_9484 \x3d state_9482;\n(statearr_9484[(7)] \x3d inst_9471__$1);\n\nreturn statearr_9484;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9482__$1,(2),worker_chan,inst_9474);\n} else {\nif((state_val_9483 \x3d\x3d\x3d (2))){\nvar inst_9471 \x3d (state_9482[(7)]);\nvar inst_9476 \x3d (state_9482[(2)]);\nvar state_9482__$1 \x3d (function (){var statearr_9485 \x3d state_9482;\n(statearr_9485[(8)] \x3d inst_9476);\n\nreturn statearr_9485;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9482__$1,(3),inst_9471);\n} else {\nif((state_val_9483 \x3d\x3d\x3d (3))){\nvar inst_9478 \x3d (state_9482[(2)]);\nvar state_9482__$1 \x3d (function (){var statearr_9486 \x3d state_9482;\n(statearr_9486[(9)] \x3d inst_9478);\n\nreturn statearr_9486;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9482__$1,(4),chess.engine.worker_engine.worker_chan_chan,worker_chan);\n} else {\nif((state_val_9483 \x3d\x3d\x3d (4))){\nvar inst_9478 \x3d (state_9482[(9)]);\nvar inst_9480 \x3d (state_9482[(2)]);\nvar state_9482__$1 \x3d (function (){var statearr_9487 \x3d state_9482;\n(statearr_9487[(10)] \x3d inst_9480);\n\nreturn statearr_9487;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9482__$1,inst_9478);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9488 \x3d [null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9488[(0)] \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__);\n\n(statearr_9488[(1)] \x3d (1));\n\nreturn statearr_9488;\n});\nvar chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1 \x3d (function (state_9482){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9482);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9489){var ex__8650__auto__ \x3d e9489;\nvar statearr_9490_9747 \x3d state_9482;\n(statearr_9490_9747[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9482[(4)]))){\nvar statearr_9491_9748 \x3d state_9482;\n(statearr_9491_9748[(1)] \x3d cljs.core.first((state_9482[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9749 \x3d state_9482;\nstate_9482 \x3d G__9749;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__ \x3d function(state_9482){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1.call(this,state_9482);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$submit_command_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$submit_command_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$submit_command_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9492 \x3d f__8854__auto__();\n(statearr_9492[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9492;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n});\nchess.engine.worker_engine.printl \x3d (function chess$engine$worker_engine$printl(var_args){\nvar args__4742__auto__ \x3d [];\nvar len__4736__auto___9750 \x3d arguments.length;\nvar i__4737__auto___9751 \x3d (0);\nwhile(true){\nif((i__4737__auto___9751 \x3c len__4736__auto___9750)){\nargs__4742__auto__.push((arguments[i__4737__auto___9751]));\n\nvar G__9752 \x3d (i__4737__auto___9751 + (1));\ni__4737__auto___9751 \x3d G__9752;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4743__auto__ \x3d ((((0) \x3c args__4742__auto__.length))?(new cljs.core.IndexedSeq(args__4742__auto__.slice((0)),(0),null)):null);\nreturn chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(argseq__4743__auto__);\n});\n\n(chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic \x3d (function (x){\nchess.utils.screen_print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22printl: \x22,x], 0));\n\nreturn cljs.core.last(x);\n}));\n\n(chess.engine.worker_engine.printl.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.engine.worker_engine.printl.cljs$lang$applyTo \x3d (function (seq9493){\nvar self__4724__auto__ \x3d this;\nreturn self__4724__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq9493));\n}));\n\nchess.engine.worker_engine.dispatch \x3d (function chess$engine$worker_engine$dispatch(literal){\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9503){\nvar state_val_9504 \x3d (state_9503[(1)]);\nif((state_val_9504 \x3d\x3d\x3d (1))){\nvar inst_9494 \x3d (state_9503[(7)]);\nvar inst_9494__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_9495 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_9496 \x3d [inst_9494__$1,literal];\nvar inst_9497 \x3d cljs.core.PersistentHashMap.fromArrays(inst_9495,inst_9496);\nvar state_9503__$1 \x3d (function (){var statearr_9505 \x3d state_9503;\n(statearr_9505[(7)] \x3d inst_9494__$1);\n\nreturn statearr_9505;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9503__$1,(2),chess.engine.worker_engine.work_chan,inst_9497);\n} else {\nif((state_val_9504 \x3d\x3d\x3d (2))){\nvar inst_9494 \x3d (state_9503[(7)]);\nvar inst_9499 \x3d (state_9503[(2)]);\nvar state_9503__$1 \x3d (function (){var statearr_9506 \x3d state_9503;\n(statearr_9506[(8)] \x3d inst_9499);\n\nreturn statearr_9506;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9503__$1,(3),inst_9494);\n} else {\nif((state_val_9504 \x3d\x3d\x3d (3))){\nvar inst_9501 \x3d (state_9503[(2)]);\nvar state_9503__$1 \x3d state_9503;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9503__$1,inst_9501);\n} else {\nreturn null;\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9507 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_9507[(0)] \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__);\n\n(statearr_9507[(1)] \x3d (1));\n\nreturn statearr_9507;\n});\nvar chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1 \x3d (function (state_9503){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9503);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9508){var ex__8650__auto__ \x3d e9508;\nvar statearr_9509_9753 \x3d state_9503;\n(statearr_9509_9753[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9503[(4)]))){\nvar statearr_9510_9754 \x3d state_9503;\n(statearr_9510_9754[(1)] \x3d cljs.core.first((state_9503[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9755 \x3d state_9503;\nstate_9503 \x3d G__9755;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__ \x3d function(state_9503){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1.call(this,state_9503);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____0;\nchess$engine$worker_engine$dispatch_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$dispatch_$_state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$dispatch_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9511 \x3d f__8854__auto__();\n(statearr_9511[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9511;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n});\nchess.engine.worker_engine.worker_engine \x3d (function (){\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.t_chess$engine$worker_engine9512 !\x3d\x3d \x27undefined\x27)){\n} else {\n\n/**\n* @constructor\n * @implements {cljs.core.IMeta}\n * @implements {chess.engine.core.Engine}\n * @implements {cljs.core.IWithMeta}\n*/\nchess.engine.worker_engine.t_chess$engine$worker_engine9512 \x3d (function (meta9513){\nthis.meta9513 \x3d meta9513;\nthis.cljs$lang$protocol_mask$partition0$ \x3d 393216;\nthis.cljs$lang$protocol_mask$partition1$ \x3d 0;\n});\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.cljs$core$IWithMeta$_with_meta$arity$2 \x3d (function (_9514,meta9513__$1){\nvar self__ \x3d this;\nvar _9514__$1 \x3d this;\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9512(meta9513__$1));\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.cljs$core$IMeta$_meta$arity$1 \x3d (function (_9514){\nvar self__ \x3d this;\nvar _9514__$1 \x3d this;\nreturn self__.meta9513;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.chess$engine$core$Engine$ \x3d cljs.core.PROTOCOL_SENTINEL);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.chess$engine$core$Engine$apply_move$arity$3 \x3d (function (_,board,move){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9525){\nvar state_val_9526 \x3d (state_9525[(1)]);\nif((state_val_9526 \x3d\x3d\x3d (1))){\nvar inst_9516 \x3d (function (){return (function (form9515){\nif((((form9515 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9515,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),board);\n} else {\nif((((form9515 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9515,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),move);\n} else {\nreturn form9515;\n\n}\n}\n});\n})();\nvar inst_9517 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)));\nvar inst_9518 \x3d clojure.walk.postwalk(inst_9516,inst_9517);\nvar inst_9519 \x3d chess.engine.worker_engine.dispatch(inst_9518);\nvar state_9525__$1 \x3d state_9525;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9525__$1,(2),inst_9519);\n} else {\nif((state_val_9526 \x3d\x3d\x3d (2))){\nvar inst_9521 \x3d (state_9525[(2)]);\nvar inst_9522 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9521);\nvar inst_9523 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9522], 0));\nvar state_9525__$1 \x3d state_9525;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9525__$1,inst_9523);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9527 \x3d [null,null,null,null,null,null,null];\n(statearr_9527[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9527[(1)] \x3d (1));\n\nreturn statearr_9527;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9525){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9525);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9528){var ex__8650__auto__ \x3d e9528;\nvar statearr_9529_9756 \x3d state_9525;\n(statearr_9529_9756[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9525[(4)]))){\nvar statearr_9530_9757 \x3d state_9525;\n(statearr_9530_9757[(1)] \x3d cljs.core.first((state_9525[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9758 \x3d state_9525;\nstate_9525 \x3d G__9758;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9525){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9525);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9531 \x3d f__8854__auto__();\n(statearr_9531[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9531;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.chess$engine$core$Engine$possible_moves$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9542){\nvar state_val_9543 \x3d (state_9542[(1)]);\nif((state_val_9543 \x3d\x3d\x3d (1))){\nvar inst_9533 \x3d (function (){return (function (form9532){\nif((((form9532 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9532,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),board);\n} else {\nif((((form9532 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9532,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),color);\n} else {\nreturn form9532;\n\n}\n}\n});\n})();\nvar inst_9534 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)));\nvar inst_9535 \x3d clojure.walk.postwalk(inst_9533,inst_9534);\nvar inst_9536 \x3d chess.engine.worker_engine.dispatch(inst_9535);\nvar state_9542__$1 \x3d state_9542;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9542__$1,(2),inst_9536);\n} else {\nif((state_val_9543 \x3d\x3d\x3d (2))){\nvar inst_9538 \x3d (state_9542[(2)]);\nvar inst_9539 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9538);\nvar inst_9540 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9539], 0));\nvar state_9542__$1 \x3d state_9542;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9542__$1,inst_9540);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9544 \x3d [null,null,null,null,null,null,null];\n(statearr_9544[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9544[(1)] \x3d (1));\n\nreturn statearr_9544;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9542){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9542);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9545){var ex__8650__auto__ \x3d e9545;\nvar statearr_9546_9786 \x3d state_9542;\n(statearr_9546_9786[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9542[(4)]))){\nvar statearr_9547_9787 \x3d state_9542;\n(statearr_9547_9787[(1)] \x3d cljs.core.first((state_9542[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9788 \x3d state_9542;\nstate_9542 \x3d G__9788;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9542){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9542);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9548 \x3d f__8854__auto__();\n(statearr_9548[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9548;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.prototype.chess$engine$core$Engine$best_move$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9562){\nvar state_val_9563 \x3d (state_9562[(1)]);\nif((state_val_9563 \x3d\x3d\x3d (1))){\nvar inst_9549 \x3d (function (){return (function (a,b){\nreturn cljs.core.cons(b,a);\n});\n})();\nvar inst_9550 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_9551 \x3d (function (){return (function (move){\nvar c__8853__auto____$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9574){\nvar state_val_9575 \x3d (state_9574[(1)]);\nif((state_val_9575 \x3d\x3d\x3d (1))){\nvar inst_9565 \x3d (function (){return (function (form9564){\nif((((form9564 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9564,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),board);\n} else {\nif((((form9564 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form9564,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__7087__7088__auto__){\nif(cljs.core.seq_QMARK_(p1__7087__7088__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__7087__7088__auto__);\n} else {\nreturn p1__7087__7088__auto__;\n}\n}),move);\n} else {\nreturn form9564;\n\n}\n}\n});\n})();\nvar inst_9566 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null)], null)], null))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),cljs.core.list(new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),(2))], null));\nvar inst_9567 \x3d clojure.walk.postwalk(inst_9565,inst_9566);\nvar inst_9568 \x3d chess.engine.worker_engine.dispatch(inst_9567);\nvar state_9574__$1 \x3d state_9574;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9574__$1,(2),inst_9568);\n} else {\nif((state_val_9575 \x3d\x3d\x3d (2))){\nvar inst_9570 \x3d (state_9574[(2)]);\nvar inst_9571 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_9570);\nvar inst_9572 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_9571], 0));\nvar state_9574__$1 \x3d state_9574;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9574__$1,inst_9572);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9576 \x3d [null,null,null,null,null,null,null];\n(statearr_9576[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9576[(1)] \x3d (1));\n\nreturn statearr_9576;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9574){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9574);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9577){var ex__8650__auto__ \x3d e9577;\nvar statearr_9578_9806 \x3d state_9574;\n(statearr_9578_9806[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9574[(4)]))){\nvar statearr_9579_9814 \x3d state_9574;\n(statearr_9579_9814[(1)] \x3d cljs.core.first((state_9574[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9834 \x3d state_9574;\nstate_9574 \x3d G__9834;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9574){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9574);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9580 \x3d f__8854__auto__();\n(statearr_9580[(6)] \x3d c__8853__auto____$1);\n\nreturn statearr_9580;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto____$1;\n});\n})();\nvar inst_9552 \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,board,color);\nvar inst_9553 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_9551,inst_9552);\nvar inst_9554 \x3d cljs.core.async.merge.cljs$core$IFn$_invoke$arity$1(inst_9553);\nvar inst_9555 \x3d cljs.core.async.reduce(inst_9549,inst_9550,inst_9554);\nvar state_9562__$1 \x3d state_9562;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9562__$1,(2),inst_9555);\n} else {\nif((state_val_9563 \x3d\x3d\x3d (2))){\nvar inst_9557 \x3d (state_9562[(2)]);\nvar inst_9558 \x3d chess.utils.maxf(cljs.core.second,inst_9557);\nvar inst_9559 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22final result\x22,inst_9558], 0));\nvar inst_9560 \x3d cljs.core.first(inst_9559);\nvar state_9562__$1 \x3d state_9562;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9562__$1,inst_9560);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__8647__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9581 \x3d [null,null,null,null,null,null,null];\n(statearr_9581[(0)] \x3d chess$engine$worker_engine$state_machine__8647__auto__);\n\n(statearr_9581[(1)] \x3d (1));\n\nreturn statearr_9581;\n});\nvar chess$engine$worker_engine$state_machine__8647__auto____1 \x3d (function (state_9562){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9562);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9582){var ex__8650__auto__ \x3d e9582;\nvar statearr_9583_9838 \x3d state_9562;\n(statearr_9583_9838[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9562[(4)]))){\nvar statearr_9584_9839 \x3d state_9562;\n(statearr_9584_9839[(1)] \x3d cljs.core.first((state_9562[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9841 \x3d state_9562;\nstate_9562 \x3d G__9841;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__8647__auto__ \x3d function(state_9562){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__8647__auto____1.call(this,state_9562);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__8647__auto____0;\nchess$engine$worker_engine$state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__8647__auto____1;\nreturn chess$engine$worker_engine$state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9585 \x3d f__8854__auto__();\n(statearr_9585[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9585;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.getBasis \x3d (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22meta9513\x22,\x22meta9513\x22,-1800602503,null)], null);\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.cljs$lang$type \x3d true);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.cljs$lang$ctorStr \x3d \x22chess.engine.worker-engine/t_chess$engine$worker_engine9512\x22);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine9512.cljs$lang$ctorPrWriter \x3d (function (this__4369__auto__,writer__4370__auto__,opt__4371__auto__){\nreturn cljs.core._write(writer__4370__auto__,\x22chess.engine.worker-engine/t_chess$engine$worker_engine9512\x22);\n}));\n\n/**\n * Positional factory function for chess.engine.worker-engine/t_chess$engine$worker_engine9512.\n */\nchess.engine.worker_engine.__GT_t_chess$engine$worker_engine9512 \x3d (function chess$engine$worker_engine$__GT_t_chess$engine$worker_engine9512(meta9513){\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9512(meta9513));\n});\n\n}\n\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine9512(cljs.core.PersistentArrayMap.EMPTY));\n})()\n;\n");
SHADOW_ENV.evalLoad("chess.engine.hook.js", true , "goog.provide(\x27chess.engine.hook\x27);\nchess.engine.hook.use_async_engine \x3d (function chess$engine$hook$use_async_engine(clc__7188__auto__){\nvar hooked_use_state9759 \x3d html_cljs.hooks.use_state(clc__7188__auto__);\nvar hooked_use_state9760 \x3d html_cljs.hooks.use_state(clc__7188__auto__);\nvar hooked_use_state9761 \x3d html_cljs.hooks.use_state(clc__7188__auto__);\nvar hooked_use_effect9762 \x3d html_cljs.hooks.use_effect(clc__7188__auto__);\nreturn (function (my_color,status_chan){\nvar vec__9763 \x3d hooked_use_state9759(my_color);\nvar getcolor \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9763,(0),null);\nvar setcolor \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9763,(1),null);\nvar vec__9766 \x3d hooked_use_state9760(chess.engine.core.init_board);\nvar getboard \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9766,(0),null);\nvar setboard \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9766,(1),null);\nvar vec__9769 \x3d hooked_use_state9761(cljs.core.PersistentVector.EMPTY);\nvar getmoves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9769,(0),null);\nvar setmoves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9769,(1),null);\nvar set_effect \x3d hooked_use_effect9762();\nvar G__9772_9849 \x3d (function (){\nvar c__8853__auto___9850 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9784){\nvar state_val_9785 \x3d (state_9784[(1)]);\nif((state_val_9785 \x3d\x3d\x3d (1))){\nvar state_9784__$1 \x3d state_9784;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9784__$1,(2),status_chan,\x22loading bootstraped workers\x22);\n} else {\nif((state_val_9785 \x3d\x3d\x3d (2))){\nvar inst_9774 \x3d (state_9784[(2)]);\nvar inst_9775 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9776 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_9775,my_color);\nvar state_9784__$1 \x3d (function (){var statearr_9789 \x3d state_9784;\n(statearr_9789[(7)] \x3d inst_9774);\n\nreturn statearr_9789;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9784__$1,(3),inst_9776);\n} else {\nif((state_val_9785 \x3d\x3d\x3d (3))){\nvar inst_9778 \x3d (state_9784[(2)]);\nvar state_9784__$1 \x3d (function (){var statearr_9790 \x3d state_9784;\n(statearr_9790[(8)] \x3d inst_9778);\n\nreturn statearr_9790;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9784__$1,(4),status_chan,\x22white\x27s turn!\x22);\n} else {\nif((state_val_9785 \x3d\x3d\x3d (4))){\nvar inst_9778 \x3d (state_9784[(8)]);\nvar inst_9780 \x3d (state_9784[(2)]);\nvar inst_9781 \x3d (function (){var init_moves \x3d inst_9778;\nreturn (function (){\nreturn init_moves;\n});\n})();\nvar inst_9782 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9781) : setmoves.call(null,inst_9781));\nvar state_9784__$1 \x3d (function (){var statearr_9791 \x3d state_9784;\n(statearr_9791[(9)] \x3d inst_9780);\n\nreturn statearr_9791;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9784__$1,inst_9782);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9792 \x3d [null,null,null,null,null,null,null,null,null,null];\n(statearr_9792[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto__);\n\n(statearr_9792[(1)] \x3d (1));\n\nreturn statearr_9792;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1 \x3d (function (state_9784){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9784);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9793){var ex__8650__auto__ \x3d e9793;\nvar statearr_9794_9851 \x3d state_9784;\n(statearr_9794_9851[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9784[(4)]))){\nvar statearr_9795_9852 \x3d state_9784;\n(statearr_9795_9852[(1)] \x3d cljs.core.first((state_9784[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9853 \x3d state_9784;\nstate_9784 \x3d G__9853;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d function(state_9784){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1.call(this,state_9784);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9796 \x3d f__8854__auto__();\n(statearr_9796[(6)] \x3d c__8853__auto___9850);\n\nreturn statearr_9796;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\n\nreturn cljs.core.identity;\n});\n(set_effect.cljs$core$IFn$_invoke$arity$1 ? set_effect.cljs$core$IFn$_invoke$arity$1(G__9772_9849) : set_effect.call(null,G__9772_9849));\n\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null)),(getmoves.cljs$core$IFn$_invoke$arity$0 ? getmoves.cljs$core$IFn$_invoke$arity$0() : getmoves.call(null)),(function (move){\nvar c__8853__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9832){\nvar state_val_9833 \x3d (state_9832[(1)]);\nif((state_val_9833 \x3d\x3d\x3d (1))){\nvar inst_9797 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9798 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_9797,move);\nvar state_9832__$1 \x3d state_9832;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9832__$1,(2),inst_9798);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (2))){\nvar inst_9800 \x3d (state_9832[(2)]);\nvar inst_9801 \x3d (setcolor.cljs$core$IFn$_invoke$arity$1 ? setcolor.cljs$core$IFn$_invoke$arity$1(chess.engine.core.other_color) : setcolor.call(null,chess.engine.core.other_color));\nvar inst_9802 \x3d (function (){var my_board \x3d inst_9800;\nreturn (function (){\nreturn my_board;\n});\n})();\nvar inst_9803 \x3d (setboard.cljs$core$IFn$_invoke$arity$1 ? setboard.cljs$core$IFn$_invoke$arity$1(inst_9802) : setboard.call(null,inst_9802));\nvar inst_9804 \x3d (function (){return (function (){\nreturn cljs.core.PersistentVector.EMPTY;\n});\n})();\nvar inst_9805 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9804) : setmoves.call(null,inst_9804));\nvar state_9832__$1 \x3d (function (){var statearr_9835 \x3d state_9832;\n(statearr_9835[(7)] \x3d inst_9805);\n\n(statearr_9835[(8)] \x3d inst_9803);\n\n(statearr_9835[(9)] \x3d inst_9801);\n\nreturn statearr_9835;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9832__$1,(3),status_chan,\x22loading move\x22);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (3))){\nvar inst_9808 \x3d (state_9832[(2)]);\nvar inst_9809 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9810 \x3d chess.engine.core.other_color(my_color);\nvar inst_9811 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$best_move$arity$3(null,inst_9809,inst_9810);\nvar state_9832__$1 \x3d (function (){var statearr_9836 \x3d state_9832;\n(statearr_9836[(10)] \x3d inst_9808);\n\nreturn statearr_9836;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9832__$1,(4),inst_9811);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (4))){\nvar inst_9813 \x3d (state_9832[(11)]);\nvar inst_9813__$1 \x3d (state_9832[(2)]);\nvar inst_9815 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9816 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_9815,inst_9813__$1);\nvar state_9832__$1 \x3d (function (){var statearr_9837 \x3d state_9832;\n(statearr_9837[(11)] \x3d inst_9813__$1);\n\nreturn statearr_9837;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9832__$1,(5),inst_9816);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (5))){\nvar inst_9813 \x3d (state_9832[(11)]);\nvar inst_9818 \x3d (state_9832[(2)]);\nvar inst_9819 \x3d (function (){var opp_move \x3d inst_9813;\nvar new_board \x3d inst_9818;\nreturn (function (){\nreturn new_board;\n});\n})();\nvar inst_9820 \x3d (setboard.cljs$core$IFn$_invoke$arity$1 ? setboard.cljs$core$IFn$_invoke$arity$1(inst_9819) : setboard.call(null,inst_9819));\nvar inst_9821 \x3d (getboard.cljs$core$IFn$_invoke$arity$0 ? getboard.cljs$core$IFn$_invoke$arity$0() : getboard.call(null));\nvar inst_9822 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_9821,my_color);\nvar state_9832__$1 \x3d (function (){var statearr_9840 \x3d state_9832;\n(statearr_9840[(12)] \x3d inst_9820);\n\nreturn statearr_9840;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9832__$1,(6),inst_9822);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (6))){\nvar inst_9824 \x3d (state_9832[(2)]);\nvar inst_9825 \x3d (function (){var new_moves \x3d inst_9824;\nreturn (function (){\nreturn new_moves;\n});\n})();\nvar inst_9826 \x3d (setmoves.cljs$core$IFn$_invoke$arity$1 ? setmoves.cljs$core$IFn$_invoke$arity$1(inst_9825) : setmoves.call(null,inst_9825));\nvar state_9832__$1 \x3d (function (){var statearr_9842 \x3d state_9832;\n(statearr_9842[(13)] \x3d inst_9826);\n\nreturn statearr_9842;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_9832__$1,(7),status_chan,\x22white\x27s turn\x22);\n} else {\nif((state_val_9833 \x3d\x3d\x3d (7))){\nvar inst_9828 \x3d (state_9832[(2)]);\nvar inst_9829 \x3d (function (){return (function (){\nreturn my_color;\n});\n})();\nvar inst_9830 \x3d (setcolor.cljs$core$IFn$_invoke$arity$1 ? setcolor.cljs$core$IFn$_invoke$arity$1(inst_9829) : setcolor.call(null,inst_9829));\nvar state_9832__$1 \x3d (function (){var statearr_9843 \x3d state_9832;\n(statearr_9843[(14)] \x3d inst_9828);\n\nreturn statearr_9843;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9832__$1,inst_9830);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9844 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_9844[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto__);\n\n(statearr_9844[(1)] \x3d (1));\n\nreturn statearr_9844;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1 \x3d (function (state_9832){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9832);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9845){var ex__8650__auto__ \x3d e9845;\nvar statearr_9846_9854 \x3d state_9832;\n(statearr_9846_9854[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9832[(4)]))){\nvar statearr_9847_9855 \x3d state_9832;\n(statearr_9847_9855[(1)] \x3d cljs.core.first((state_9832[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9856 \x3d state_9832;\nstate_9832 \x3d G__9856;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__ \x3d function(state_9832){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1.call(this,state_9832);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__8647__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9848 \x3d f__8854__auto__();\n(statearr_9848[(6)] \x3d c__8853__auto__);\n\nreturn statearr_9848;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\nreturn c__8853__auto__;\n})], null);\n});\n});\n");
SHADOW_ENV.evalLoad("chess.core.js", true , "goog.provide(\x27chess.core\x27);\nchess.core.use_chan \x3d (function chess$core$use_chan(clc__7188__auto__){\nvar hooked_use_state9857 \x3d html_cljs.hooks.use_state(clc__7188__auto__);\nvar hooked_use_effect9858 \x3d html_cljs.hooks.use_effect(clc__7188__auto__);\nreturn (function (channel){\nvar vec__9859 \x3d hooked_use_state9857(\x22no status\x22);\nvar cur \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9859,(0),null);\nvar setcur \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9859,(1),null);\nvar seteffect \x3d hooked_use_effect9858();\nvar G__9862_9928 \x3d (function (){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22mounting hook\x22], 0));\n\nvar c__8853__auto___9929 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__8854__auto__ \x3d (function (){var switch__8646__auto__ \x3d (function (state_9882){\nvar state_val_9883 \x3d (state_9882[(1)]);\nif((state_val_9883 \x3d\x3d\x3d (1))){\nvar state_9882__$1 \x3d state_9882;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9882__$1,(2),channel);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (2))){\nvar inst_9864 \x3d (state_9882[(2)]);\nvar inst_9865 \x3d inst_9864;\nvar state_9882__$1 \x3d (function (){var statearr_9884 \x3d state_9882;\n(statearr_9884[(7)] \x3d inst_9865);\n\nreturn statearr_9884;\n})();\nvar statearr_9885_9930 \x3d state_9882__$1;\n(statearr_9885_9930[(2)] \x3d null);\n\n(statearr_9885_9930[(1)] \x3d (3));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (3))){\nvar inst_9865 \x3d (state_9882[(7)]);\nvar state_9882__$1 \x3d state_9882;\nif(cljs.core.truth_(inst_9865)){\nvar statearr_9886_9931 \x3d state_9882__$1;\n(statearr_9886_9931[(1)] \x3d (5));\n\n} else {\nvar statearr_9887_9932 \x3d state_9882__$1;\n(statearr_9887_9932[(1)] \x3d (6));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (4))){\nvar inst_9880 \x3d (state_9882[(2)]);\nvar state_9882__$1 \x3d state_9882;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_9882__$1,inst_9880);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (5))){\nvar inst_9865 \x3d (state_9882[(7)]);\nvar inst_9868 \x3d cljs.core.println.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22putting \x22,inst_9865], 0));\nvar inst_9869 \x3d (function (){var item \x3d inst_9865;\nvar temp__5733__auto__ \x3d inst_9865;\nreturn (function (){\nreturn item;\n});\n})();\nvar inst_9870 \x3d (setcur.cljs$core$IFn$_invoke$arity$1 ? setcur.cljs$core$IFn$_invoke$arity$1(inst_9869) : setcur.call(null,inst_9869));\nvar state_9882__$1 \x3d (function (){var statearr_9888 \x3d state_9882;\n(statearr_9888[(8)] \x3d inst_9870);\n\n(statearr_9888[(9)] \x3d inst_9868);\n\nreturn statearr_9888;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_9882__$1,(8),channel);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (6))){\nvar inst_9865 \x3d (state_9882[(7)]);\nvar inst_9875 \x3d (function (){var item \x3d inst_9865;\nvar temp__5733__auto__ \x3d inst_9865;\nreturn (function (){\nreturn null;\n});\n})();\nvar inst_9876 \x3d (setcur.cljs$core$IFn$_invoke$arity$1 ? setcur.cljs$core$IFn$_invoke$arity$1(inst_9875) : setcur.call(null,inst_9875));\nvar state_9882__$1 \x3d state_9882;\nvar statearr_9889_9933 \x3d state_9882__$1;\n(statearr_9889_9933[(2)] \x3d inst_9876);\n\n(statearr_9889_9933[(1)] \x3d (7));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (7))){\nvar inst_9878 \x3d (state_9882[(2)]);\nvar state_9882__$1 \x3d state_9882;\nvar statearr_9890_9934 \x3d state_9882__$1;\n(statearr_9890_9934[(2)] \x3d inst_9878);\n\n(statearr_9890_9934[(1)] \x3d (4));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_9883 \x3d\x3d\x3d (8))){\nvar inst_9872 \x3d (state_9882[(2)]);\nvar inst_9865 \x3d inst_9872;\nvar state_9882__$1 \x3d (function (){var statearr_9891 \x3d state_9882;\n(statearr_9891[(7)] \x3d inst_9865);\n\nreturn statearr_9891;\n})();\nvar statearr_9892_9935 \x3d state_9882__$1;\n(statearr_9892_9935[(2)] \x3d null);\n\n(statearr_9892_9935[(1)] \x3d (3));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$core$use_chan_$_state_machine__8647__auto__ \x3d null;\nvar chess$core$use_chan_$_state_machine__8647__auto____0 \x3d (function (){\nvar statearr_9893 \x3d [null,null,null,null,null,null,null,null,null,null];\n(statearr_9893[(0)] \x3d chess$core$use_chan_$_state_machine__8647__auto__);\n\n(statearr_9893[(1)] \x3d (1));\n\nreturn statearr_9893;\n});\nvar chess$core$use_chan_$_state_machine__8647__auto____1 \x3d (function (state_9882){\nwhile(true){\nvar ret_value__8648__auto__ \x3d (function (){try{while(true){\nvar result__8649__auto__ \x3d switch__8646__auto__(state_9882);\nif(cljs.core.keyword_identical_QMARK_(result__8649__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__8649__auto__;\n}\nbreak;\n}\n}catch (e9894){var ex__8650__auto__ \x3d e9894;\nvar statearr_9895_9936 \x3d state_9882;\n(statearr_9895_9936[(2)] \x3d ex__8650__auto__);\n\n\nif(cljs.core.seq((state_9882[(4)]))){\nvar statearr_9896_9937 \x3d state_9882;\n(statearr_9896_9937[(1)] \x3d cljs.core.first((state_9882[(4)])));\n\n} else {\nthrow ex__8650__auto__;\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__8648__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__9938 \x3d state_9882;\nstate_9882 \x3d G__9938;\ncontinue;\n} else {\nreturn ret_value__8648__auto__;\n}\nbreak;\n}\n});\nchess$core$use_chan_$_state_machine__8647__auto__ \x3d function(state_9882){\nswitch(arguments.length){\ncase 0:\nreturn chess$core$use_chan_$_state_machine__8647__auto____0.call(this);\ncase 1:\nreturn chess$core$use_chan_$_state_machine__8647__auto____1.call(this,state_9882);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$core$use_chan_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$core$use_chan_$_state_machine__8647__auto____0;\nchess$core$use_chan_$_state_machine__8647__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$core$use_chan_$_state_machine__8647__auto____1;\nreturn chess$core$use_chan_$_state_machine__8647__auto__;\n})()\n})();\nvar state__8855__auto__ \x3d (function (){var statearr_9897 \x3d f__8854__auto__();\n(statearr_9897[(6)] \x3d c__8853__auto___9929);\n\nreturn statearr_9897;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__8855__auto__);\n}));\n\n\nreturn cljs.core.identity;\n});\n(seteffect.cljs$core$IFn$_invoke$arity$1 ? seteffect.cljs$core$IFn$_invoke$arity$1(G__9862_9928) : seteffect.call(null,G__9862_9928));\n\nreturn (cur.cljs$core$IFn$_invoke$arity$0 ? cur.cljs$core$IFn$_invoke$arity$0() : cur.call(null));\n});\n});\nchess.core.abs \x3d (function chess$core$abs(n){\nvar x__4214__auto__ \x3d n;\nvar y__4215__auto__ \x3d (- n);\nreturn ((x__4214__auto__ \x3e y__4215__auto__) ? x__4214__auto__ : y__4215__auto__);\n});\nchess.core.dots \x3d (function chess$core$dots(clc__7188__auto__){\nvar hooked_use_interval9898 \x3d html_cljs.hooks.use_interval(clc__7188__auto__);\nreturn (function (){\nvar vec__9899 \x3d hooked_use_interval9898((300));\nvar t \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9899,(0),null);\nvar togglet \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9899,(1),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),(function (){var numdots \x3d chess.core.abs((cljs.core.mod(t,(6)) - (3)));\nreturn cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.str,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (){\nreturn \x22.\x22;\n}),cljs.core.range.cljs$core$IFn$_invoke$arity$1(numdots)));\n})()], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9902){\nvar vec__9903 \x3d p__9902;\nvar seq__9904 \x3d cljs.core.seq(vec__9903);\nvar first__9905 \x3d cljs.core.first(seq__9904);\nvar seq__9904__$1 \x3d cljs.core.next(seq__9904);\nvar c__7208__auto__ \x3d first__9905;\nvar _ \x3d seq__9904__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n});\nchess.core.status_bar \x3d (function chess$core$status_bar(clc__7188__auto__){\nvar hooked_use_chan9906 \x3d chess.core.use_chan(clc__7188__auto__);\nvar hooked_use_effect9907 \x3d html_cljs.hooks.use_effect(clc__7188__auto__);\nreturn (function (status_chan){\nvar status \x3d hooked_use_chan9906(status_chan);\nvar seteffect \x3d hooked_use_effect9907();\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22text-align\x22,\x22left\x22,\x22margin-left\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9908){\nvar vec__9909 \x3d p__9908;\nvar seq__9910 \x3d cljs.core.seq(vec__9909);\nvar first__9911 \x3d cljs.core.first(seq__9910);\nvar seq__9910__$1 \x3d cljs.core.next(seq__9910);\nvar c__7208__auto__ \x3d first__9911;\nvar _ \x3d seq__9910__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7188__auto____$1){\nreturn (function (status__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),status__$1], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9912){\nvar vec__9913 \x3d p__9912;\nvar seq__9914 \x3d cljs.core.seq(vec__9913);\nvar first__9915 \x3d cljs.core.first(seq__9914);\nvar seq__9914__$1 \x3d cljs.core.next(seq__9914);\nvar c__7208__auto__ \x3d first__9915;\nvar _ \x3d seq__9914__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,status,null,(1),null)),(2),null)),(new cljs.core.List(null,((clojure.string.includes_QMARK_(status,\x22loading\x22))?(new cljs.core.List(null,chess.core.dots,null,(1),null)):null),null,(1),null)),(2),null)))),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,(new cljs.core.List(null,(new cljs.core.List(null,(function (clc__7188__auto____$1){\nreturn (function (status__$1){\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22span\x22,new cljs.core.Keyword(null,\x22content\x22,\x22content\x22,15833224),status__$1], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9916){\nvar vec__9917 \x3d p__9916;\nvar seq__9918 \x3d cljs.core.seq(vec__9917);\nvar first__9919 \x3d cljs.core.first(seq__9918);\nvar seq__9918__$1 \x3d cljs.core.next(seq__9918);\nvar c__7208__auto__ \x3d first__9919;\nvar _ \x3d seq__9918__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),cljs.core.List.EMPTY),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,cljs.core.List.EMPTY))));\n});\n}),(new cljs.core.List(null,status,null,(1),null)),(2),null)),(new cljs.core.List(null,((clojure.string.includes_QMARK_(status,\x22loading\x22))?(new cljs.core.List(null,chess.core.dots,null,(1),null)):null),null,(1),null)),(2),null)))))));\n});\n});\nchess.core.game \x3d (function chess$core$game(){\nvar status_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((2));\nreturn (function (clc__7188__auto__){\nvar hooked_use_async_engine9920 \x3d chess.engine.hook.use_async_engine(clc__7188__auto__);\nreturn (function (){\nvar vec__9921 \x3d hooked_use_async_engine9920(new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),status_chan);\nvar board_data \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9921,(0),null);\nvar moves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9921,(1),null);\nvar on_move \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__9921,(2),null);\nreturn html_cljs.html.map__GT_ElementInfo(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22width\x22,\x22100%\x22,\x22height\x22,\x22100%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.map.cljs$core$IFn$_invoke$arity$3(cljs.core.vector,cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p__9924){\nvar vec__9925 \x3d p__9924;\nvar seq__9926 \x3d cljs.core.seq(vec__9925);\nvar first__9927 \x3d cljs.core.first(seq__9926);\nvar seq__9926__$1 \x3d cljs.core.next(seq__9926);\nvar c__7208__auto__ \x3d first__9927;\nvar _ \x3d seq__9926__$1;\nif((c__7208__auto__ instanceof cljs.core.Symbol)){\ncljs.core.print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22wow. got symbol\x22,c__7208__auto__], 0));\n\n} else {\n}\n\nreturn c__7208__auto__;\n}),(new cljs.core.List(null,(new cljs.core.List(null,chess.core.status_bar,(new cljs.core.List(null,status_chan,null,(1),null)),(2),null)),(new cljs.core.List(null,(new cljs.core.List(null,chess.components.board.board,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),(new cljs.core.List(null,board_data,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),(new cljs.core.List(null,moves,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),(8),null)),(9),null)),null,(1),null)),(2),null))),cljs.core.map.cljs$core$IFn$_invoke$arity$2(cljs.core.rest,(new cljs.core.List(null,(new cljs.core.List(null,chess.core.status_bar,(new cljs.core.List(null,status_chan,null,(1),null)),(2),null)),(new cljs.core.List(null,(new cljs.core.List(null,chess.components.board.board,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),(new cljs.core.List(null,board_data,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),(new cljs.core.List(null,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),(new cljs.core.List(null,moves,(new cljs.core.List(null,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),(new cljs.core.List(null,on_move,null,(1),null)),(2),null)),(3),null)),(4),null)),(5),null)),(6),null)),(7),null)),(8),null)),(9),null)),null,(1),null)),(2),null))))));\n});\n});\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.core !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.core.mounted !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.core.mounted \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(null);\n}\nchess.core.mount_root \x3d (function chess$core$mount_root(component){\nreturn cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$2(chess.core.mounted,(function (old_vdom_node){\nif((!((old_vdom_node \x3d\x3d null)))){\nhtml_cljs.html.destroy_node(old_vdom_node);\n} else {\n}\n\nreturn html_cljs.html.mount(document.getElementById(\x22app\x22),component);\n}));\n});\nchess.core.init \x3d (function chess$core$init(){\nreturn chess.core.mount_root(chess.core.game());\n});\ngoog.exportSymbol(\x27chess.core.init\x27, chess.core.init);\n");
SHADOW_ENV.evalLoad("shadow.module.main.append.js", false , "\ntry { chess.core.init(); } catch (e) { console.error(\x22An error occurred when calling (chess.core/init)\x22); throw(e); };\nSHADOW_ENV.setLoaded(\x22chess.components.board.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.worker_engine.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.hook.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.core.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.main.append.js\x22);\nshadow.cljs.bootstrap.env.set_loaded([\x22chess.components.board\x22,\x22chess.engine.worker-engine\x22,\x22shadow.module.main.append\x22,\x22chess.engine.hook\x22,\x22chess.core\x22]);\n");