SHADOW_ENV.evalLoad("chess.components.square.js", true , "goog.provide(\x27chess.components.square\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27chess.utils\x27);\nchess.components.square.square \x3d (function chess$components$square$square(props){\n\nvar has_piece \x3d (!(((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : props.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))) \x3d\x3d null)));\nvar style \x3d new cljs.core.PersistentArrayMap(null, 4, [\x22float\x22,\x22left\x22,\x22width\x22,\x2215%\x22,\x22background\x22,(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : props.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))))?\x22#40aad4\x22:(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653)) : props.call(null,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653))))?\x22#4ae896\x22:(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913)) : props.call(null,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913))))?\x22#ada284\x22:\x22#fff\x22\n))),\x22border\x22,(cljs.core.truth_((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653)) : props.call(null,new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653))))?\x221px dotted #40aad4\x22:\x221px solid #999\x22\n)], null);\nreturn (function (vdom_state__25572__auto__){\nvar hook_instances__25573__auto__ \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),style,new cljs.core.Keyword(null,\x22on\x22,\x22on\x22,173873944),new cljs.core.PersistentArrayMap(null, 1, [\x22click\x22,(function (){\nvar fexpr__27350 \x3d (props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543)) : props.call(null,new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543)));\nreturn (fexpr__27350.cljs$core$IFn$_invoke$arity$0 ? fexpr__27350.cljs$core$IFn$_invoke$arity$0() : fexpr__27350.call(null));\n})], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((has_piece)?(function (vdom_state__25572__auto____$1){\nvar hook_instances__25573__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22img\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 1, [\x22width\x22,\x2290%\x22], null),new cljs.core.Keyword(null,\x22elem-props\x22,\x22elem-props\x22,917346836),new cljs.core.PersistentArrayMap(null, 1, [\x22src\x22,chess.utils.asset_path([\x22/pieces/\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : props.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)))),\x22_\x22,cljs.core.str.cljs$core$IFn$_invoke$arity$1((props.cljs$core$IFn$_invoke$arity$1 ? props.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : props.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)))),\x22.svg\x22].join(\x27\x27))], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(cljs.core.PersistentVector.EMPTY));\n});\n}):cljs.core.List.EMPTY)], null)));\n});\n});\n});\n");
SHADOW_ENV.evalLoad("chess.components.board.js", true , "goog.provide(\x27chess.components.board\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.components.square\x27);\ngoog.require(\x27html_cljs.hooks\x27);\ngoog.require(\x27chess.utils\x27);\ngoog.require(\x27html_cljs.html\x27);\nchess.components.board.find_move \x3d (function chess$components$board$find_move(moves,move){\nvar vec__27359 \x3d move;\nvar mfrom \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27359,(0),null);\nvar mto \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27359,(1),null);\nreturn cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p__27366){\nvar vec__27367 \x3d p__27366;\nvar from \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27367,(0),null);\nvar to \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27367,(1),null);\nif(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(from,mfrom)){\nif((mto \x3d\x3d null)){\nreturn true;\n} else {\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(to,mto);\n}\n} else {\nreturn false;\n}\n}),moves);\n});\nchess.components.board.uiify \x3d (function chess$components$board$uiify(sq,i,j,state,set_state,moves,on_move){\nvar vec__27377 \x3d chess.components.board.find_move(moves,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null)], null));\nvar move_here \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27377,(0),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(sq,new cljs.core.Keyword(null,\x22tint\x22,\x22tint\x22,-1286736913),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.mod((j + cljs.core.mod(i,(2))),(2)),(0)),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22on-click\x22,\x22on-click\x22,1632826543),(function (){\nif((move_here \x3d\x3d null)){\nvar G__27380 \x3d (function (p1__27370_SHARP_){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(p1__27370_SHARP_,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null));\n});\nreturn (set_state.cljs$core$IFn$_invoke$arity$1 ? set_state.cljs$core$IFn$_invoke$arity$1(G__27380) : set_state.call(null,G__27380));\n} else {\nreturn (on_move.cljs$core$IFn$_invoke$arity$1 ? on_move.cljs$core$IFn$_invoke$arity$1(move_here) : on_move.call(null,move_here));\n}\n}),new cljs.core.Keyword(null,\x22can-move-to\x22,\x22can-move-to\x22,260990653),(!((move_here \x3d\x3d null))),new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,j], null),(state.cljs$core$IFn$_invoke$arity$1 ? state.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)) : state.call(null,new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764)))),new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784)) : sq.call(null,new cljs.core.Keyword(null,\x22piece\x22,\x22piece\x22,1396691784))),(function (p1__27371_SHARP_){\nreturn cljs.core.name(p1__27371_SHARP_);\n})),new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173),chess.utils.nilmap((sq.cljs$core$IFn$_invoke$arity$1 ? sq.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173)) : sq.call(null,new cljs.core.Keyword(null,\x22color\x22,\x22color\x22,1011675173))),(function (p1__27372_SHARP_){\nreturn cljs.core.name(p1__27372_SHARP_);\n}))], 0));\n});\nchess.components.board.board \x3d (function chess$components$board$board(var_args){\nvar args__4795__auto__ \x3d [];\nvar len__4789__auto___27531 \x3d arguments.length;\nvar i__4790__auto___27532 \x3d (0);\nwhile(true){\nif((i__4790__auto___27532 \x3c len__4789__auto___27531)){\nargs__4795__auto__.push((arguments[i__4790__auto___27532]));\n\nvar G__27533 \x3d (i__4790__auto___27532 + (1));\ni__4790__auto___27532 \x3d G__27533;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4796__auto__ \x3d ((((0) \x3c args__4795__auto__.length))?(new cljs.core.IndexedSeq(args__4795__auto__.slice((0)),(0),null)):null);\nreturn chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic(argseq__4796__auto__);\n});\n\n(chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic \x3d (function (p__27383){\nvar map__27384 \x3d p__27383;\nvar map__27384__$1 \x3d (((((!((map__27384 \x3d\x3d null))))?(((((map__27384.cljs$lang$protocol_mask$partition0$ \x26 (64))) || ((cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d map__27384.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__27384):map__27384);\nvar board \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__27384__$1,new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633));\nvar player \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__27384__$1,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400));\nvar moves \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__27384__$1,new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255));\nvar on_move \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__27384__$1,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710));\n\nvar board_size \x3d (0.9 * (function (){var x__4276__auto__ \x3d window.innerWidth;\nvar y__4277__auto__ \x3d window.innerHeight;\nreturn ((x__4276__auto__ \x3c y__4277__auto__) ? x__4276__auto__ : y__4277__auto__);\n})());\nreturn (function (vdom_state__25572__auto__){\nvar hook_instances__25573__auto__ \x3d new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [html_cljs.hooks.use_state(new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,\x22selected\x22,\x22selected\x22,574897764),null], null))], null);\nreturn (function (){\nvar vec__27395 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__25574__25575__auto__){\nreturn (p1__25574__25575__auto__.cljs$core$IFn$_invoke$arity$1 ? p1__25574__25575__auto__.cljs$core$IFn$_invoke$arity$1(vdom_state__25572__auto__) : p1__25574__25575__auto__.call(null,vdom_state__25572__auto__));\n}),hook_instances__25573__auto__);\nvar vec__27398 \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27395,(0),null);\nvar state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27398,(0),null);\nvar set_state \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27398,(1),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 4, [\x22width\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22height\x22,[cljs.core.str.cljs$core$IFn$_invoke$arity$1(board_size),\x22px\x22].join(\x27\x27),\x22display\x22,\x22inline-block\x22,\x22margin\x22,\x225px\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d (function chess$components$board$iter__27405(s__27406){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__27406__$1 \x3d s__27406;\nwhile(true){\nvar temp__5735__auto__ \x3d cljs.core.seq(s__27406__$1);\nif(temp__5735__auto__){\nvar s__27406__$2 \x3d temp__5735__auto__;\nif(cljs.core.chunked_seq_QMARK_(s__27406__$2)){\nvar c__4580__auto__ \x3d cljs.core.chunk_first(s__27406__$2);\nvar size__4581__auto__ \x3d cljs.core.count(c__4580__auto__);\nvar b__27408 \x3d cljs.core.chunk_buffer(size__4581__auto__);\nif((function (){var i__27407 \x3d (0);\nwhile(true){\nif((i__27407 \x3c size__4581__auto__)){\nvar vec__27418 \x3d cljs.core._nth(c__4580__auto__,i__27407);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27418,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27418,(1),null);\ncljs.core.chunk_append(b__27408,((function (i__27407,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move){\nreturn (function (vdom_state__25572__auto____$1){\nvar hook_instances__25573__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn ((function (i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move){\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d ((function (i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move){\nreturn (function chess$components$board$iter__27405_$_iter__27428(s__27429){\nreturn (new cljs.core.LazySeq(null,((function (i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move){\nreturn (function (){\nvar s__27429__$1 \x3d s__27429;\nwhile(true){\nvar temp__5735__auto____$1 \x3d cljs.core.seq(s__27429__$1);\nif(temp__5735__auto____$1){\nvar s__27429__$2 \x3d temp__5735__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__27429__$2)){\nvar c__4580__auto____$1 \x3d cljs.core.chunk_first(s__27429__$2);\nvar size__4581__auto____$1 \x3d cljs.core.count(c__4580__auto____$1);\nvar b__27431 \x3d cljs.core.chunk_buffer(size__4581__auto____$1);\nif((function (){var i__27430 \x3d (0);\nwhile(true){\nif((i__27430 \x3c size__4581__auto____$1)){\nvar vec__27443 \x3d cljs.core._nth(c__4580__auto____$1,i__27430);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27443,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27443,(1),null);\ncljs.core.chunk_append(b__27431,chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)));\n\nvar G__27555 \x3d (i__27430 + (1));\ni__27430 \x3d G__27555;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27431),chess$components$board$iter__27405_$_iter__27428(cljs.core.chunk_rest(s__27429__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27431),null);\n}\n} else {\nvar vec__27453 \x3d cljs.core.first(s__27429__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27453,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27453,(1),null);\nreturn cljs.core.cons(chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)),chess$components$board$iter__27405_$_iter__27428(cljs.core.rest(s__27429__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n});})(i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move))\n,null,null));\n});})(i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move))\n;\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n;})(i__27407,hook_instances__25573__auto____$1,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move))\n});})(i__27407,vec__27418,row,i,c__4580__auto__,size__4581__auto__,b__27408,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move))\n);\n\nvar G__27564 \x3d (i__27407 + (1));\ni__27407 \x3d G__27564;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27408),chess$components$board$iter__27405(cljs.core.chunk_rest(s__27406__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27408),null);\n}\n} else {\nvar vec__27470 \x3d cljs.core.first(s__27406__$2);\nvar row \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27470,(0),null);\nvar i \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27470,(1),null);\nreturn cljs.core.cons(((function (vec__27470,row,i,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move){\nreturn (function (vdom_state__25572__auto____$1){\nvar hook_instances__25573__auto____$1 \x3d cljs.core.PersistentVector.EMPTY;\nreturn (function (){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22display\x22,\x22flex\x22,\x22height\x22,\x2213%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (){var iter__4582__auto__ \x3d (function chess$components$board$iter__27405_$_iter__27474(s__27475){\nreturn (new cljs.core.LazySeq(null,(function (){\nvar s__27475__$1 \x3d s__27475;\nwhile(true){\nvar temp__5735__auto____$1 \x3d cljs.core.seq(s__27475__$1);\nif(temp__5735__auto____$1){\nvar s__27475__$2 \x3d temp__5735__auto____$1;\nif(cljs.core.chunked_seq_QMARK_(s__27475__$2)){\nvar c__4580__auto__ \x3d cljs.core.chunk_first(s__27475__$2);\nvar size__4581__auto__ \x3d cljs.core.count(c__4580__auto__);\nvar b__27477 \x3d cljs.core.chunk_buffer(size__4581__auto__);\nif((function (){var i__27476 \x3d (0);\nwhile(true){\nif((i__27476 \x3c size__4581__auto__)){\nvar vec__27490 \x3d cljs.core._nth(c__4580__auto__,i__27476);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27490,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27490,(1),null);\ncljs.core.chunk_append(b__27477,chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)));\n\nvar G__27581 \x3d (i__27476 + (1));\ni__27476 \x3d G__27581;\ncontinue;\n} else {\nreturn true;\n}\nbreak;\n}\n})()){\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27477),chess$components$board$iter__27405_$_iter__27474(cljs.core.chunk_rest(s__27475__$2)));\n} else {\nreturn cljs.core.chunk_cons(cljs.core.chunk(b__27477),null);\n}\n} else {\nvar vec__27497 \x3d cljs.core.first(s__27475__$2);\nvar sq \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27497,(0),null);\nvar j \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27497,(1),null);\nreturn cljs.core.cons(chess.components.square.square(chess.components.board.uiify(sq,i,j,state,set_state,moves,on_move)),chess$components$board$iter__27405_$_iter__27474(cljs.core.rest(s__27475__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([row,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n});})(vec__27470,row,i,s__27406__$2,temp__5735__auto__,vec__27395,vec__27398,state,set_state,hook_instances__25573__auto__,board_size,map__27384,map__27384__$1,board,player,moves,on_move))\n,chess$components$board$iter__27405(cljs.core.rest(s__27406__$2)));\n}\n} else {\nreturn null;\n}\nbreak;\n}\n}),null,null));\n});\nreturn iter__4582__auto__(chess.utils.zip.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([board,cljs.core.range.cljs$core$IFn$_invoke$arity$1((8))], 0)));\n})()], null)));\n});\n});\n}));\n\n(chess.components.board.board.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.components.board.board.cljs$lang$applyTo \x3d (function (seq27382){\nvar self__4777__auto__ \x3d this;\nreturn self__4777__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq27382));\n}));\n\n");
SHADOW_ENV.evalLoad("chess.engine.worker_engine.js", true , "goog.provide(\x27chess.engine.worker_engine\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.engine.core\x27);\ngoog.require(\x27cljs.core.async\x27);\ngoog.require(\x27chess.engine.local_engine\x27);\ngoog.require(\x27cljs.reader\x27);\ngoog.require(\x27clojure.walk\x27);\ngoog.require(\x27chess.utils\x27);\n\nchess.engine.worker_engine.load_worker \x3d (function chess$engine$worker_engine$load_worker(filename,id){\n\nvar c \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar reply_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar worker \x3d (new Worker(filename));\n(worker[\x22onmessage\x22] \x3d (function (e){\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_41841){\nvar state_val_41842 \x3d (state_41841[(1)]);\nif((state_val_41842 \x3d\x3d\x3d (1))){\nvar inst_41836 \x3d e.data;\nvar inst_41837 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$1(inst_41836) : chess.engine.worker_engine.printl.call(null,inst_41836));\nvar state_41841__$1 \x3d state_41841;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_41841__$1,(2),reply_chan,inst_41837);\n} else {\nif((state_val_41842 \x3d\x3d\x3d (2))){\nvar inst_41839 \x3d (state_41841[(2)]);\nvar state_41841__$1 \x3d state_41841;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_41841__$1,inst_41839);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_41843 \x3d [null,null,null,null,null,null,null];\n(statearr_41843[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__);\n\n(statearr_41843[(1)] \x3d (1));\n\nreturn statearr_41843;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1 \x3d (function (state_41841){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_41841);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e41844){if((e41844 instanceof Object)){\nvar ex__27097__auto__ \x3d e41844;\nvar statearr_41845_42227 \x3d state_41841;\n(statearr_41845_42227[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_41841);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e41844;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42228 \x3d state_41841;\nstate_41841 \x3d G__42228;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__ \x3d function(state_41841){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1.call(this,state_41841);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_41846 \x3d f__27117__auto__();\n(statearr_41846[(6)] \x3d c__27116__auto__);\n\nreturn statearr_41846;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n}));\n\nvar c__27116__auto___42229 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_41923){\nvar state_val_41924 \x3d (state_41923[(1)]);\nif((state_val_41924 \x3d\x3d\x3d (7))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41925_42230 \x3d state_41923__$1;\n(statearr_41925_42230[(2)] \x3d false);\n\n(statearr_41925_42230[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (20))){\nvar inst_41875 \x3d (state_41923[(7)]);\nvar inst_41895 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_41875);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41926_42231 \x3d state_41923__$1;\n(statearr_41926_42231[(2)] \x3d inst_41895);\n\n(statearr_41926_42231[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (27))){\nvar inst_41899 \x3d (state_41923[(8)]);\nvar inst_41908 \x3d (state_41923[(2)]);\nvar inst_41909 \x3d cljs.reader.read_string.cljs$core$IFn$_invoke$arity$1(inst_41908);\nvar state_41923__$1 \x3d state_41923;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_41923__$1,(26),inst_41899,inst_41909);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (1))){\nvar state_41923__$1 \x3d state_41923;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_41923__$1,(2),c);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (24))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41927_42232 \x3d state_41923__$1;\n(statearr_41927_42232[(2)] \x3d null);\n\n(statearr_41927_42232[(1)] \x3d (25));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (4))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41928_42233 \x3d state_41923__$1;\n(statearr_41928_42233[(2)] \x3d false);\n\n(statearr_41928_42233[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (15))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41929_42234 \x3d state_41923__$1;\n(statearr_41929_42234[(2)] \x3d false);\n\n(statearr_41929_42234[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (21))){\nvar inst_41875 \x3d (state_41923[(7)]);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41930_42235 \x3d state_41923__$1;\n(statearr_41930_42235[(2)] \x3d inst_41875);\n\n(statearr_41930_42235[(1)] \x3d (22));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (13))){\nvar inst_41921 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_41923__$1,inst_41921);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (22))){\nvar inst_41900 \x3d (state_41923[(9)]);\nvar inst_41898 \x3d (state_41923[(2)]);\nvar inst_41899 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_41898,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_41900__$1 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_41898,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_41901 \x3d (inst_41900__$1 \x3d\x3d null);\nvar inst_41902 \x3d cljs.core.not(inst_41901);\nvar state_41923__$1 \x3d (function (){var statearr_41931 \x3d state_41923;\n(statearr_41931[(9)] \x3d inst_41900__$1);\n\n(statearr_41931[(8)] \x3d inst_41899);\n\nreturn statearr_41931;\n})();\nif(inst_41902){\nvar statearr_41932_42236 \x3d state_41923__$1;\n(statearr_41932_42236[(1)] \x3d (23));\n\n} else {\nvar statearr_41933_42237 \x3d state_41923__$1;\n(statearr_41933_42237[(1)] \x3d (24));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (6))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41934_42238 \x3d state_41923__$1;\n(statearr_41934_42238[(2)] \x3d true);\n\n(statearr_41934_42238[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (28))){\nvar inst_41915 \x3d (state_41923[(2)]);\nvar inst_41875 \x3d inst_41915;\nvar state_41923__$1 \x3d (function (){var statearr_41935 \x3d state_41923;\n(statearr_41935[(7)] \x3d inst_41875);\n\nreturn statearr_41935;\n})();\nvar statearr_41936_42239 \x3d state_41923__$1;\n(statearr_41936_42239[(2)] \x3d null);\n\n(statearr_41936_42239[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (25))){\nvar inst_41919 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41937_42240 \x3d state_41923__$1;\n(statearr_41937_42240[(2)] \x3d inst_41919);\n\n(statearr_41937_42240[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (17))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41938_42241 \x3d state_41923__$1;\n(statearr_41938_42241[(2)] \x3d true);\n\n(statearr_41938_42241[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (3))){\nvar inst_41851 \x3d (state_41923[(10)]);\nvar inst_41856 \x3d inst_41851.cljs$lang$protocol_mask$partition0$;\nvar inst_41857 \x3d (inst_41856 \x26 (64));\nvar inst_41858 \x3d inst_41851.cljs$core$ISeq$;\nvar inst_41859 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_41858);\nvar inst_41860 \x3d ((inst_41857) || (inst_41859));\nvar state_41923__$1 \x3d state_41923;\nif(cljs.core.truth_(inst_41860)){\nvar statearr_41939_42242 \x3d state_41923__$1;\n(statearr_41939_42242[(1)] \x3d (6));\n\n} else {\nvar statearr_41940_42243 \x3d state_41923__$1;\n(statearr_41940_42243[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (12))){\nvar inst_41875 \x3d (state_41923[(7)]);\nvar inst_41879 \x3d (inst_41875 \x3d\x3d null);\nvar inst_41880 \x3d cljs.core.not(inst_41879);\nvar state_41923__$1 \x3d state_41923;\nif(inst_41880){\nvar statearr_41941_42244 \x3d state_41923__$1;\n(statearr_41941_42244[(1)] \x3d (14));\n\n} else {\nvar statearr_41942_42245 \x3d state_41923__$1;\n(statearr_41942_42245[(1)] \x3d (15));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (2))){\nvar inst_41851 \x3d (state_41923[(10)]);\nvar inst_41851__$1 \x3d (state_41923[(2)]);\nvar inst_41853 \x3d (inst_41851__$1 \x3d\x3d null);\nvar inst_41854 \x3d cljs.core.not(inst_41853);\nvar state_41923__$1 \x3d (function (){var statearr_41943 \x3d state_41923;\n(statearr_41943[(10)] \x3d inst_41851__$1);\n\nreturn statearr_41943;\n})();\nif(inst_41854){\nvar statearr_41944_42246 \x3d state_41923__$1;\n(statearr_41944_42246[(1)] \x3d (3));\n\n} else {\nvar statearr_41945_42247 \x3d state_41923__$1;\n(statearr_41945_42247[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (23))){\nvar inst_41900 \x3d (state_41923[(9)]);\nvar inst_41904 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 starting work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 starting work\x22));\nvar inst_41905 \x3d cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_41900], 0));\nvar inst_41906 \x3d worker.postMessage(inst_41905);\nvar state_41923__$1 \x3d (function (){var statearr_41946 \x3d state_41923;\n(statearr_41946[(11)] \x3d inst_41906);\n\n(statearr_41946[(12)] \x3d inst_41904);\n\nreturn statearr_41946;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_41923__$1,(27),reply_chan);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (19))){\nvar inst_41890 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41947_42248 \x3d state_41923__$1;\n(statearr_41947_42248[(2)] \x3d inst_41890);\n\n(statearr_41947_42248[(1)] \x3d (16));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (11))){\nvar inst_41851 \x3d (state_41923[(10)]);\nvar inst_41872 \x3d (state_41923[(2)]);\nvar inst_41873 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_41872,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_41874 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_41872,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_41875 \x3d inst_41851;\nvar state_41923__$1 \x3d (function (){var statearr_41948 \x3d state_41923;\n(statearr_41948[(13)] \x3d inst_41873);\n\n(statearr_41948[(7)] \x3d inst_41875);\n\n(statearr_41948[(14)] \x3d inst_41874);\n\nreturn statearr_41948;\n})();\nvar statearr_41949_42249 \x3d state_41923__$1;\n(statearr_41949_42249[(2)] \x3d null);\n\n(statearr_41949_42249[(1)] \x3d (12));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (9))){\nvar inst_41851 \x3d (state_41923[(10)]);\nvar inst_41869 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_41851);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41950_42250 \x3d state_41923__$1;\n(statearr_41950_42250[(2)] \x3d inst_41869);\n\n(statearr_41950_42250[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (5))){\nvar inst_41867 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nif(cljs.core.truth_(inst_41867)){\nvar statearr_41951_42251 \x3d state_41923__$1;\n(statearr_41951_42251[(1)] \x3d (9));\n\n} else {\nvar statearr_41952_42252 \x3d state_41923__$1;\n(statearr_41952_42252[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (14))){\nvar inst_41875 \x3d (state_41923[(7)]);\nvar inst_41882 \x3d inst_41875.cljs$lang$protocol_mask$partition0$;\nvar inst_41883 \x3d (inst_41882 \x26 (64));\nvar inst_41884 \x3d inst_41875.cljs$core$ISeq$;\nvar inst_41885 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_41884);\nvar inst_41886 \x3d ((inst_41883) || (inst_41885));\nvar state_41923__$1 \x3d state_41923;\nif(cljs.core.truth_(inst_41886)){\nvar statearr_41953_42253 \x3d state_41923__$1;\n(statearr_41953_42253[(1)] \x3d (17));\n\n} else {\nvar statearr_41954_42254 \x3d state_41923__$1;\n(statearr_41954_42254[(1)] \x3d (18));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (26))){\nvar inst_41899 \x3d (state_41923[(8)]);\nvar inst_41911 \x3d (state_41923[(2)]);\nvar inst_41912 \x3d (chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3 ? chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$3(\x22worker \x22,id,\x22 finished work\x22) : chess.engine.worker_engine.printl.call(null,\x22worker \x22,id,\x22 finished work\x22));\nvar inst_41913 \x3d cljs.core.async.close_BANG_(inst_41899);\nvar state_41923__$1 \x3d (function (){var statearr_41955 \x3d state_41923;\n(statearr_41955[(15)] \x3d inst_41913);\n\n(statearr_41955[(16)] \x3d inst_41911);\n\n(statearr_41955[(17)] \x3d inst_41912);\n\nreturn statearr_41955;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_41923__$1,(28),c);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (16))){\nvar inst_41893 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nif(cljs.core.truth_(inst_41893)){\nvar statearr_41956_42264 \x3d state_41923__$1;\n(statearr_41956_42264[(1)] \x3d (20));\n\n} else {\nvar statearr_41957_42265 \x3d state_41923__$1;\n(statearr_41957_42265[(1)] \x3d (21));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (10))){\nvar inst_41851 \x3d (state_41923[(10)]);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41958_42266 \x3d state_41923__$1;\n(statearr_41958_42266[(2)] \x3d inst_41851);\n\n(statearr_41958_42266[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (18))){\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41959_42267 \x3d state_41923__$1;\n(statearr_41959_42267[(2)] \x3d false);\n\n(statearr_41959_42267[(1)] \x3d (19));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_41924 \x3d\x3d\x3d (8))){\nvar inst_41864 \x3d (state_41923[(2)]);\nvar state_41923__$1 \x3d state_41923;\nvar statearr_41960_42268 \x3d state_41923__$1;\n(statearr_41960_42268[(2)] \x3d inst_41864);\n\n(statearr_41960_42268[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_41961 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_41961[(0)] \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__);\n\n(statearr_41961[(1)] \x3d (1));\n\nreturn statearr_41961;\n});\nvar chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1 \x3d (function (state_41923){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_41923);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e41962){if((e41962 instanceof Object)){\nvar ex__27097__auto__ \x3d e41962;\nvar statearr_41963_42270 \x3d state_41923;\n(statearr_41963_42270[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_41923);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e41962;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42272 \x3d state_41923;\nstate_41923 \x3d G__42272;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__ \x3d function(state_41923){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1.call(this,state_41923);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____0;\nchess$engine$worker_engine$load_worker_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$load_worker_$_state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$load_worker_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_41964 \x3d f__27117__auto__();\n(statearr_41964[(6)] \x3d c__27116__auto___42229);\n\nreturn statearr_41964;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\n\nreturn c;\n});\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.work_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.work_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.worker_chan_chan !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine.worker_chan_chan \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((30));\n}\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine._ !\x3d\x3d \x27undefined\x27)){\n} else {\nchess.engine.worker_engine._ \x3d (function (){\nvar seq__41965_42275 \x3d cljs.core.seq(cljs.core.range.cljs$core$IFn$_invoke$arity$1((4)));\nvar chunk__41966_42276 \x3d null;\nvar count__41967_42277 \x3d (0);\nvar i__41968_42278 \x3d (0);\nwhile(true){\nif((i__41968_42278 \x3c count__41967_42277)){\nvar i_42280 \x3d chunk__41966_42276.cljs$core$IIndexed$_nth$arity$2(null,i__41968_42278);\nvar c__27116__auto___42281 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42281,i_42280){\nreturn (function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d ((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42281,i_42280){\nreturn (function (state_41996){\nvar state_val_41997 \x3d (state_41996[(1)]);\nif((state_val_41997 \x3d\x3d\x3d (1))){\nvar inst_41991 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_41992 \x3d chess.engine.worker_engine.load_worker(inst_41991,i_42280);\nvar state_41996__$1 \x3d state_41996;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_41996__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_41992);\n} else {\nif((state_val_41997 \x3d\x3d\x3d (2))){\nvar inst_41994 \x3d (state_41996[(2)]);\nvar state_41996__$1 \x3d state_41996;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_41996__$1,inst_41994);\n} else {\nreturn null;\n}\n}\n});})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42281,i_42280))\n;\nreturn ((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,switch__27093__auto__,c__27116__auto___42281,i_42280){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_41998 \x3d [null,null,null,null,null,null,null];\n(statearr_41998[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_41998[(1)] \x3d (1));\n\nreturn statearr_41998;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_41996){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_41996);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e41999){if((e41999 instanceof Object)){\nvar ex__27097__auto__ \x3d e41999;\nvar statearr_42000_42310 \x3d state_41996;\n(statearr_42000_42310[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_41996);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e41999;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42311 \x3d state_41996;\nstate_41996 \x3d G__42311;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_41996){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_41996);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n;})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,switch__27093__auto__,c__27116__auto___42281,i_42280))\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42001 \x3d f__27117__auto__();\n(statearr_42001[(6)] \x3d c__27116__auto___42281);\n\nreturn statearr_42001;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n});})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42281,i_42280))\n);\n\n\n\nvar G__42312 \x3d seq__41965_42275;\nvar G__42313 \x3d chunk__41966_42276;\nvar G__42314 \x3d count__41967_42277;\nvar G__42315 \x3d (i__41968_42278 + (1));\nseq__41965_42275 \x3d G__42312;\nchunk__41966_42276 \x3d G__42313;\ncount__41967_42277 \x3d G__42314;\ni__41968_42278 \x3d G__42315;\ncontinue;\n} else {\nvar temp__5735__auto___42316 \x3d cljs.core.seq(seq__41965_42275);\nif(temp__5735__auto___42316){\nvar seq__41965_42317__$1 \x3d temp__5735__auto___42316;\nif(cljs.core.chunked_seq_QMARK_(seq__41965_42317__$1)){\nvar c__4609__auto___42318 \x3d cljs.core.chunk_first(seq__41965_42317__$1);\nvar G__42320 \x3d cljs.core.chunk_rest(seq__41965_42317__$1);\nvar G__42321 \x3d c__4609__auto___42318;\nvar G__42322 \x3d cljs.core.count(c__4609__auto___42318);\nvar G__42323 \x3d (0);\nseq__41965_42275 \x3d G__42320;\nchunk__41966_42276 \x3d G__42321;\ncount__41967_42277 \x3d G__42322;\ni__41968_42278 \x3d G__42323;\ncontinue;\n} else {\nvar i_42324 \x3d cljs.core.first(seq__41965_42317__$1);\nvar c__27116__auto___42325 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run(((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316){\nreturn (function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d ((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316){\nreturn (function (state_42007){\nvar state_val_42008 \x3d (state_42007[(1)]);\nif((state_val_42008 \x3d\x3d\x3d (1))){\nvar inst_42002 \x3d chess.utils.asset_path(\x22/js/worker.js\x22);\nvar inst_42003 \x3d chess.engine.worker_engine.load_worker(inst_42002,i_42324);\nvar state_42007__$1 \x3d state_42007;\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_42007__$1,(2),chess.engine.worker_engine.worker_chan_chan,inst_42003);\n} else {\nif((state_val_42008 \x3d\x3d\x3d (2))){\nvar inst_42005 \x3d (state_42007[(2)]);\nvar state_42007__$1 \x3d state_42007;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42007__$1,inst_42005);\n} else {\nreturn null;\n}\n}\n});})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316))\n;\nreturn ((function (seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,switch__27093__auto__,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316){\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42009 \x3d [null,null,null,null,null,null,null];\n(statearr_42009[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42009[(1)] \x3d (1));\n\nreturn statearr_42009;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42007){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42007);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42010){if((e42010 instanceof Object)){\nvar ex__27097__auto__ \x3d e42010;\nvar statearr_42011_42328 \x3d state_42007;\n(statearr_42011_42328[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42007);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42010;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42330 \x3d state_42007;\nstate_42007 \x3d G__42330;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42007){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42007);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n;})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,switch__27093__auto__,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316))\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42012 \x3d f__27117__auto__();\n(statearr_42012[(6)] \x3d c__27116__auto___42325);\n\nreturn statearr_42012;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n});})(seq__41965_42275,chunk__41966_42276,count__41967_42277,i__41968_42278,c__27116__auto___42325,i_42324,seq__41965_42317__$1,temp__5735__auto___42316))\n);\n\n\n\nvar G__42333 \x3d cljs.core.next(seq__41965_42317__$1);\nvar G__42334 \x3d null;\nvar G__42335 \x3d (0);\nvar G__42336 \x3d (0);\nseq__41965_42275 \x3d G__42333;\nchunk__41966_42276 \x3d G__42334;\ncount__41967_42277 \x3d G__42335;\ni__41968_42278 \x3d G__42336;\ncontinue;\n}\n} else {\n}\n}\nbreak;\n}\n\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42080){\nvar state_val_42081 \x3d (state_42080[(1)]);\nif((state_val_42081 \x3d\x3d\x3d (7))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42082_42337 \x3d state_42080__$1;\n(statearr_42082_42337[(2)] \x3d false);\n\n(statearr_42082_42337[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (20))){\nvar inst_42059 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42083_42339 \x3d state_42080__$1;\n(statearr_42083_42339[(2)] \x3d inst_42059);\n\n(statearr_42083_42339[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (1))){\nvar state_42080__$1 \x3d state_42080;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42080__$1,(2),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (24))){\nvar inst_42073 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d (function (){var statearr_42084 \x3d state_42080;\n(statearr_42084[(7)] \x3d inst_42073);\n\nreturn statearr_42084;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42080__$1,(25),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (4))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42085_42340 \x3d state_42080__$1;\n(statearr_42085_42340[(2)] \x3d false);\n\n(statearr_42085_42340[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (15))){\nvar inst_42043 \x3d (state_42080[(8)]);\nvar inst_42051 \x3d inst_42043.cljs$lang$protocol_mask$partition0$;\nvar inst_42052 \x3d (inst_42051 \x26 (64));\nvar inst_42053 \x3d inst_42043.cljs$core$ISeq$;\nvar inst_42054 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_42053);\nvar inst_42055 \x3d ((inst_42052) || (inst_42054));\nvar state_42080__$1 \x3d state_42080;\nif(cljs.core.truth_(inst_42055)){\nvar statearr_42086_42341 \x3d state_42080__$1;\n(statearr_42086_42341[(1)] \x3d (18));\n\n} else {\nvar statearr_42087_42342 \x3d state_42080__$1;\n(statearr_42087_42342[(1)] \x3d (19));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (21))){\nvar inst_42043 \x3d (state_42080[(8)]);\nvar inst_42064 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_42043);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42088_42343 \x3d state_42080__$1;\n(statearr_42088_42343[(2)] \x3d inst_42064);\n\n(statearr_42088_42343[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (13))){\nvar inst_42043 \x3d (state_42080[(8)]);\nvar inst_42048 \x3d (inst_42043 \x3d\x3d null);\nvar inst_42049 \x3d cljs.core.not(inst_42048);\nvar state_42080__$1 \x3d state_42080;\nif(inst_42049){\nvar statearr_42089_42344 \x3d state_42080__$1;\n(statearr_42089_42344[(1)] \x3d (15));\n\n} else {\nvar statearr_42090_42345 \x3d state_42080__$1;\n(statearr_42090_42345[(1)] \x3d (16));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (22))){\nvar inst_42043 \x3d (state_42080[(8)]);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42091_42346 \x3d state_42080__$1;\n(statearr_42091_42346[(2)] \x3d inst_42043);\n\n(statearr_42091_42346[(1)] \x3d (23));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (6))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42092_42348 \x3d state_42080__$1;\n(statearr_42092_42348[(2)] \x3d true);\n\n(statearr_42092_42348[(1)] \x3d (8));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (25))){\nvar inst_42073 \x3d (state_42080[(7)]);\nvar inst_42075 \x3d (state_42080[(2)]);\nvar inst_42043 \x3d inst_42073;\nvar inst_42044 \x3d inst_42075;\nvar state_42080__$1 \x3d (function (){var statearr_42093 \x3d state_42080;\n(statearr_42093[(9)] \x3d inst_42044);\n\n(statearr_42093[(8)] \x3d inst_42043);\n\nreturn statearr_42093;\n})();\nvar statearr_42094_42349 \x3d state_42080__$1;\n(statearr_42094_42349[(2)] \x3d null);\n\n(statearr_42094_42349[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (17))){\nvar inst_42062 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d state_42080;\nif(cljs.core.truth_(inst_42062)){\nvar statearr_42095_42350 \x3d state_42080__$1;\n(statearr_42095_42350[(1)] \x3d (21));\n\n} else {\nvar statearr_42096_42351 \x3d state_42080__$1;\n(statearr_42096_42351[(1)] \x3d (22));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (3))){\nvar inst_42017 \x3d (state_42080[(10)]);\nvar inst_42022 \x3d inst_42017.cljs$lang$protocol_mask$partition0$;\nvar inst_42023 \x3d (inst_42022 \x26 (64));\nvar inst_42024 \x3d inst_42017.cljs$core$ISeq$;\nvar inst_42025 \x3d (cljs.core.PROTOCOL_SENTINEL \x3d\x3d\x3d inst_42024);\nvar inst_42026 \x3d ((inst_42023) || (inst_42025));\nvar state_42080__$1 \x3d state_42080;\nif(cljs.core.truth_(inst_42026)){\nvar statearr_42097_42352 \x3d state_42080__$1;\n(statearr_42097_42352[(1)] \x3d (6));\n\n} else {\nvar statearr_42098_42353 \x3d state_42080__$1;\n(statearr_42098_42353[(1)] \x3d (7));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (12))){\nvar inst_42017 \x3d (state_42080[(10)]);\nvar inst_42042 \x3d (state_42080[(2)]);\nvar inst_42043 \x3d inst_42017;\nvar inst_42044 \x3d inst_42042;\nvar state_42080__$1 \x3d (function (){var statearr_42099 \x3d state_42080;\n(statearr_42099[(9)] \x3d inst_42044);\n\n(statearr_42099[(8)] \x3d inst_42043);\n\nreturn statearr_42099;\n})();\nvar statearr_42100_42356 \x3d state_42080__$1;\n(statearr_42100_42356[(2)] \x3d null);\n\n(statearr_42100_42356[(1)] \x3d (13));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (2))){\nvar inst_42017 \x3d (state_42080[(10)]);\nvar inst_42017__$1 \x3d (state_42080[(2)]);\nvar inst_42019 \x3d (inst_42017__$1 \x3d\x3d null);\nvar inst_42020 \x3d cljs.core.not(inst_42019);\nvar state_42080__$1 \x3d (function (){var statearr_42101 \x3d state_42080;\n(statearr_42101[(10)] \x3d inst_42017__$1);\n\nreturn statearr_42101;\n})();\nif(inst_42020){\nvar statearr_42102_42357 \x3d state_42080__$1;\n(statearr_42102_42357[(1)] \x3d (3));\n\n} else {\nvar statearr_42103_42358 \x3d state_42080__$1;\n(statearr_42103_42358[(1)] \x3d (4));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (23))){\nvar inst_42044 \x3d (state_42080[(9)]);\nvar inst_42067 \x3d (state_42080[(2)]);\nvar inst_42068 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_42067,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_42069 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_42067,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar inst_42070 \x3d (chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2 ? chess.engine.worker_engine.submit_command.cljs$core$IFn$_invoke$arity$2(inst_42044,inst_42069) : chess.engine.worker_engine.submit_command.call(null,inst_42044,inst_42069));\nvar inst_42071 \x3d cljs.core.async.pipe.cljs$core$IFn$_invoke$arity$2(inst_42070,inst_42068);\nvar state_42080__$1 \x3d (function (){var statearr_42104 \x3d state_42080;\n(statearr_42104[(11)] \x3d inst_42071);\n\nreturn statearr_42104;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42080__$1,(24),chess.engine.worker_engine.work_chan);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (19))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42105_42359 \x3d state_42080__$1;\n(statearr_42105_42359[(2)] \x3d false);\n\n(statearr_42105_42359[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (11))){\nvar inst_42038 \x3d (state_42080[(2)]);\nvar inst_42039 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_42038,new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765));\nvar inst_42040 \x3d cljs.core.get.cljs$core$IFn$_invoke$arity$2(inst_42038,new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471));\nvar state_42080__$1 \x3d (function (){var statearr_42106 \x3d state_42080;\n(statearr_42106[(12)] \x3d inst_42039);\n\n(statearr_42106[(13)] \x3d inst_42040);\n\nreturn statearr_42106;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42080__$1,(12),chess.engine.worker_engine.worker_chan_chan);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (9))){\nvar inst_42017 \x3d (state_42080[(10)]);\nvar inst_42035 \x3d cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,inst_42017);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42107_42360 \x3d state_42080__$1;\n(statearr_42107_42360[(2)] \x3d inst_42035);\n\n(statearr_42107_42360[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (5))){\nvar inst_42033 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d state_42080;\nif(cljs.core.truth_(inst_42033)){\nvar statearr_42108_42361 \x3d state_42080__$1;\n(statearr_42108_42361[(1)] \x3d (9));\n\n} else {\nvar statearr_42109_42362 \x3d state_42080__$1;\n(statearr_42109_42362[(1)] \x3d (10));\n\n}\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (14))){\nvar inst_42078 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d state_42080;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42080__$1,inst_42078);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (16))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42110_42363 \x3d state_42080__$1;\n(statearr_42110_42363[(2)] \x3d false);\n\n(statearr_42110_42363[(1)] \x3d (17));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (10))){\nvar inst_42017 \x3d (state_42080[(10)]);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42111_42364 \x3d state_42080__$1;\n(statearr_42111_42364[(2)] \x3d inst_42017);\n\n(statearr_42111_42364[(1)] \x3d (11));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (18))){\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42112_42365 \x3d state_42080__$1;\n(statearr_42112_42365[(2)] \x3d true);\n\n(statearr_42112_42365[(1)] \x3d (20));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nif((state_val_42081 \x3d\x3d\x3d (8))){\nvar inst_42030 \x3d (state_42080[(2)]);\nvar state_42080__$1 \x3d state_42080;\nvar statearr_42113_42367 \x3d state_42080__$1;\n(statearr_42113_42367[(2)] \x3d inst_42030);\n\n(statearr_42113_42367[(1)] \x3d (5));\n\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42114 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_42114[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42114[(1)] \x3d (1));\n\nreturn statearr_42114;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42080){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42080);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42115){if((e42115 instanceof Object)){\nvar ex__27097__auto__ \x3d e42115;\nvar statearr_42116_42369 \x3d state_42080;\n(statearr_42116_42369[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42080);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42115;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42370 \x3d state_42080;\nstate_42080 \x3d G__42370;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42080){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42080);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42117 \x3d f__27117__auto__();\n(statearr_42117[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42117;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n})()\n;\n}\nchess.engine.worker_engine.submit_command \x3d (function chess$engine$worker_engine$submit_command(worker_chan,form){\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42129){\nvar state_val_42130 \x3d (state_42129[(1)]);\nif((state_val_42130 \x3d\x3d\x3d (1))){\nvar inst_42118 \x3d (state_42129[(7)]);\nvar inst_42118__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_42119 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_42120 \x3d [inst_42118__$1,form];\nvar inst_42121 \x3d cljs.core.PersistentHashMap.fromArrays(inst_42119,inst_42120);\nvar state_42129__$1 \x3d (function (){var statearr_42131 \x3d state_42129;\n(statearr_42131[(7)] \x3d inst_42118__$1);\n\nreturn statearr_42131;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_42129__$1,(2),worker_chan,inst_42121);\n} else {\nif((state_val_42130 \x3d\x3d\x3d (2))){\nvar inst_42118 \x3d (state_42129[(7)]);\nvar inst_42123 \x3d (state_42129[(2)]);\nvar state_42129__$1 \x3d (function (){var statearr_42132 \x3d state_42129;\n(statearr_42132[(8)] \x3d inst_42123);\n\nreturn statearr_42132;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42129__$1,(3),inst_42118);\n} else {\nif((state_val_42130 \x3d\x3d\x3d (3))){\nvar inst_42125 \x3d (state_42129[(2)]);\nvar state_42129__$1 \x3d (function (){var statearr_42133 \x3d state_42129;\n(statearr_42133[(9)] \x3d inst_42125);\n\nreturn statearr_42133;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_42129__$1,(4),chess.engine.worker_engine.worker_chan_chan,worker_chan);\n} else {\nif((state_val_42130 \x3d\x3d\x3d (4))){\nvar inst_42125 \x3d (state_42129[(9)]);\nvar inst_42127 \x3d (state_42129[(2)]);\nvar state_42129__$1 \x3d (function (){var statearr_42134 \x3d state_42129;\n(statearr_42134[(10)] \x3d inst_42127);\n\nreturn statearr_42134;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42129__$1,inst_42125);\n} else {\nreturn null;\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$submit_command_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42135 \x3d [null,null,null,null,null,null,null,null,null,null,null];\n(statearr_42135[(0)] \x3d chess$engine$worker_engine$submit_command_$_state_machine__27094__auto__);\n\n(statearr_42135[(1)] \x3d (1));\n\nreturn statearr_42135;\n});\nvar chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____1 \x3d (function (state_42129){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42129);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42136){if((e42136 instanceof Object)){\nvar ex__27097__auto__ \x3d e42136;\nvar statearr_42137_42371 \x3d state_42129;\n(statearr_42137_42371[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42129);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42136;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42372 \x3d state_42129;\nstate_42129 \x3d G__42372;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$submit_command_$_state_machine__27094__auto__ \x3d function(state_42129){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____1.call(this,state_42129);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$submit_command_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____0;\nchess$engine$worker_engine$submit_command_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$submit_command_$_state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$submit_command_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42138 \x3d f__27117__auto__();\n(statearr_42138[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42138;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n});\nchess.engine.worker_engine.printl \x3d (function chess$engine$worker_engine$printl(var_args){\nvar args__4795__auto__ \x3d [];\nvar len__4789__auto___42373 \x3d arguments.length;\nvar i__4790__auto___42374 \x3d (0);\nwhile(true){\nif((i__4790__auto___42374 \x3c len__4789__auto___42373)){\nargs__4795__auto__.push((arguments[i__4790__auto___42374]));\n\nvar G__42375 \x3d (i__4790__auto___42374 + (1));\ni__4790__auto___42374 \x3d G__42375;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__4796__auto__ \x3d ((((0) \x3c args__4795__auto__.length))?(new cljs.core.IndexedSeq(args__4795__auto__.slice((0)),(0),null)):null);\nreturn chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(argseq__4796__auto__);\n});\n\n(chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic \x3d (function (x){\nchess.utils.screen_print.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22printl: \x22,x], 0));\n\nreturn cljs.core.last(x);\n}));\n\n(chess.engine.worker_engine.printl.cljs$lang$maxFixedArity \x3d (0));\n\n/** @this {Function} */\n(chess.engine.worker_engine.printl.cljs$lang$applyTo \x3d (function (seq42139){\nvar self__4777__auto__ \x3d this;\nreturn self__4777__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq42139));\n}));\n\nchess.engine.worker_engine.dispatch \x3d (function chess$engine$worker_engine$dispatch(literal){\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42149){\nvar state_val_42150 \x3d (state_42149[(1)]);\nif((state_val_42150 \x3d\x3d\x3d (1))){\nvar inst_42140 \x3d (state_42149[(7)]);\nvar inst_42140__$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\nvar inst_42141 \x3d [new cljs.core.Keyword(null,\x22rc\x22,\x22rc\x22,-1948144765),new cljs.core.Keyword(null,\x22form\x22,\x22form\x22,-1624062471)];\nvar inst_42142 \x3d [inst_42140__$1,literal];\nvar inst_42143 \x3d cljs.core.PersistentHashMap.fromArrays(inst_42141,inst_42142);\nvar state_42149__$1 \x3d (function (){var statearr_42151 \x3d state_42149;\n(statearr_42151[(7)] \x3d inst_42140__$1);\n\nreturn statearr_42151;\n})();\nreturn cljs.core.async.impl.ioc_helpers.put_BANG_(state_42149__$1,(2),chess.engine.worker_engine.work_chan,inst_42143);\n} else {\nif((state_val_42150 \x3d\x3d\x3d (2))){\nvar inst_42140 \x3d (state_42149[(7)]);\nvar inst_42145 \x3d (state_42149[(2)]);\nvar state_42149__$1 \x3d (function (){var statearr_42152 \x3d state_42149;\n(statearr_42152[(8)] \x3d inst_42145);\n\nreturn statearr_42152;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42149__$1,(3),inst_42140);\n} else {\nif((state_val_42150 \x3d\x3d\x3d (3))){\nvar inst_42147 \x3d (state_42149[(2)]);\nvar state_42149__$1 \x3d state_42149;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42149__$1,inst_42147);\n} else {\nreturn null;\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$dispatch_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42153 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_42153[(0)] \x3d chess$engine$worker_engine$dispatch_$_state_machine__27094__auto__);\n\n(statearr_42153[(1)] \x3d (1));\n\nreturn statearr_42153;\n});\nvar chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____1 \x3d (function (state_42149){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42149);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42154){if((e42154 instanceof Object)){\nvar ex__27097__auto__ \x3d e42154;\nvar statearr_42155_42376 \x3d state_42149;\n(statearr_42155_42376[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42149);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42154;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42377 \x3d state_42149;\nstate_42149 \x3d G__42377;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$dispatch_$_state_machine__27094__auto__ \x3d function(state_42149){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____1.call(this,state_42149);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$dispatch_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____0;\nchess$engine$worker_engine$dispatch_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$dispatch_$_state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$dispatch_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42156 \x3d f__27117__auto__();\n(statearr_42156[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42156;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n});\nchess.engine.worker_engine.worker_engine \x3d (function (){\nif((typeof chess !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine !\x3d\x3d \x27undefined\x27) \x26\x26 (typeof chess.engine.worker_engine.t_chess$engine$worker_engine42157 !\x3d\x3d \x27undefined\x27)){\n} else {\n\n/**\n* @constructor\n * @implements {cljs.core.IMeta}\n * @implements {chess.engine.core.Engine}\n * @implements {cljs.core.IWithMeta}\n*/\nchess.engine.worker_engine.t_chess$engine$worker_engine42157 \x3d (function (meta42158){\nthis.meta42158 \x3d meta42158;\nthis.cljs$lang$protocol_mask$partition0$ \x3d 393216;\nthis.cljs$lang$protocol_mask$partition1$ \x3d 0;\n});\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.cljs$core$IWithMeta$_with_meta$arity$2 \x3d (function (_42159,meta42158__$1){\nvar self__ \x3d this;\nvar _42159__$1 \x3d this;\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine42157(meta42158__$1));\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.cljs$core$IMeta$_meta$arity$1 \x3d (function (_42159){\nvar self__ \x3d this;\nvar _42159__$1 \x3d this;\nreturn self__.meta42158;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.chess$engine$core$Engine$ \x3d cljs.core.PROTOCOL_SENTINEL);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.chess$engine$core$Engine$apply_move$arity$3 \x3d (function (_,board,move){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42170){\nvar state_val_42171 \x3d (state_42170[(1)]);\nif((state_val_42171 \x3d\x3d\x3d (1))){\nvar inst_42161 \x3d (function (){return (function (form42160){\nif((((form42160 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42160,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),board);\n} else {\nif((((form42160 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42160,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),move);\n} else {\nreturn form42160;\n\n}\n}\n});\n})();\nvar inst_42162 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)));\nvar inst_42163 \x3d clojure.walk.postwalk(inst_42161,inst_42162);\nvar inst_42164 \x3d chess.engine.worker_engine.dispatch(inst_42163);\nvar state_42170__$1 \x3d state_42170;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42170__$1,(2),inst_42164);\n} else {\nif((state_val_42171 \x3d\x3d\x3d (2))){\nvar inst_42166 \x3d (state_42170[(2)]);\nvar inst_42167 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_42166);\nvar inst_42168 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_42167], 0));\nvar state_42170__$1 \x3d state_42170;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42170__$1,inst_42168);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42172 \x3d [null,null,null,null,null,null,null];\n(statearr_42172[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42172[(1)] \x3d (1));\n\nreturn statearr_42172;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42170){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42170);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42173){if((e42173 instanceof Object)){\nvar ex__27097__auto__ \x3d e42173;\nvar statearr_42174_42378 \x3d state_42170;\n(statearr_42174_42378[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42170);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42173;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42379 \x3d state_42170;\nstate_42170 \x3d G__42379;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42170){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42170);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42175 \x3d f__27117__auto__();\n(statearr_42175[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42175;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.chess$engine$core$Engine$possible_moves$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42186){\nvar state_val_42187 \x3d (state_42186[(1)]);\nif((state_val_42187 \x3d\x3d\x3d (1))){\nvar inst_42177 \x3d (function (){return (function (form42176){\nif((((form42176 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42176,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),board);\n} else {\nif((((form42176 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42176,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),color);\n} else {\nreturn form42176;\n\n}\n}\n});\n})();\nvar inst_42178 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.core\x22,\x22chess.engine.core\x22,-1738754402,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22Engine\x22,\x22Engine\x22,545304390,null),new cljs.core.Symbol(null,\x22apply-move\x22,\x22apply-move\x22,-822977126,null),new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22best-move\x22,\x22best-move\x22,1788688860,null)], null)], null)),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null)], null)], null))),cljs.core.list(new cljs.core.Symbol(null,\x22possible-moves\x22,\x22possible-moves\x22,1663319573,null),new cljs.core.Symbol(null,\x22local-engine\x22,\x22local-engine\x22,1607625106,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22color\x22,\x22color\x22,-1642760596,null)));\nvar inst_42179 \x3d clojure.walk.postwalk(inst_42177,inst_42178);\nvar inst_42180 \x3d chess.engine.worker_engine.dispatch(inst_42179);\nvar state_42186__$1 \x3d state_42186;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42186__$1,(2),inst_42180);\n} else {\nif((state_val_42187 \x3d\x3d\x3d (2))){\nvar inst_42182 \x3d (state_42186[(2)]);\nvar inst_42183 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_42182);\nvar inst_42184 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_42183], 0));\nvar state_42186__$1 \x3d state_42186;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42186__$1,inst_42184);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42188 \x3d [null,null,null,null,null,null,null];\n(statearr_42188[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42188[(1)] \x3d (1));\n\nreturn statearr_42188;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42186){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42186);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42189){if((e42189 instanceof Object)){\nvar ex__27097__auto__ \x3d e42189;\nvar statearr_42190_42380 \x3d state_42186;\n(statearr_42190_42380[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42186);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42189;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42381 \x3d state_42186;\nstate_42186 \x3d G__42381;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42186){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42186);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42191 \x3d f__27117__auto__();\n(statearr_42191[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42191;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.prototype.chess$engine$core$Engine$best_move$arity$3 \x3d (function (_,board,color){\nvar self__ \x3d this;\nvar ___$1 \x3d this;\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42205){\nvar state_val_42206 \x3d (state_42205[(1)]);\nif((state_val_42206 \x3d\x3d\x3d (1))){\nvar inst_42192 \x3d (function (){return (function (a,b){\nreturn cljs.core.cons(b,a);\n});\n})();\nvar inst_42193 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_42194 \x3d (function (){return (function (move){\nvar c__27116__auto____$1 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42217){\nvar state_val_42218 \x3d (state_42217[(1)]);\nif((state_val_42218 \x3d\x3d\x3d (1))){\nvar inst_42208 \x3d (function (){return (function (form42207){\nif((((form42207 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42207,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),board);\n} else {\nif((((form42207 instanceof cljs.core.Symbol)) \x26\x26 (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(form42207,cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null)))))){\nreturn clojure.walk.postwalk((function (p1__25537__25538__auto__){\nif(cljs.core.seq_QMARK_(p1__25537__25538__auto__)){\nreturn cljs.core.cons(new cljs.core.Symbol(\x22clojure.core\x22,\x22list\x22,\x22clojure.core/list\x22,-1119203325,null),p1__25537__25538__auto__);\n} else {\nreturn p1__25537__25538__auto__;\n}\n}),move);\n} else {\nreturn form42207;\n\n}\n}\n});\n})();\nvar inst_42209 \x3d cljs.core.list(new cljs.core.Symbol(null,\x22do\x22,\x22do\x22,1686842252,null),cljs.core.list(new cljs.core.Symbol(null,\x22require\x22,\x22require\x22,1172530194,null),cljs.core.list(new cljs.core.Symbol(null,\x22quote\x22,\x22quote\x22,1377916282,null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22chess.engine.local-engine\x22,\x22chess.engine.local-engine\x22,1532474516,null),new cljs.core.Keyword(null,\x22refer\x22,\x22refer\x22,-964295553),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null)], null)], null))),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),cljs.core.list(new cljs.core.Symbol(null,\x22move-value\x22,\x22move-value\x22,2011801283,null),new cljs.core.Symbol(null,\x22board\x22,\x22board\x22,-266486106,null),new cljs.core.Symbol(null,\x22move\x22,\x22move\x22,-470352782,null),(2))], null));\nvar inst_42210 \x3d clojure.walk.postwalk(inst_42208,inst_42209);\nvar inst_42211 \x3d chess.engine.worker_engine.dispatch(inst_42210);\nvar state_42217__$1 \x3d state_42217;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42217__$1,(2),inst_42211);\n} else {\nif((state_val_42218 \x3d\x3d\x3d (2))){\nvar inst_42213 \x3d (state_42217[(2)]);\nvar inst_42214 \x3d new cljs.core.Keyword(null,\x22value\x22,\x22value\x22,305978217).cljs$core$IFn$_invoke$arity$1(inst_42213);\nvar inst_42215 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_42214], 0));\nvar state_42217__$1 \x3d state_42217;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42217__$1,inst_42215);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42219 \x3d [null,null,null,null,null,null,null];\n(statearr_42219[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42219[(1)] \x3d (1));\n\nreturn statearr_42219;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42217){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42217);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42220){if((e42220 instanceof Object)){\nvar ex__27097__auto__ \x3d e42220;\nvar statearr_42221_42382 \x3d state_42217;\n(statearr_42221_42382[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42217);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42220;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42383 \x3d state_42217;\nstate_42217 \x3d G__42383;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42217){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42217);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42222 \x3d f__27117__auto__();\n(statearr_42222[(6)] \x3d c__27116__auto____$1);\n\nreturn statearr_42222;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto____$1;\n});\n})();\nvar inst_42195 \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,board,color);\nvar inst_42196 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2(inst_42194,inst_42195);\nvar inst_42197 \x3d cljs.core.async.merge.cljs$core$IFn$_invoke$arity$1(inst_42196);\nvar inst_42198 \x3d cljs.core.async.reduce(inst_42192,inst_42193,inst_42197);\nvar state_42205__$1 \x3d state_42205;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42205__$1,(2),inst_42198);\n} else {\nif((state_val_42206 \x3d\x3d\x3d (2))){\nvar inst_42200 \x3d (state_42205[(2)]);\nvar inst_42201 \x3d chess.utils.maxf(cljs.core.second,inst_42200);\nvar inst_42202 \x3d chess.engine.worker_engine.printl.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22final result\x22,inst_42201], 0));\nvar inst_42203 \x3d cljs.core.first(inst_42202);\nvar state_42205__$1 \x3d state_42205;\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42205__$1,inst_42203);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$worker_engine$state_machine__27094__auto__ \x3d null;\nvar chess$engine$worker_engine$state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42223 \x3d [null,null,null,null,null,null,null];\n(statearr_42223[(0)] \x3d chess$engine$worker_engine$state_machine__27094__auto__);\n\n(statearr_42223[(1)] \x3d (1));\n\nreturn statearr_42223;\n});\nvar chess$engine$worker_engine$state_machine__27094__auto____1 \x3d (function (state_42205){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42205);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42224){if((e42224 instanceof Object)){\nvar ex__27097__auto__ \x3d e42224;\nvar statearr_42225_42384 \x3d state_42205;\n(statearr_42225_42384[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42205);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42224;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42385 \x3d state_42205;\nstate_42205 \x3d G__42385;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$worker_engine$state_machine__27094__auto__ \x3d function(state_42205){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$worker_engine$state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$worker_engine$state_machine__27094__auto____1.call(this,state_42205);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$worker_engine$state_machine__27094__auto____0;\nchess$engine$worker_engine$state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$worker_engine$state_machine__27094__auto____1;\nreturn chess$engine$worker_engine$state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42226 \x3d f__27117__auto__();\n(statearr_42226[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42226;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.getBasis \x3d (function (){\nreturn new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,\x22meta42158\x22,\x22meta42158\x22,531420975,null)], null);\n}));\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.cljs$lang$type \x3d true);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.cljs$lang$ctorStr \x3d \x22chess.engine.worker-engine/t_chess$engine$worker_engine42157\x22);\n\n(chess.engine.worker_engine.t_chess$engine$worker_engine42157.cljs$lang$ctorPrWriter \x3d (function (this__4428__auto__,writer__4429__auto__,opt__4430__auto__){\nreturn cljs.core._write(writer__4429__auto__,\x22chess.engine.worker-engine/t_chess$engine$worker_engine42157\x22);\n}));\n\n/**\n * Positional factory function for chess.engine.worker-engine/t_chess$engine$worker_engine42157.\n */\nchess.engine.worker_engine.__GT_t_chess$engine$worker_engine42157 \x3d (function chess$engine$worker_engine$__GT_t_chess$engine$worker_engine42157(meta42158){\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine42157(meta42158));\n});\n\n}\n\nreturn (new chess.engine.worker_engine.t_chess$engine$worker_engine42157(cljs.core.PersistentArrayMap.EMPTY));\n})()\n;\n");
SHADOW_ENV.evalLoad("chess.engine.hook.js", true , "goog.provide(\x27chess.engine.hook\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.engine.core\x27);\ngoog.require(\x27chess.engine.local_engine\x27);\ngoog.require(\x27chess.engine.worker_engine\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27cljs.core.async\x27);\nchess.engine.hook.use_engine \x3d (function chess$engine$hook$use_engine(my_color){\n\nvar color \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(my_color);\nvar board \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.core.init_board);\nvar moves \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,chess.engine.core.init_board,my_color));\nreturn (function (vdom_state){\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.deref(board),cljs.core.deref(moves),(function (move){\nvar my_board \x3d chess.engine.local_engine.local_engine.chess$engine$core$Engine$apply_move$arity$3(null,cljs.core.deref(board),move);\ncljs.core.reset_BANG_(color,chess.engine.core.other_color(my_color));\n\ncljs.core.reset_BANG_(board,my_board);\n\ncljs.core.reset_BANG_(moves,cljs.core.PersistentVector.EMPTY);\n\nhtml_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\n\ncljs.core.prn.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([\x22\x22], 0));\n\nreturn setTimeout((function (){\ncljs.core.reset_BANG_(board,chess.engine.local_engine.local_engine.chess$engine$core$Engine$apply_move$arity$3(null,my_board,chess.engine.local_engine.local_engine.chess$engine$core$Engine$best_move$arity$3(null,my_board,chess.engine.core.other_color(my_color))));\n\ncljs.core.reset_BANG_(moves,chess.engine.local_engine.local_engine.chess$engine$core$Engine$possible_moves$arity$3(null,cljs.core.deref(board),my_color));\n\ncljs.core.reset_BANG_(color,my_color);\n\nreturn html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\n}),(100));\n})], null);\n});\n});\nchess.engine.hook.use_async_engine \x3d (function chess$engine$hook$use_async_engine(my_color){\n\nvar color \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(my_color);\nvar board \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(chess.engine.core.init_board);\nvar moves \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentVector.EMPTY);\nvar initial \x3d cljs.core.atom.cljs$core$IFn$_invoke$arity$1(true);\nreturn (function (vdom_state){\nif(cljs.core.truth_(cljs.core.deref(initial))){\nvar c__27116__auto___42347 \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42262){\nvar state_val_42263 \x3d (state_42262[(1)]);\nif((state_val_42263 \x3d\x3d\x3d (1))){\nvar inst_42255 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,chess.engine.core.init_board,my_color);\nvar state_42262__$1 \x3d state_42262;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42262__$1,(2),inst_42255);\n} else {\nif((state_val_42263 \x3d\x3d\x3d (2))){\nvar inst_42257 \x3d (state_42262[(2)]);\nvar inst_42258 \x3d cljs.core.reset_BANG_(moves,inst_42257);\nvar inst_42259 \x3d cljs.core.reset_BANG_(initial,false);\nvar inst_42260 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar state_42262__$1 \x3d (function (){var statearr_42269 \x3d state_42262;\n(statearr_42269[(7)] \x3d inst_42258);\n\n(statearr_42269[(8)] \x3d inst_42259);\n\nreturn statearr_42269;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42262__$1,inst_42260);\n} else {\nreturn null;\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42271 \x3d [null,null,null,null,null,null,null,null,null];\n(statearr_42271[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto__);\n\n(statearr_42271[(1)] \x3d (1));\n\nreturn statearr_42271;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1 \x3d (function (state_42262){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42262);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42273){if((e42273 instanceof Object)){\nvar ex__27097__auto__ \x3d e42273;\nvar statearr_42274_42354 \x3d state_42262;\n(statearr_42274_42354[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42262);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42273;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42355 \x3d state_42262;\nstate_42262 \x3d G__42355;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__ \x3d function(state_42262){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1.call(this,state_42262);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42279 \x3d f__27117__auto__();\n(statearr_42279[(6)] \x3d c__27116__auto___42347);\n\nreturn statearr_42279;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\n} else {\n}\n\nreturn new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.deref(board),cljs.core.deref(moves),(function (move){\nvar c__27116__auto__ \x3d cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));\ncljs.core.async.impl.dispatch.run((function (){\nvar f__27117__auto__ \x3d (function (){var switch__27093__auto__ \x3d (function (state_42308){\nvar state_val_42309 \x3d (state_42308[(1)]);\nif((state_val_42309 \x3d\x3d\x3d (1))){\nvar inst_42282 \x3d cljs.core.deref(board);\nvar inst_42283 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_42282,move);\nvar state_42308__$1 \x3d state_42308;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42308__$1,(2),inst_42283);\n} else {\nif((state_val_42309 \x3d\x3d\x3d (2))){\nvar inst_42285 \x3d (state_42308[(7)]);\nvar inst_42285__$1 \x3d (state_42308[(2)]);\nvar inst_42286 \x3d chess.engine.core.other_color(my_color);\nvar inst_42287 \x3d cljs.core.reset_BANG_(color,inst_42286);\nvar inst_42288 \x3d cljs.core.reset_BANG_(board,inst_42285__$1);\nvar inst_42289 \x3d cljs.core.PersistentVector.EMPTY;\nvar inst_42290 \x3d cljs.core.reset_BANG_(moves,inst_42289);\nvar inst_42291 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar inst_42292 \x3d chess.engine.core.other_color(my_color);\nvar inst_42293 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$best_move$arity$3(null,inst_42285__$1,inst_42292);\nvar state_42308__$1 \x3d (function (){var statearr_42319 \x3d state_42308;\n(statearr_42319[(8)] \x3d inst_42288);\n\n(statearr_42319[(9)] \x3d inst_42291);\n\n(statearr_42319[(10)] \x3d inst_42290);\n\n(statearr_42319[(11)] \x3d inst_42287);\n\n(statearr_42319[(7)] \x3d inst_42285__$1);\n\nreturn statearr_42319;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42308__$1,(4),inst_42293);\n} else {\nif((state_val_42309 \x3d\x3d\x3d (3))){\nvar inst_42298 \x3d (state_42308[(2)]);\nvar inst_42299 \x3d cljs.core.reset_BANG_(board,inst_42298);\nvar inst_42300 \x3d cljs.core.deref(board);\nvar inst_42301 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$possible_moves$arity$3(null,inst_42300,my_color);\nvar state_42308__$1 \x3d (function (){var statearr_42326 \x3d state_42308;\n(statearr_42326[(12)] \x3d inst_42299);\n\nreturn statearr_42326;\n})();\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42308__$1,(5),inst_42301);\n} else {\nif((state_val_42309 \x3d\x3d\x3d (4))){\nvar inst_42285 \x3d (state_42308[(7)]);\nvar inst_42295 \x3d (state_42308[(2)]);\nvar inst_42296 \x3d chess.engine.worker_engine.worker_engine.chess$engine$core$Engine$apply_move$arity$3(null,inst_42285,inst_42295);\nvar state_42308__$1 \x3d state_42308;\nreturn cljs.core.async.impl.ioc_helpers.take_BANG_(state_42308__$1,(3),inst_42296);\n} else {\nif((state_val_42309 \x3d\x3d\x3d (5))){\nvar inst_42303 \x3d (state_42308[(2)]);\nvar inst_42304 \x3d cljs.core.reset_BANG_(moves,inst_42303);\nvar inst_42305 \x3d cljs.core.reset_BANG_(color,my_color);\nvar inst_42306 \x3d html_cljs.html.refresh.cljs$core$IFn$_invoke$arity$1(vdom_state);\nvar state_42308__$1 \x3d (function (){var statearr_42327 \x3d state_42308;\n(statearr_42327[(13)] \x3d inst_42304);\n\n(statearr_42327[(14)] \x3d inst_42305);\n\nreturn statearr_42327;\n})();\nreturn cljs.core.async.impl.ioc_helpers.return_chan(state_42308__$1,inst_42306);\n} else {\nreturn null;\n}\n}\n}\n}\n}\n});\nreturn (function() {\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto__ \x3d null;\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0 \x3d (function (){\nvar statearr_42329 \x3d [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];\n(statearr_42329[(0)] \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto__);\n\n(statearr_42329[(1)] \x3d (1));\n\nreturn statearr_42329;\n});\nvar chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1 \x3d (function (state_42308){\nwhile(true){\nvar ret_value__27095__auto__ \x3d (function (){try{while(true){\nvar result__27096__auto__ \x3d switch__27093__auto__(state_42308);\nif(cljs.core.keyword_identical_QMARK_(result__27096__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\ncontinue;\n} else {\nreturn result__27096__auto__;\n}\nbreak;\n}\n}catch (e42331){if((e42331 instanceof Object)){\nvar ex__27097__auto__ \x3d e42331;\nvar statearr_42332_42366 \x3d state_42308;\n(statearr_42332_42366[(5)] \x3d ex__27097__auto__);\n\n\ncljs.core.async.impl.ioc_helpers.process_exception(state_42308);\n\nreturn new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268);\n} else {\nthrow e42331;\n\n}\n}})();\nif(cljs.core.keyword_identical_QMARK_(ret_value__27095__auto__,new cljs.core.Keyword(null,\x22recur\x22,\x22recur\x22,-437573268))){\nvar G__42368 \x3d state_42308;\nstate_42308 \x3d G__42368;\ncontinue;\n} else {\nreturn ret_value__27095__auto__;\n}\nbreak;\n}\n});\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__ \x3d function(state_42308){\nswitch(arguments.length){\ncase 0:\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0.call(this);\ncase 1:\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1.call(this,state_42308);\n}\nthrow(new Error(\x27Invalid arity: \x27 + arguments.length));\n};\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$0 \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto____0;\nchess$engine$hook$use_async_engine_$_state_machine__27094__auto__.cljs$core$IFn$_invoke$arity$1 \x3d chess$engine$hook$use_async_engine_$_state_machine__27094__auto____1;\nreturn chess$engine$hook$use_async_engine_$_state_machine__27094__auto__;\n})()\n})();\nvar state__27118__auto__ \x3d (function (){var statearr_42338 \x3d f__27117__auto__();\n(statearr_42338[(6)] \x3d c__27116__auto__);\n\nreturn statearr_42338;\n})();\nreturn cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__27118__auto__);\n}));\n\nreturn c__27116__auto__;\n})], null);\n});\n});\n");
SHADOW_ENV.evalLoad("chess.core.js", true , "goog.provide(\x27chess.core\x27);\ngoog.require(\x27cljs.core\x27);\ngoog.require(\x27chess.components.board\x27);\ngoog.require(\x27html_cljs.html\x27);\ngoog.require(\x27chess.utils\x27);\ngoog.require(\x27chess.engine.hook\x27);\nchess.core.root \x3d document.getElementById(\x22app\x22);\nchess.core.set_app \x3d (function chess$core$set_app(){\nreturn html_cljs.html.mount(chess.core.root,(function (vdom_state__25572__auto__){\nvar hook_instances__25573__auto__ \x3d new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [chess.engine.hook.use_async_engine(new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618))], null);\nreturn (function (){\nvar vec__27267 \x3d cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (p1__25574__25575__auto__){\nreturn (p1__25574__25575__auto__.cljs$core$IFn$_invoke$arity$1 ? p1__25574__25575__auto__.cljs$core$IFn$_invoke$arity$1(vdom_state__25572__auto__) : p1__25574__25575__auto__.call(null,vdom_state__25572__auto__));\n}),hook_instances__25573__auto__);\nvar vec__27270 \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27267,(0),null);\nvar board_data \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27270,(0),null);\nvar moves \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27270,(1),null);\nvar on_move \x3d cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__27270,(2),null);\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\x22type\x22,\x22type\x22,1174270348),\x22div\x22,new cljs.core.Keyword(null,\x22style\x22,\x22style\x22,-496642736),new cljs.core.PersistentArrayMap(null, 2, [\x22width\x22,\x22100%\x22,\x22height\x22,\x22100%\x22], null)], null),new cljs.core.Keyword(null,\x22children\x22,\x22children\x22,-940561982),cljs.core.flatten(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [chess.components.board.board.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\x22board\x22,\x22board\x22,-1907017633),board_data,new cljs.core.Keyword(null,\x22player\x22,\x22player\x22,-97687400),new cljs.core.Keyword(null,\x22white\x22,\x22white\x22,-483998618),new cljs.core.Keyword(null,\x22moves\x22,\x22moves\x22,927465255),moves,new cljs.core.Keyword(null,\x22on-move\x22,\x22on-move\x22,-1779179710),on_move], 0))], null)));\n});\n}));\n});\nchess.core.init \x3d (function chess$core$init(){\nreturn chess.core.set_app();\n});\ngoog.exportSymbol(\x27chess.core.init\x27, chess.core.init);\n");
SHADOW_ENV.evalLoad("shadow.module.main.append.js", false , "\nchess.core.init();;\nSHADOW_ENV.setLoaded(\x22chess.components.square.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.components.board.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.worker_engine.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.engine.hook.js\x22);\nSHADOW_ENV.setLoaded(\x22chess.core.js\x22);\nSHADOW_ENV.setLoaded(\x22shadow.module.main.append.js\x22);\nshadow.cljs.bootstrap.env.set_loaded([\x22chess.components.board\x22,\x22chess.engine.worker-engine\x22,\x22shadow.module.main.append\x22,\x22chess.components.square\x22,\x22chess.engine.hook\x22,\x22chess.core\x22]);\n");